import { queueScheduler } from 'rxjs';
import { filter, map, observeOn, pairwise } from 'rxjs/operators';
import { LoadStatus, } from '../model/organization-item-status';
export function getItemStatus(itemState) {
    return itemState.pipe(observeOn(queueScheduler), pairwise(), filter(([previousState]) => previousState.loading), map(([_previousState, currentState]) => ({
        status: currentState.success
            ? LoadStatus.SUCCESS
            : currentState.error
                ? LoadStatus.ERROR
                : null,
        item: currentState.value,
    })));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWl0ZW0tc3RhdHVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL29yZ2FuaXphdGlvbi9hZG1pbmlzdHJhdGlvbi9jb3JlL3V0aWxzL2dldC1pdGVtLXN0YXR1cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQWMsY0FBYyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2xELE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNsRSxPQUFPLEVBQ0wsVUFBVSxHQUVYLE1BQU0sbUNBQW1DLENBQUM7QUFFM0MsTUFBTSxVQUFVLGFBQWEsQ0FDM0IsU0FBZ0Q7SUFFaEQsT0FBTyxTQUFTLENBQUMsSUFBSSxDQUNuQixTQUFTLENBQUMsY0FBYyxDQUFDLEVBQ3pCLFFBQVEsRUFBRSxFQUNWLE1BQU0sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsRUFDbEQsR0FBRyxDQUFDLENBQUMsQ0FBQyxjQUFjLEVBQUUsWUFBWSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDdkMsTUFBTSxFQUFFLFlBQVksQ0FBQyxPQUFPO1lBQzFCLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTztZQUNwQixDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUs7Z0JBQ3BCLENBQUMsQ0FBQyxVQUFVLENBQUMsS0FBSztnQkFDbEIsQ0FBQyxDQUFDLElBQUk7UUFDUixJQUFJLEVBQUUsWUFBWSxDQUFDLEtBQUs7S0FDekIsQ0FBQyxDQUFDLENBQ0osQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZVV0aWxzIH0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIHF1ZXVlU2NoZWR1bGVyIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBmaWx0ZXIsIG1hcCwgb2JzZXJ2ZU9uLCBwYWlyd2lzZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7XG4gIExvYWRTdGF0dXMsXG4gIE9yZ2FuaXphdGlvbkl0ZW1TdGF0dXMsXG59IGZyb20gJy4uL21vZGVsL29yZ2FuaXphdGlvbi1pdGVtLXN0YXR1cyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJdGVtU3RhdHVzPFQ+KFxuICBpdGVtU3RhdGU6IE9ic2VydmFibGU8U3RhdGVVdGlscy5Mb2FkZXJTdGF0ZTxUPj5cbik6IE9ic2VydmFibGU8T3JnYW5pemF0aW9uSXRlbVN0YXR1czxUPj4ge1xuICByZXR1cm4gaXRlbVN0YXRlLnBpcGUoXG4gICAgb2JzZXJ2ZU9uKHF1ZXVlU2NoZWR1bGVyKSxcbiAgICBwYWlyd2lzZSgpLFxuICAgIGZpbHRlcigoW3ByZXZpb3VzU3RhdGVdKSA9PiBwcmV2aW91c1N0YXRlLmxvYWRpbmcpLFxuICAgIG1hcCgoW19wcmV2aW91c1N0YXRlLCBjdXJyZW50U3RhdGVdKSA9PiAoe1xuICAgICAgc3RhdHVzOiBjdXJyZW50U3RhdGUuc3VjY2Vzc1xuICAgICAgICA/IExvYWRTdGF0dXMuU1VDQ0VTU1xuICAgICAgICA6IGN1cnJlbnRTdGF0ZS5lcnJvclxuICAgICAgICA/IExvYWRTdGF0dXMuRVJST1JcbiAgICAgICAgOiBudWxsLFxuICAgICAgaXRlbTogY3VycmVudFN0YXRlLnZhbHVlLFxuICAgIH0pKVxuICApO1xufVxuIl19