import { ChangeDetectionStrategy, Component, HostBinding, Input, } from '@angular/core';
import { tap } from 'rxjs/operators';
import { ICON_TYPE } from '@spartacus/storefront';
import * as i0 from "@angular/core";
import * as i1 from "./list.service";
import * as i2 from "../item.service";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@ng-select/ng-select";
import * as i5 from "@angular/common";
import * as i6 from "@angular/forms";
import * as i7 from "@angular/router";
import * as i8 from "@spartacus/core";
export class ListComponent {
    constructor(service, organizationItemService) {
        this.service = service;
        this.organizationItemService = organizationItemService;
        this.hasGhostData = false;
        this.viewType = this.service.viewType;
        this.domainType = this.service.domainType;
        this.iconTypes = ICON_TYPE;
        /**
         * The current key represents the current selected item from the dataset.
         * This key is used to load the item details as well as highlight the item in
         * a list of items.
         */
        this.currentKey$ = this.organizationItemService.key$;
        this.structure$ = this.service.getStructure();
        this.listData$ = this.service
            .getData()
            .pipe(tap((data) => {
            var _a;
            this.sortCode = (_a = data.pagination) === null || _a === void 0 ? void 0 : _a.sort;
            this.hasGhostData = this.service.hasGhostData(data);
        }));
        this.key = this.service.key();
    }
    /**
     * Returns the total number of items.
     */
    getListCount(dataTable) {
        var _a;
        return (_a = dataTable.pagination) === null || _a === void 0 ? void 0 : _a.totalResults;
    }
    /**
     * Browses to the given page number
     */
    browse(pagination, pageNumber) {
        this.service.view(pagination, pageNumber);
    }
    /**
     * Navigates to the detailed view of the selected list item.
     */
    launchItem(event) {
        this.organizationItemService.launchDetails(event);
    }
    /**
     * Sorts the list.
     */
    sort(pagination) {
        this.service.sort(Object.assign(Object.assign({}, pagination), { sort: this.sortCode }));
    }
}
ListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: ListComponent, deps: [{ token: i1.ListService }, { token: i2.ItemService }], target: i0.ɵɵFactoryTarget.Component });
ListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.0.5", type: ListComponent, selector: "cx-org-list", inputs: { key: "key" }, host: { properties: { "class.ghost": "this.hasGhostData", "class": "this.viewType" } }, ngImport: i0, template: "<cx-split-view [hideMode]=\"false\">\n  <ng-container *ngIf=\"structure$ | async as structure\">\n    <cx-view class=\"list\" *ngIf=\"listData$ | async as data\">\n      <div class=\"header\">\n        <div class=\"title\">\n          <h3>\n            {{\n              viewType + '.header' | cxTranslate: { count: getListCount(data) }\n            }}\n            <button\n              [cxPopover]=\"listHint\"\n              [cxPopoverOptions]=\"{\n                placement: 'auto',\n                class: 'hint-popover',\n                appendToBody: true,\n                displayCloseButton: true\n              }\"\n            >\n              <cx-icon [type]=\"iconTypes.INFO\"> </cx-icon>\n            </button>\n          </h3>\n        </div>\n\n        <div class=\"actions\">\n          <label>\n            <span *ngIf=\"data.pagination?.sort\">{{\n              structure.type + '.sortBy' | cxTranslate\n            }}</span>\n            <ng-select\n              name=\"sort\"\n              class=\"sort\"\n              *ngIf=\"data.pagination?.sort\"\n              [searchable]=\"false\"\n              [clearable]=\"false\"\n              (change)=\"sort(data.pagination)\"\n              [tabIndex]=\"0\"\n              [(ngModel)]=\"sortCode\"\n              [attr.aria-label]=\"\n                (sortCode\n                  ? structure.type + '.sort.' + sortCode\n                  : structure.type + '.sortBy'\n                ) | cxTranslate\n              \"\n            >\n              <ng-option *ngFor=\"let sort of data.sorts\" [value]=\"sort.code\">\n                {{ structure.type + '.sort.' + sort.code | cxTranslate }}\n              </ng-option>\n            </ng-select>\n          </label>\n\n          <ng-content select=\"[actions]\"></ng-content>\n\n          <a\n            class=\"button primary create\"\n            [routerLink]=\"{ cxRoute: structure.type + 'Create' } | cxUrl\"\n            routerLinkActive=\"disabled\"\n          >\n            {{ 'organization.add' | cxTranslate }}\n          </a>\n        </div>\n      </div>\n\n      <cx-table\n        *ngIf=\"data.values?.length > 0; else emptyList\"\n        [structure]=\"structure\"\n        [data]=\"data.values\"\n        [i18nRoot]=\"domainType\"\n        [currentItem]=\"{ property: key, value: currentKey$ | async }\"\n        (launch)=\"launchItem($event)\"\n        [cxFocus]=\"{ trap: 'both' }\"\n      >\n      </cx-table>\n\n      <div class=\"footer\">\n        <cx-pagination\n          [pagination]=\"data.pagination\"\n          (viewPageEvent)=\"browse(data.pagination, $event)\"\n        ></cx-pagination>\n      </div>\n    </cx-view>\n\n    <!-- nested split views are rendered inside child routes -->\n    <router-outlet></router-outlet>\n  </ng-container>\n</cx-split-view>\n\n<ng-template #emptyList>\n  <p class=\"instruction is-empty\">\n    {{ 'organization.messages.emptyList' | cxTranslate }}\n  </p>\n</ng-template>\n\n<ng-template #listHint>\n  <p>\n    {{ viewType + '.hint' | cxTranslate }}\n  </p>\n</ng-template>\n", components: [{ type: i3.SplitViewComponent, selector: "cx-split-view", inputs: ["hideMode"] }, { type: i3.ViewComponent, selector: "cx-view", inputs: ["position", "hidden"], outputs: ["hiddenChange"] }, { type: i3.IconComponent, selector: "cx-icon,[cxIcon]", inputs: ["cxIcon", "type"] }, { type: i4.NgSelectComponent, selector: "ng-select", inputs: ["markFirst", "dropdownPosition", "loading", "closeOnSelect", "hideSelected", "selectOnTab", "bufferAmount", "selectableGroup", "selectableGroupAsModel", "searchFn", "trackByFn", "clearOnBackspace", "labelForId", "inputAttrs", "readonly", "searchWhileComposing", "minTermLength", "editableSearchTerm", "keyDownFn", "multiple", "addTag", "searchable", "clearable", "isOpen", "items", "compareWith", "clearSearchOnAdd", "bindLabel", "placeholder", "notFoundText", "typeToSearchText", "addTagText", "loadingText", "clearAllText", "virtualScroll", "openOnEnter", "appendTo", "bindValue", "appearance", "maxSelectedItems", "groupBy", "groupValue", "tabIndex", "typeahead"], outputs: ["blur", "focus", "change", "open", "close", "search", "clear", "add", "remove", "scroll", "scrollToEnd"] }, { type: i4.ɵr, selector: "ng-option", inputs: ["disabled", "value"] }, { type: i3.TableComponent, selector: "cx-table", inputs: ["structure", "data", "i18nRoot", "currentItem"], outputs: ["launch"] }, { type: i3.PaginationComponent, selector: "cx-pagination", inputs: ["pageRoute", "queryParam", "defaultPage", "pagination"], outputs: ["viewPageEvent"] }], directives: [{ type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i3.PopoverDirective, selector: "[cxPopover]", inputs: ["cxPopover", "cxPopoverOptions"], outputs: ["openPopover", "closePopover"] }, { type: i6.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i6.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i7.RouterLinkWithHref, selector: "a[routerLink],area[routerLink]", inputs: ["routerLink", "target", "queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo"] }, { type: i7.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "routerLinkActive"], exportAs: ["routerLinkActive"] }, { type: i3.FocusDirective, selector: "[cxFocus]", inputs: ["cxFocus"] }, { type: i7.RouterOutlet, selector: "router-outlet", outputs: ["activate", "deactivate"], exportAs: ["outlet"] }], pipes: { "async": i5.AsyncPipe, "cxTranslate": i8.TranslatePipe, "cxUrl": i8.UrlPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: ListComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'cx-org-list',
                    templateUrl: './list.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.ListService }, { type: i2.ItemService }]; }, propDecorators: { hasGhostData: [{
                type: HostBinding,
                args: ['class.ghost']
            }], viewType: [{
                type: HostBinding,
                args: ['class']
            }], key: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvbXBvbmVudHMvc2hhcmVkL2xpc3QvbGlzdC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvbXBvbmVudHMvc2hhcmVkL2xpc3QvbGlzdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxXQUFXLEVBQ1gsS0FBSyxHQUNOLE1BQU0sZUFBZSxDQUFDO0FBSXZCLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUlyQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7Ozs7Ozs7Ozs7QUFPbEQsTUFBTSxPQUFPLGFBQWE7SUFHeEIsWUFDWSxPQUEwQixFQUMxQix1QkFBdUM7UUFEdkMsWUFBTyxHQUFQLE9BQU8sQ0FBbUI7UUFDMUIsNEJBQXVCLEdBQXZCLHVCQUF1QixDQUFnQjtRQUp2QixpQkFBWSxHQUFHLEtBQUssQ0FBQztRQVFqRCxhQUFRLEdBQTBCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBRXhELGVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUlyQyxjQUFTLEdBQUcsU0FBUyxDQUFDO1FBRXRCOzs7O1dBSUc7UUFDTSxnQkFBVyxHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUM7UUFFaEQsZUFBVSxHQUErQixJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDO1FBRXJFLGNBQVMsR0FBaUMsSUFBSSxDQUFDLE9BQU87YUFDNUQsT0FBTyxFQUFFO2FBQ1QsSUFBSSxDQUNILEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFOztZQUNYLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBQSxJQUFJLENBQUMsVUFBVSwwQ0FBRSxJQUFJLENBQUM7WUFDdEMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0RCxDQUFDLENBQUMsQ0FDSCxDQUFDO1FBRUssUUFBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7SUE3Qi9CLENBQUM7SUErQko7O09BRUc7SUFDSCxZQUFZLENBQUMsU0FBZ0I7O1FBQzNCLE9BQU8sTUFBQSxTQUFTLENBQUMsVUFBVSwwQ0FBRSxZQUFZLENBQUM7SUFDNUMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLFVBQWEsRUFBRSxVQUFrQjtRQUN0QyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsVUFBVSxDQUFDLEtBQVE7UUFDakIsSUFBSSxDQUFDLHVCQUF1QixDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxJQUFJLENBQUMsVUFBYTtRQUNoQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksaUNBQ1osVUFBVSxHQUNULEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQXNCLEVBQy9DLENBQUM7SUFDTCxDQUFDOzswR0FsRVUsYUFBYTs4RkFBYixhQUFhLG1LQ3BCMUIsOC9GQWlHQTsyRkQ3RWEsYUFBYTtrQkFMekIsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsYUFBYTtvQkFDdkIsV0FBVyxFQUFFLHVCQUF1QjtvQkFDcEMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2hEOzRIQUU2QixZQUFZO3NCQUF2QyxXQUFXO3VCQUFDLGFBQWE7Z0JBUTFCLFFBQVE7c0JBRFAsV0FBVzt1QkFBQyxPQUFPO2dCQTJCWCxHQUFHO3NCQUFYLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBIb3N0QmluZGluZyxcbiAgSW5wdXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRW50aXRpZXNNb2RlbCwgUGFnaW5hdGlvbk1vZGVsIH0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcbmltcG9ydCB7IFRhYmxlLCBUYWJsZVN0cnVjdHVyZSB9IGZyb20gJ0BzcGFydGFjdXMvc3RvcmVmcm9udCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBJdGVtU2VydmljZSB9IGZyb20gJy4uL2l0ZW0uc2VydmljZSc7XG5pbXBvcnQgeyBPcmdhbml6YXRpb25UYWJsZVR5cGUgfSBmcm9tICcuLi9vcmdhbml6YXRpb24ubW9kZWwnO1xuaW1wb3J0IHsgTGlzdFNlcnZpY2UgfSBmcm9tICcuL2xpc3Quc2VydmljZSc7XG5pbXBvcnQgeyBJQ09OX1RZUEUgfSBmcm9tICdAc3BhcnRhY3VzL3N0b3JlZnJvbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC1vcmctbGlzdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIExpc3RDb21wb25lbnQ8VCA9IGFueSwgUCA9IFBhZ2luYXRpb25Nb2RlbD4ge1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmdob3N0JykgaGFzR2hvc3REYXRhID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIHNlcnZpY2U6IExpc3RTZXJ2aWNlPFQsIFA+LFxuICAgIHByb3RlY3RlZCBvcmdhbml6YXRpb25JdGVtU2VydmljZTogSXRlbVNlcnZpY2U8VD5cbiAgKSB7fVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxuICB2aWV3VHlwZTogT3JnYW5pemF0aW9uVGFibGVUeXBlID0gdGhpcy5zZXJ2aWNlLnZpZXdUeXBlO1xuXG4gIGRvbWFpblR5cGUgPSB0aGlzLnNlcnZpY2UuZG9tYWluVHlwZTtcblxuICBzb3J0Q29kZTogc3RyaW5nO1xuXG4gIGljb25UeXBlcyA9IElDT05fVFlQRTtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQga2V5IHJlcHJlc2VudHMgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgaXRlbSBmcm9tIHRoZSBkYXRhc2V0LlxuICAgKiBUaGlzIGtleSBpcyB1c2VkIHRvIGxvYWQgdGhlIGl0ZW0gZGV0YWlscyBhcyB3ZWxsIGFzIGhpZ2hsaWdodCB0aGUgaXRlbSBpblxuICAgKiBhIGxpc3Qgb2YgaXRlbXMuXG4gICAqL1xuICByZWFkb25seSBjdXJyZW50S2V5JCA9IHRoaXMub3JnYW5pemF0aW9uSXRlbVNlcnZpY2Uua2V5JDtcblxuICByZWFkb25seSBzdHJ1Y3R1cmUkOiBPYnNlcnZhYmxlPFRhYmxlU3RydWN0dXJlPiA9IHRoaXMuc2VydmljZS5nZXRTdHJ1Y3R1cmUoKTtcblxuICByZWFkb25seSBsaXN0RGF0YSQ6IE9ic2VydmFibGU8RW50aXRpZXNNb2RlbDxUPj4gPSB0aGlzLnNlcnZpY2VcbiAgICAuZ2V0RGF0YSgpXG4gICAgLnBpcGUoXG4gICAgICB0YXAoKGRhdGEpID0+IHtcbiAgICAgICAgdGhpcy5zb3J0Q29kZSA9IGRhdGEucGFnaW5hdGlvbj8uc29ydDtcbiAgICAgICAgdGhpcy5oYXNHaG9zdERhdGEgPSB0aGlzLnNlcnZpY2UuaGFzR2hvc3REYXRhKGRhdGEpO1xuICAgICAgfSlcbiAgICApO1xuXG4gIEBJbnB1dCgpIGtleSA9IHRoaXMuc2VydmljZS5rZXkoKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIGl0ZW1zLlxuICAgKi9cbiAgZ2V0TGlzdENvdW50KGRhdGFUYWJsZTogVGFibGUpOiBudW1iZXIge1xuICAgIHJldHVybiBkYXRhVGFibGUucGFnaW5hdGlvbj8udG90YWxSZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEJyb3dzZXMgdG8gdGhlIGdpdmVuIHBhZ2UgbnVtYmVyXG4gICAqL1xuICBicm93c2UocGFnaW5hdGlvbjogUCwgcGFnZU51bWJlcjogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXJ2aWNlLnZpZXcocGFnaW5hdGlvbiwgcGFnZU51bWJlcik7XG4gIH1cblxuICAvKipcbiAgICogTmF2aWdhdGVzIHRvIHRoZSBkZXRhaWxlZCB2aWV3IG9mIHRoZSBzZWxlY3RlZCBsaXN0IGl0ZW0uXG4gICAqL1xuICBsYXVuY2hJdGVtKGV2ZW50OiBUKTogdm9pZCB7XG4gICAgdGhpcy5vcmdhbml6YXRpb25JdGVtU2VydmljZS5sYXVuY2hEZXRhaWxzKGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTb3J0cyB0aGUgbGlzdC5cbiAgICovXG4gIHNvcnQocGFnaW5hdGlvbjogUCk6IHZvaWQge1xuICAgIHRoaXMuc2VydmljZS5zb3J0KHtcbiAgICAgIC4uLnBhZ2luYXRpb24sXG4gICAgICAuLi4oeyBzb3J0OiB0aGlzLnNvcnRDb2RlIH0gYXMgUGFnaW5hdGlvbk1vZGVsKSxcbiAgICB9KTtcbiAgfVxufVxuIiwiPGN4LXNwbGl0LXZpZXcgW2hpZGVNb2RlXT1cImZhbHNlXCI+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJzdHJ1Y3R1cmUkIHwgYXN5bmMgYXMgc3RydWN0dXJlXCI+XG4gICAgPGN4LXZpZXcgY2xhc3M9XCJsaXN0XCIgKm5nSWY9XCJsaXN0RGF0YSQgfCBhc3luYyBhcyBkYXRhXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPlxuICAgICAgICAgIDxoMz5cbiAgICAgICAgICAgIHt7XG4gICAgICAgICAgICAgIHZpZXdUeXBlICsgJy5oZWFkZXInIHwgY3hUcmFuc2xhdGU6IHsgY291bnQ6IGdldExpc3RDb3VudChkYXRhKSB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBbY3hQb3BvdmVyXT1cImxpc3RIaW50XCJcbiAgICAgICAgICAgICAgW2N4UG9wb3Zlck9wdGlvbnNdPVwie1xuICAgICAgICAgICAgICAgIHBsYWNlbWVudDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAnaGludC1wb3BvdmVyJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUb0JvZHk6IHRydWUsXG4gICAgICAgICAgICAgICAgZGlzcGxheUNsb3NlQnV0dG9uOiB0cnVlXG4gICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8Y3gtaWNvbiBbdHlwZV09XCJpY29uVHlwZXMuSU5GT1wiPiA8L2N4LWljb24+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2gzPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiZGF0YS5wYWdpbmF0aW9uPy5zb3J0XCI+e3tcbiAgICAgICAgICAgICAgc3RydWN0dXJlLnR5cGUgKyAnLnNvcnRCeScgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgICAgfX08L3NwYW4+XG4gICAgICAgICAgICA8bmctc2VsZWN0XG4gICAgICAgICAgICAgIG5hbWU9XCJzb3J0XCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJzb3J0XCJcbiAgICAgICAgICAgICAgKm5nSWY9XCJkYXRhLnBhZ2luYXRpb24/LnNvcnRcIlxuICAgICAgICAgICAgICBbc2VhcmNoYWJsZV09XCJmYWxzZVwiXG4gICAgICAgICAgICAgIFtjbGVhcmFibGVdPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAoY2hhbmdlKT1cInNvcnQoZGF0YS5wYWdpbmF0aW9uKVwiXG4gICAgICAgICAgICAgIFt0YWJJbmRleF09XCIwXCJcbiAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJzb3J0Q29kZVwiXG4gICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiXG4gICAgICAgICAgICAgICAgKHNvcnRDb2RlXG4gICAgICAgICAgICAgICAgICA/IHN0cnVjdHVyZS50eXBlICsgJy5zb3J0LicgKyBzb3J0Q29kZVxuICAgICAgICAgICAgICAgICAgOiBzdHJ1Y3R1cmUudHlwZSArICcuc29ydEJ5J1xuICAgICAgICAgICAgICAgICkgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8bmctb3B0aW9uICpuZ0Zvcj1cImxldCBzb3J0IG9mIGRhdGEuc29ydHNcIiBbdmFsdWVdPVwic29ydC5jb2RlXCI+XG4gICAgICAgICAgICAgICAge3sgc3RydWN0dXJlLnR5cGUgKyAnLnNvcnQuJyArIHNvcnQuY29kZSB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgICAgIDwvbmctb3B0aW9uPlxuICAgICAgICAgICAgPC9uZy1zZWxlY3Q+XG4gICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIlthY3Rpb25zXVwiPjwvbmctY29udGVudD5cblxuICAgICAgICAgIDxhXG4gICAgICAgICAgICBjbGFzcz1cImJ1dHRvbiBwcmltYXJ5IGNyZWF0ZVwiXG4gICAgICAgICAgICBbcm91dGVyTGlua109XCJ7IGN4Um91dGU6IHN0cnVjdHVyZS50eXBlICsgJ0NyZWF0ZScgfSB8IGN4VXJsXCJcbiAgICAgICAgICAgIHJvdXRlckxpbmtBY3RpdmU9XCJkaXNhYmxlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge3sgJ29yZ2FuaXphdGlvbi5hZGQnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxjeC10YWJsZVxuICAgICAgICAqbmdJZj1cImRhdGEudmFsdWVzPy5sZW5ndGggPiAwOyBlbHNlIGVtcHR5TGlzdFwiXG4gICAgICAgIFtzdHJ1Y3R1cmVdPVwic3RydWN0dXJlXCJcbiAgICAgICAgW2RhdGFdPVwiZGF0YS52YWx1ZXNcIlxuICAgICAgICBbaTE4blJvb3RdPVwiZG9tYWluVHlwZVwiXG4gICAgICAgIFtjdXJyZW50SXRlbV09XCJ7IHByb3BlcnR5OiBrZXksIHZhbHVlOiBjdXJyZW50S2V5JCB8IGFzeW5jIH1cIlxuICAgICAgICAobGF1bmNoKT1cImxhdW5jaEl0ZW0oJGV2ZW50KVwiXG4gICAgICAgIFtjeEZvY3VzXT1cInsgdHJhcDogJ2JvdGgnIH1cIlxuICAgICAgPlxuICAgICAgPC9jeC10YWJsZT5cblxuICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICA8Y3gtcGFnaW5hdGlvblxuICAgICAgICAgIFtwYWdpbmF0aW9uXT1cImRhdGEucGFnaW5hdGlvblwiXG4gICAgICAgICAgKHZpZXdQYWdlRXZlbnQpPVwiYnJvd3NlKGRhdGEucGFnaW5hdGlvbiwgJGV2ZW50KVwiXG4gICAgICAgID48L2N4LXBhZ2luYXRpb24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2N4LXZpZXc+XG5cbiAgICA8IS0tIG5lc3RlZCBzcGxpdCB2aWV3cyBhcmUgcmVuZGVyZWQgaW5zaWRlIGNoaWxkIHJvdXRlcyAtLT5cbiAgICA8cm91dGVyLW91dGxldD48L3JvdXRlci1vdXRsZXQ+XG4gIDwvbmctY29udGFpbmVyPlxuPC9jeC1zcGxpdC12aWV3PlxuXG48bmctdGVtcGxhdGUgI2VtcHR5TGlzdD5cbiAgPHAgY2xhc3M9XCJpbnN0cnVjdGlvbiBpcy1lbXB0eVwiPlxuICAgIHt7ICdvcmdhbml6YXRpb24ubWVzc2FnZXMuZW1wdHlMaXN0JyB8IGN4VHJhbnNsYXRlIH19XG4gIDwvcD5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjbGlzdEhpbnQ+XG4gIDxwPlxuICAgIHt7IHZpZXdUeXBlICsgJy5oaW50JyB8IGN4VHJhbnNsYXRlIH19XG4gIDwvcD5cbjwvbmctdGVtcGxhdGU+XG4iXX0=