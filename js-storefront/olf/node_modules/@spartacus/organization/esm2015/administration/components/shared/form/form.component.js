import { ChangeDetectionStrategy, Component, Input, } from '@angular/core';
import { LoadStatus } from '@spartacus/organization/administration/core';
import { first, map, switchMap, take } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../item.service";
import * as i2 from "../message/services/message.service";
import * as i3 from "../card/card.component";
import * as i4 from "@angular/common";
import * as i5 from "@angular/forms";
import * as i6 from "../item-active.directive";
import * as i7 from "@spartacus/storefront";
import * as i8 from "@angular/router";
import * as i9 from "@spartacus/core";
const DISABLED_STATUS = 'DISABLED';
/**
 * Reusable component for creating and editing organization items. The component does not
 * know anything about form specific.
 */
export class FormComponent {
    constructor(itemService, messageService) {
        this.itemService = itemService;
        this.messageService = messageService;
        this.animateBack = true;
        this.form$ = this.itemService.current$.pipe(map((item) => {
            this.setI18nRoot(item);
            if (!item) {
                // we trick the form builder...
                item = {};
            }
            return this.itemService.getForm(item);
        }));
        /**
         * To handle the case of receiving a negative response during creation an item
         */
        this.disabled$ = this.form$.pipe(switchMap((form) => form.statusChanges), map((status) => status === DISABLED_STATUS));
    }
    save(form) {
        this.itemService.key$
            .pipe(first(), switchMap((key) => this.itemService.save(form, key).pipe(take(1), map((data) => ({
            item: data.item,
            status: data.status,
            action: key ? 'update' : 'create',
        })))))
            .subscribe(({ item, action, status }) => {
            if (status === LoadStatus.SUCCESS) {
                this.itemService.launchDetails(item);
                this.notify(item, action);
            }
            form.enable();
        });
    }
    notify(item, action) {
        this.messageService.add({
            message: {
                key: `${this.i18nRoot}.messages.${action}`,
                params: {
                    item,
                },
            },
        });
    }
    setI18nRoot(item) {
        // concatenate the i18n root with .edit or .create suffix
        this.i18n = this.i18nRoot + (item ? '.edit' : '.create');
    }
    back(event, card) {
        if (this.animateBack) {
            card.closeView(event);
        }
    }
    ngOnInit() {
        this.itemService.setEditMode(true);
    }
    ngOnDestroy() {
        this.itemService.setEditMode(false);
    }
}
FormComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: FormComponent, deps: [{ token: i1.ItemService }, { token: i2.MessageService }], target: i0.ɵɵFactoryTarget.Component });
FormComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.0.5", type: FormComponent, selector: "cx-org-form", inputs: { i18nRoot: "i18nRoot", animateBack: "animateBack", subtitle: "subtitle" }, host: { classAttribute: "content-wrapper" }, ngImport: i0, template: "<form *ngIf=\"form$ | async as form\" (submit)=\"save(form)\">\n  <cx-org-card\n    #card\n    [previous]=\"false\"\n    [i18nRoot]=\"i18n\"\n    cxOrgItemActive\n    [subtitle]=\"subtitle\"\n    [cxFocus]=\"{ autofocus: 'input', refreshFocus: form }\"\n  >\n    <button\n      actions\n      class=\"button primary\"\n      [disabled]=\"form.disabled || (disabled$ | async)\"\n    >\n      {{ 'organization.save' | cxTranslate }}\n    </button>\n    <button actions class=\"link\" routerLink=\"../\" type=\"button\">\n      <!--\n        We leverage the soft-close feature from the split view, so that the animation\n        has time to kick in before the router outlet is deleted.\n       -->\n      <span (click)=\"back($event, card)\">{{\n        'organization.cancel' | cxTranslate\n      }}</span>\n    </button>\n\n    <section main class=\"details\">\n      <ng-content select=\"[main]\" ngProjectAs=\"[main]\"></ng-content>\n    </section>\n  </cx-org-card>\n</form>\n", components: [{ type: i3.CardComponent, selector: "cx-org-card", inputs: ["i18nRoot", "previous", "subtitle", "showHint"] }], directives: [{ type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i5.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i5.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i5.NgForm, selector: "form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]", inputs: ["ngFormOptions"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i6.ItemActiveDirective, selector: "[cxOrgItemActive]" }, { type: i7.FocusDirective, selector: "[cxFocus]", inputs: ["cxFocus"] }, { type: i8.RouterLink, selector: ":not(a):not(area)[routerLink]", inputs: ["routerLink", "queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo"] }], pipes: { "async": i4.AsyncPipe, "cxTranslate": i9.TranslatePipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: FormComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'cx-org-form',
                    templateUrl: './form.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    host: { class: 'content-wrapper' },
                }]
        }], ctorParameters: function () { return [{ type: i1.ItemService }, { type: i2.MessageService }]; }, propDecorators: { i18nRoot: [{
                type: Input
            }], animateBack: [{
                type: Input
            }], subtitle: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvbXBvbmVudHMvc2hhcmVkL2Zvcm0vZm9ybS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvbXBvbmVudHMvc2hhcmVkL2Zvcm0vZm9ybS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxLQUFLLEdBR04sTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDZDQUE2QyxDQUFDO0FBRXpFLE9BQU8sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7Ozs7QUFLN0QsTUFBTSxlQUFlLEdBQUcsVUFBVSxDQUFDO0FBRW5DOzs7R0FHRztBQU9ILE1BQU0sT0FBTyxhQUFhO0lBbUN4QixZQUNZLFdBQTJCLEVBQzNCLGNBQThCO1FBRDlCLGdCQUFXLEdBQVgsV0FBVyxDQUFnQjtRQUMzQixtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUE5QmpDLGdCQUFXLEdBQUcsSUFBSSxDQUFDO1FBUTVCLFVBQUssR0FBMEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUMzRCxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNYLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFdkIsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDVCwrQkFBK0I7Z0JBQy9CLElBQUksR0FBRyxFQUFTLENBQUM7YUFDbEI7WUFDRCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMs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LCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTG9hZFN0YXR1cyB9IGZyb20gJ0BzcGFydGFjdXMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlyc3QsIG1hcCwgc3dpdGNoTWFwLCB0YWtlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQ2FyZENvbXBvbmVudCB9IGZyb20gJy4uL2NhcmQvY2FyZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgSXRlbVNlcnZpY2UgfSBmcm9tICcuLi9pdGVtLnNlcnZpY2UnO1xuaW1wb3J0IHsgTWVzc2FnZVNlcnZpY2UgfSBmcm9tICcuLi9tZXNzYWdlL3NlcnZpY2VzL21lc3NhZ2Uuc2VydmljZSc7XG5cbmNvbnN0IERJU0FCTEVEX1NUQVRVUyA9ICdESVNBQkxFRCc7XG5cbi8qKlxuICogUmV1c2FibGUgY29tcG9uZW50IGZvciBjcmVhdGluZyBhbmQgZWRpdGluZyBvcmdhbml6YXRpb24gaXRlbXMuIFRoZSBjb21wb25lbnQgZG9lcyBub3RcbiAqIGtub3cgYW55dGhpbmcgYWJvdXQgZm9ybSBzcGVjaWZpYy5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY3gtb3JnLWZvcm0nLFxuICB0ZW1wbGF0ZVVybDogJy4vZm9ybS5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBob3N0OiB7IGNsYXNzOiAnY29udGVudC13cmFwcGVyJyB9LFxufSlcbmV4cG9ydCBjbGFzcyBGb3JtQ29tcG9uZW50PFQ+IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICAvKipcbiAgICogaTE4biByb290IGZvciBhbGwgbG9jYWxpemF0aW9ucy4gVGhlIGkxOG4gcm9vdCBrZXkgaXMgc3VmZml4ZWQgd2l0aFxuICAgKiBlaXRoZXIgYC5lZGl0YCBvciBgLmNyZWF0ZWAsIGRlcGVuZGluZyBvbiB0aGUgdXNhZ2Ugb2YgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIEBJbnB1dCgpIGkxOG5Sb290OiBzdHJpbmc7XG5cbiAgQElucHV0KCkgYW5pbWF0ZUJhY2sgPSB0cnVlO1xuICBASW5wdXQoKSBzdWJ0aXRsZT86IHN0cmluZztcblxuICAvKipcbiAgICogaTE4biBrZXkgZm9yIHRoZSBsb2NhbGl6YXRpb25zLlxuICAgKi9cbiAgaTE4bjogc3RyaW5nO1xuXG4gIGZvcm0kOiBPYnNlcnZhYmxlPEZvcm1Hcm91cD4gPSB0aGlzLml0ZW1TZXJ2aWNlLmN1cnJlbnQkLnBpcGUoXG4gICAgbWFwKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLnNldEkxOG5Sb290KGl0ZW0pO1xuXG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgLy8gd2UgdHJpY2sgdGhlIGZvcm0gYnVpbGRlci4uLlxuICAgICAgICBpdGVtID0ge30gYXMgYW55O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaXRlbVNlcnZpY2UuZ2V0Rm9ybShpdGVtKTtcbiAgICB9KVxuICApO1xuXG4gIC8qKlxuICAgKiBUbyBoYW5kbGUgdGhlIGNhc2Ugb2YgcmVjZWl2aW5nIGEgbmVnYXRpdmUgcmVzcG9uc2UgZHVyaW5nIGNyZWF0aW9uIGFuIGl0ZW1cbiAgICovXG4gIGRpc2FibGVkJCA9IHRoaXMuZm9ybSQucGlwZShcbiAgICBzd2l0Y2hNYXAoKGZvcm0pID0+IGZvcm0uc3RhdHVzQ2hhbmdlcyksXG4gICAgbWFwKChzdGF0dXMpID0+IHN0YXR1cyA9PT0gRElTQUJMRURfU1RBVFVTKVxuICApO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBpdGVtU2VydmljZTogSXRlbVNlcnZpY2U8VD4sXG4gICAgcHJvdGVjdGVkIG1lc3NhZ2VTZXJ2aWNlOiBNZXNzYWdlU2VydmljZVxuICApIHt9XG5cbiAgc2F2ZShmb3JtOiBGb3JtR3JvdXApOiB2b2lkIHtcbiAgICB0aGlzLml0ZW1TZXJ2aWNlLmtleSRcbiAgICAgIC5waXBlKFxuICAgICAgICBmaXJzdCgpLFxuICAgICAgICBzd2l0Y2hNYXAoKGtleSkgPT5cbiAgICAgICAgICB0aGlzLml0ZW1TZXJ2aWNlLnNhdmUoZm9ybSwga2V5KS5waXBlKFxuICAgICAgICAgICAgdGFrZSgxKSxcbiAgICAgICAgICAgIG1hcCgoZGF0YSkgPT4gKHtcbiAgICAgICAgICAgICAgaXRlbTogZGF0YS5pdGVtLFxuICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgICAgICAgICBhY3Rpb246IGtleSA/ICd1cGRhdGUnIDogJ2NyZWF0ZScsXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKHsgaXRlbSwgYWN0aW9uLCBzdGF0dXMgfSkgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSBMb2FkU3RhdHVzLlNVQ0NFU1MpIHtcbiAgICAgICAgICB0aGlzLml0ZW1TZXJ2aWNlLmxhdW5jaERldGFpbHMoaXRlbSk7XG4gICAgICAgICAgdGhpcy5ub3RpZnkoaXRlbSwgYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBmb3JtLmVuYWJsZSgpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbm90aWZ5KGl0ZW06IFQsIGFjdGlvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5tZXNzYWdlU2VydmljZS5hZGQoe1xuICAgICAgbWVzc2FnZToge1xuICAgICAgICBrZXk6IGAke3RoaXMuaTE4blJvb3R9Lm1lc3NhZ2VzLiR7YWN0aW9ufWAsXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGl0ZW0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNldEkxOG5Sb290KGl0ZW06IFQpOiB2b2lkIHtcbiAgICAvLyBjb25jYXRlbmF0ZSB0aGUgaTE4biByb290IHdpdGggLmVkaXQgb3IgLmNyZWF0ZSBzdWZmaXhcbiAgICB0aGlzLmkxOG4gPSB0aGlzLmkxOG5Sb290ICsgKGl0ZW0gPyAnLmVkaXQnIDogJy5jcmVhdGUnKTtcbiAgfVxuXG4gIGJhY2soZXZlbnQ6IE1vdXNlRXZlbnQsIGNhcmQ6IENhcmRDb21wb25lbnQ8YW55Pikge1xuICAgIGlmICh0aGlzLmFuaW1hdGVCYWNrKSB7XG4gICAgICBjYXJkLmNsb3NlVmlldyhldmVudCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5pdGVtU2VydmljZS5zZXRFZGl0TW9kZSh0cnVlKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuaXRlbVNlcnZpY2Uuc2V0RWRpdE1vZGUoZmFsc2UpO1xuICB9XG59XG4iLCI8Zm9ybSAqbmdJZj1cImZvcm0kIHwgYXN5bmMgYXMgZm9ybVwiIChzdWJtaXQpPVwic2F2ZShmb3JtKVwiPlxuICA8Y3gtb3JnLWNhcmRcbiAgICAjY2FyZFxuICAgIFtwcmV2aW91c109XCJmYWxzZVwiXG4gICAgW2kxOG5Sb290XT1cImkxOG5cIlxuICAgIGN4T3JnSXRlbUFjdGl2ZVxuICAgIFtzdWJ0aXRsZV09XCJzdWJ0aXRsZVwiXG4gICAgW2N4Rm9jdXNdPVwieyBhdXRvZm9jdXM6ICdpbnB1dCcsIHJlZnJlc2hGb2N1czogZm9ybSB9XCJcbiAgPlxuICAgIDxidXR0b25cbiAgICAgIGFjdGlvbnNcbiAgICAgIGNsYXNzPVwiYnV0dG9uIHByaW1hcnlcIlxuICAgICAgW2Rpc2FibGVkXT1cImZvcm0uZGlzYWJsZWQgfHwgKGRpc2FibGVkJCB8IGFzeW5jKVwiXG4gICAgPlxuICAgICAge3sgJ29yZ2FuaXphdGlvbi5zYXZlJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBhY3Rpb25zIGNsYXNzPVwibGlua1wiIHJvdXRlckxpbms9XCIuLi9cIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICA8IS0tXG4gICAgICAgIFdlIGxldmVyYWdlIHRoZSBzb2Z0LWNsb3NlIGZlYXR1cmUgZnJvbSB0aGUgc3BsaXQgdmlldywgc28gdGhhdCB0aGUgYW5pbWF0aW9uXG4gICAgICAgIGhhcyB0aW1lIHRvIGtpY2sgaW4gYmVmb3JlIHRoZSByb3V0ZXIgb3V0bGV0IGlzIGRlbGV0ZWQuXG4gICAgICAgLS0+XG4gICAgICA8c3BhbiAoY2xpY2spPVwiYmFjaygkZXZlbnQsIGNhcmQpXCI+e3tcbiAgICAgICAgJ29yZ2FuaXphdGlvbi5jYW5jZWwnIHwgY3hUcmFuc2xhdGVcbiAgICAgIH19PC9zcGFuPlxuICAgIDwvYnV0dG9uPlxuXG4gICAgPHNlY3Rpb24gbWFpbiBjbGFzcz1cImRldGFpbHNcIj5cbiAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIlttYWluXVwiIG5nUHJvamVjdEFzPVwiW21haW5dXCI+PC9uZy1jb250ZW50PlxuICAgIDwvc2VjdGlvbj5cbiAgPC9jeC1vcmctY2FyZD5cbjwvZm9ybT5cbiJdfQ==