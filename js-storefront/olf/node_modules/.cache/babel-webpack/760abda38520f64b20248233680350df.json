{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, isDevMode, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { Config, provideDefaultConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport { HttpResponse, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nclass PersonalizationConfig {}\nPersonalizationConfig.ɵfac = function PersonalizationConfig_Factory(t) {\n  return new (t || PersonalizationConfig)();\n};\nPersonalizationConfig.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: PersonalizationConfig,\n  factory: function PersonalizationConfig_Factory(t) {\n    let r = null;\n    if (t) {\n      r = new (t || PersonalizationConfig)();\n    } else {\n      r = i0.ɵɵinject(Config);\n    }\n    return r;\n  },\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PersonalizationConfig, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root',\n      useExisting: Config\n    }]\n  }], null, null);\n})();\nconst PERSONALIZATION_FEATURE = 'personalization';\nconst defaultPersonalizationConfig = {\n  personalization: {\n    enabled: false,\n    httpHeaderName: {\n      id: 'Occ-Personalization-Id',\n      timestamp: 'Occ-Personalization-Time'\n    },\n    context: {\n      slotPosition: 'PlaceholderContentSlot',\n      componentId: 'PersonalizationScriptComponent'\n    }\n  }\n};\nconst PERSONALIZATION_ID_KEY = 'personalization-id';\nclass OccPersonalizationIdInterceptor {\n  constructor(config, occEndpoints, winRef) {\n    var _a, _b, _c, _d, _e, _f;\n    this.config = config;\n    this.occEndpoints = occEndpoints;\n    this.winRef = winRef;\n    this.enabled = false;\n    if (this.winRef.isBrowser()) {\n      this.enabled = this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled) || false;\n      if (this.enabled) {\n        if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n          console.warn(`There is no httpHeaderName configured in Personalization`);\n        }\n        this.requestHeader = (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.id.toLowerCase();\n        this.personalizationId = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_ID_KEY);\n      } else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_ID_KEY)) {\n        this.winRef.localStorage.removeItem(PERSONALIZATION_ID_KEY);\n      }\n    }\n  }\n  intercept(request, next) {\n    if (!this.enabled) {\n      return next.handle(request);\n    }\n    if (this.requestHeader && this.personalizationId && request.url.includes(this.occEndpoints.getBaseUrl())) {\n      request = request.clone({\n        setHeaders: {\n          [this.requestHeader]: this.personalizationId\n        }\n      });\n    }\n    return next.handle(request).pipe(tap(event => {\n      var _a;\n      if (event instanceof HttpResponse) {\n        if (this.requestHeader && event.headers.keys().includes(this.requestHeader)) {\n          const receivedId = event.headers.get(this.requestHeader);\n          if (this.personalizationId !== receivedId) {\n            this.personalizationId = receivedId;\n            if (this.personalizationId) {\n              (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_ID_KEY, this.personalizationId);\n            }\n          }\n        }\n      }\n    }));\n  }\n}\nOccPersonalizationIdInterceptor.ɵfac = function OccPersonalizationIdInterceptor_Factory(t) {\n  return new (t || OccPersonalizationIdInterceptor)(i0.ɵɵinject(PersonalizationConfig), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.WindowRef));\n};\nOccPersonalizationIdInterceptor.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccPersonalizationIdInterceptor,\n  factory: OccPersonalizationIdInterceptor.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccPersonalizationIdInterceptor, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: PersonalizationConfig\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.WindowRef\n    }];\n  }, null);\n})();\nconst PERSONALIZATION_TIME_KEY = 'personalization-time';\nclass OccPersonalizationTimeInterceptor {\n  constructor(config, occEndpoints, winRef) {\n    var _a, _b, _c, _d, _e, _f;\n    this.config = config;\n    this.occEndpoints = occEndpoints;\n    this.winRef = winRef;\n    this.enabled = false;\n    if (this.winRef.isBrowser()) {\n      this.enabled = this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled) || false;\n      if (this.enabled) {\n        if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n          console.warn(`There is no httpHeaderName configured in Personalization`);\n        }\n        this.requestHeader = (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.timestamp.toLowerCase();\n        this.timestamp = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_TIME_KEY);\n      } else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_TIME_KEY)) {\n        this.winRef.localStorage.removeItem(PERSONALIZATION_TIME_KEY);\n      }\n    }\n  }\n  intercept(request, next) {\n    if (!this.enabled) {\n      return next.handle(request);\n    }\n    if (this.requestHeader && this.timestamp && request.url.includes(this.occEndpoints.getBaseUrl())) {\n      request = request.clone({\n        setHeaders: {\n          [this.requestHeader]: this.timestamp\n        }\n      });\n    }\n    return next.handle(request).pipe(tap(event => {\n      var _a;\n      if (event instanceof HttpResponse) {\n        if (this.requestHeader && event.headers.keys().includes(this.requestHeader)) {\n          const receivedTimestamp = event.headers.get(this.requestHeader);\n          if (this.timestamp !== receivedTimestamp) {\n            this.timestamp = receivedTimestamp;\n            if (this.timestamp) {\n              (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_TIME_KEY, this.timestamp);\n            }\n          }\n        }\n      }\n    }));\n  }\n}\nOccPersonalizationTimeInterceptor.ɵfac = function OccPersonalizationTimeInterceptor_Factory(t) {\n  return new (t || OccPersonalizationTimeInterceptor)(i0.ɵɵinject(PersonalizationConfig), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.WindowRef));\n};\nOccPersonalizationTimeInterceptor.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccPersonalizationTimeInterceptor,\n  factory: OccPersonalizationTimeInterceptor.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccPersonalizationTimeInterceptor, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: PersonalizationConfig\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.WindowRef\n    }];\n  }, null);\n})();\nconst interceptors = [{\n  provide: HTTP_INTERCEPTORS,\n  useExisting: OccPersonalizationIdInterceptor,\n  multi: true\n}, {\n  provide: HTTP_INTERCEPTORS,\n  useExisting: OccPersonalizationTimeInterceptor,\n  multi: true\n}];\n\n// TODO: Inline this factory when we start releasing Ivy compiled libraries\nfunction defaultPersonalizationComponentsConfig() {\n  const config = {\n    featureModules: {\n      [PERSONALIZATION_FEATURE]: {\n        cmsComponents: ['PersonalizationScriptComponent']\n      }\n    }\n  };\n  return config;\n}\nclass PersonalizationRootModule {}\nPersonalizationRootModule.ɵfac = function PersonalizationRootModule_Factory(t) {\n  return new (t || PersonalizationRootModule)();\n};\nPersonalizationRootModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: PersonalizationRootModule\n});\nPersonalizationRootModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [...interceptors, provideDefaultConfig(defaultPersonalizationConfig), provideDefaultConfigFactory(defaultPersonalizationComponentsConfig)]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PersonalizationRootModule, [{\n    type: NgModule,\n    args: [{\n      providers: [...interceptors, provideDefaultConfig(defaultPersonalizationConfig), provideDefaultConfigFactory(defaultPersonalizationComponentsConfig)]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { PERSONALIZATION_FEATURE, PersonalizationConfig, PersonalizationRootModule, defaultPersonalizationComponentsConfig };","map":{"version":3,"names":["i0","Injectable","isDevMode","NgModule","i2","Config","provideDefaultConfig","provideDefaultConfigFactory","HttpResponse","HTTP_INTERCEPTORS","tap","PersonalizationConfig","ɵfac","ɵprov","type","args","providedIn","useExisting","PERSONALIZATION_FEATURE","defaultPersonalizationConfig","personalization","enabled","httpHeaderName","id","timestamp","context","slotPosition","componentId","PERSONALIZATION_ID_KEY","OccPersonalizationIdInterceptor","constructor","config","occEndpoints","winRef","_a","_b","_c","_d","_e","_f","isBrowser","localStorage","console","warn","requestHeader","toLowerCase","personalizationId","getItem","removeItem","intercept","request","next","handle","url","includes","getBaseUrl","clone","setHeaders","pipe","event","headers","keys","receivedId","get","setItem","OccEndpointsService","WindowRef","PERSONALIZATION_TIME_KEY","OccPersonalizationTimeInterceptor","receivedTimestamp","interceptors","provide","multi","defaultPersonalizationComponentsConfig","featureModules","cmsComponents","PersonalizationRootModule","ɵmod","ɵinj","providers"],"sources":["/home/hamid/learning/cx-cangubike/js-storefront/olf/node_modules/@spartacus/tracking/fesm2015/spartacus-tracking-personalization-root.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, isDevMode, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { Config, provideDefaultConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport { HttpResponse, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\n\nclass PersonalizationConfig {\n}\nPersonalizationConfig.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationConfig, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nPersonalizationConfig.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationConfig, providedIn: 'root', useExisting: Config });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationConfig, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                    useExisting: Config,\n                }]\n        }] });\n\nconst PERSONALIZATION_FEATURE = 'personalization';\n\nconst defaultPersonalizationConfig = {\n    personalization: {\n        enabled: false,\n        httpHeaderName: {\n            id: 'Occ-Personalization-Id',\n            timestamp: 'Occ-Personalization-Time',\n        },\n        context: {\n            slotPosition: 'PlaceholderContentSlot',\n            componentId: 'PersonalizationScriptComponent',\n        },\n    },\n};\n\nconst PERSONALIZATION_ID_KEY = 'personalization-id';\nclass OccPersonalizationIdInterceptor {\n    constructor(config, occEndpoints, winRef) {\n        var _a, _b, _c, _d, _e, _f;\n        this.config = config;\n        this.occEndpoints = occEndpoints;\n        this.winRef = winRef;\n        this.enabled = false;\n        if (this.winRef.isBrowser()) {\n            this.enabled =\n                (this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled)) ||\n                    false;\n            if (this.enabled) {\n                if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n                    console.warn(`There is no httpHeaderName configured in Personalization`);\n                }\n                this.requestHeader =\n                    (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.id.toLowerCase();\n                this.personalizationId = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_ID_KEY);\n            }\n            else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_ID_KEY)) {\n                this.winRef.localStorage.removeItem(PERSONALIZATION_ID_KEY);\n            }\n        }\n    }\n    intercept(request, next) {\n        if (!this.enabled) {\n            return next.handle(request);\n        }\n        if (this.requestHeader &&\n            this.personalizationId &&\n            request.url.includes(this.occEndpoints.getBaseUrl())) {\n            request = request.clone({\n                setHeaders: {\n                    [this.requestHeader]: this.personalizationId,\n                },\n            });\n        }\n        return next.handle(request).pipe(tap((event) => {\n            var _a;\n            if (event instanceof HttpResponse) {\n                if (this.requestHeader &&\n                    event.headers.keys().includes(this.requestHeader)) {\n                    const receivedId = event.headers.get(this.requestHeader);\n                    if (this.personalizationId !== receivedId) {\n                        this.personalizationId = receivedId;\n                        if (this.personalizationId) {\n                            (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_ID_KEY, this.personalizationId);\n                        }\n                    }\n                }\n            }\n        }));\n    }\n}\nOccPersonalizationIdInterceptor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationIdInterceptor, deps: [{ token: PersonalizationConfig }, { token: i2.OccEndpointsService }, { token: i2.WindowRef }], target: i0.ɵɵFactoryTarget.Injectable });\nOccPersonalizationIdInterceptor.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationIdInterceptor, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationIdInterceptor, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: PersonalizationConfig }, { type: i2.OccEndpointsService }, { type: i2.WindowRef }]; } });\n\nconst PERSONALIZATION_TIME_KEY = 'personalization-time';\nclass OccPersonalizationTimeInterceptor {\n    constructor(config, occEndpoints, winRef) {\n        var _a, _b, _c, _d, _e, _f;\n        this.config = config;\n        this.occEndpoints = occEndpoints;\n        this.winRef = winRef;\n        this.enabled = false;\n        if (this.winRef.isBrowser()) {\n            this.enabled =\n                (this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled)) ||\n                    false;\n            if (this.enabled) {\n                if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n                    console.warn(`There is no httpHeaderName configured in Personalization`);\n                }\n                this.requestHeader =\n                    (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.timestamp.toLowerCase();\n                this.timestamp = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_TIME_KEY);\n            }\n            else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_TIME_KEY)) {\n                this.winRef.localStorage.removeItem(PERSONALIZATION_TIME_KEY);\n            }\n        }\n    }\n    intercept(request, next) {\n        if (!this.enabled) {\n            return next.handle(request);\n        }\n        if (this.requestHeader &&\n            this.timestamp &&\n            request.url.includes(this.occEndpoints.getBaseUrl())) {\n            request = request.clone({\n                setHeaders: {\n                    [this.requestHeader]: this.timestamp,\n                },\n            });\n        }\n        return next.handle(request).pipe(tap((event) => {\n            var _a;\n            if (event instanceof HttpResponse) {\n                if (this.requestHeader &&\n                    event.headers.keys().includes(this.requestHeader)) {\n                    const receivedTimestamp = event.headers.get(this.requestHeader);\n                    if (this.timestamp !== receivedTimestamp) {\n                        this.timestamp = receivedTimestamp;\n                        if (this.timestamp) {\n                            (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_TIME_KEY, this.timestamp);\n                        }\n                    }\n                }\n            }\n        }));\n    }\n}\nOccPersonalizationTimeInterceptor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationTimeInterceptor, deps: [{ token: PersonalizationConfig }, { token: i2.OccEndpointsService }, { token: i2.WindowRef }], target: i0.ɵɵFactoryTarget.Injectable });\nOccPersonalizationTimeInterceptor.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationTimeInterceptor, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationTimeInterceptor, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: PersonalizationConfig }, { type: i2.OccEndpointsService }, { type: i2.WindowRef }]; } });\n\nconst interceptors = [\n    {\n        provide: HTTP_INTERCEPTORS,\n        useExisting: OccPersonalizationIdInterceptor,\n        multi: true,\n    },\n    {\n        provide: HTTP_INTERCEPTORS,\n        useExisting: OccPersonalizationTimeInterceptor,\n        multi: true,\n    },\n];\n\n// TODO: Inline this factory when we start releasing Ivy compiled libraries\nfunction defaultPersonalizationComponentsConfig() {\n    const config = {\n        featureModules: {\n            [PERSONALIZATION_FEATURE]: {\n                cmsComponents: ['PersonalizationScriptComponent'],\n            },\n        },\n    };\n    return config;\n}\nclass PersonalizationRootModule {\n}\nPersonalizationRootModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nPersonalizationRootModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule });\nPersonalizationRootModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule, providers: [\n        ...interceptors,\n        provideDefaultConfig(defaultPersonalizationConfig),\n        provideDefaultConfigFactory(defaultPersonalizationComponentsConfig),\n    ] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [\n                        ...interceptors,\n                        provideDefaultConfig(defaultPersonalizationConfig),\n                        provideDefaultConfigFactory(defaultPersonalizationComponentsConfig),\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { PERSONALIZATION_FEATURE, PersonalizationConfig, PersonalizationRootModule, defaultPersonalizationComponentsConfig };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}