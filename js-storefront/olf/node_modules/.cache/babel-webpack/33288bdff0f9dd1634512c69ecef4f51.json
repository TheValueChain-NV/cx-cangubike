{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, Input, NgModule, Injectable } from '@angular/core';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i2$1 from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport * as i1 from '@spartacus/core';\nimport { VariantQualifier, UrlModule, I18nModule, VariantType, isNotNullable, provideDefaultConfig } from '@spartacus/core';\nimport { filter, take, distinctUntilChanged, tap, switchMap, map } from 'rxjs/operators';\nimport * as i1$1 from '@spartacus/storefront';\nimport { of } from 'rxjs';\nfunction ProductVariantColorSelectorComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const v_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"value\", v_r1.code);\n    i0.ɵɵproperty(\"selected\", v_r1.code === (ctx_r0.product == null ? null : ctx_r0.product.code));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getVariantOptionValue(v_r1.variantOptionQualifiers), \" \");\n  }\n}\nfunction ProductVariantSizeSelectorComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const v_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"value\", v_r1.code);\n    i0.ɵɵproperty(\"selected\", v_r1.code === (ctx_r0.product == null ? null : ctx_r0.product.code));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getVariantOptionValue(v_r1.variantOptionQualifiers), \" \");\n  }\n}\nfunction ProductVariantStyleSelectorComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"cxTranslate\");\n    i0.ɵɵelementStart(3, \"span\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 2, \"productVariants.style\"), \": \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.getVariantOptionValue(ctx_r0.variants == null ? null : ctx_r0.variants.selected.variantOptionQualifiers));\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"selected-variant\": a0\n  };\n};\nfunction ProductVariantStyleSelectorComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 6);\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductVariantStyleSelectorComponent_li_4_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const v_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.changeStyle(v_r2.code);\n    });\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const v_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, v_r2.code === (ctx_r1.variants == null ? null : ctx_r1.variants.selected == null ? null : ctx_r1.variants.selected.code)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.getVariantThumbnailUrl(v_r2.variantOptionQualifiers), i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r1.getVariantOptionValue(v_r2.variantOptionQualifiers));\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r1.getVariantOptionValue(v_r2.variantOptionQualifiers));\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_style_selector_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-product-variant-style-selector\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"variants\", ctx_r3.variants[ctx_r3.variantType.STYLE]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_size_selector_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-product-variant-size-selector\", 6);\n  }\n  if (rf & 2) {\n    const product_r1 = i0.ɵɵnextContext(2).ngIf;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"product\", product_r1)(\"variants\", ctx_r4.variants[ctx_r4.variantType.SIZE]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_color_selector_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-product-variant-color-selector\", 6);\n  }\n  if (rf & 2) {\n    const product_r1 = i0.ɵɵnextContext(2).ngIf;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"product\", product_r1)(\"variants\", ctx_r5.variants[ctx_r5.variantType.COLOR]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_style_selector_1_Template, 1, 1, \"cx-product-variant-style-selector\", 3);\n    i0.ɵɵtemplate(2, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_size_selector_2_Template, 1, 2, \"cx-product-variant-size-selector\", 4);\n    i0.ɵɵtemplate(3, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_color_selector_3_Template, 1, 2, \"cx-product-variant-color-selector\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.variants[ctx_r2.variantType.STYLE]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.variants[ctx_r2.variantType.SIZE]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.variants[ctx_r2.variantType.COLOR]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ProductVariantsContainerComponent_ng_container_0_div_1_Template, 4, 3, \"div\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r1.baseOptions == null ? null : product_r1.baseOptions.length);\n  }\n}\nclass ProductVariantColorSelectorComponent {\n  constructor(routingService) {\n    this.routingService = routingService;\n  }\n  changeColor(code, name) {\n    if (code) {\n      this.routingService.go({\n        cxRoute: 'product',\n        params: {\n          code,\n          name\n        }\n      });\n    }\n    return null;\n  }\n  getVariantOptionValue(qualifiers) {\n    const obj = qualifiers.find(q => q.qualifier === VariantQualifier.COLOR);\n    return obj ? obj.value : '';\n  }\n}\nProductVariantColorSelectorComponent.ɵfac = function ProductVariantColorSelectorComponent_Factory(t) {\n  return new (t || ProductVariantColorSelectorComponent)(i0.ɵɵdirectiveInject(i1.RoutingService));\n};\nProductVariantColorSelectorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ProductVariantColorSelectorComponent,\n  selectors: [[\"cx-product-variant-color-selector\"]],\n  inputs: {\n    product: \"product\",\n    variants: \"variants\"\n  },\n  decls: 7,\n  vars: 4,\n  consts: [[1, \"variant-selector\"], [1, \"variant-name\"], [1, \"form-control\", \"variant-select\", 3, \"change\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"selected\"]],\n  template: function ProductVariantColorSelectorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementContainerStart(0);\n      i0.ɵɵelementStart(1, \"div\", 0);\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3);\n      i0.ɵɵpipe(4, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"select\", 2);\n      i0.ɵɵlistener(\"change\", function ProductVariantColorSelectorComponent_Template_select_change_5_listener($event) {\n        return ctx.changeColor($event.target.value, ctx.product == null ? null : ctx.product.name);\n      });\n      i0.ɵɵtemplate(6, ProductVariantColorSelectorComponent_option_6_Template, 2, 3, \"option\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementContainerEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(4, 2, \"productVariants.color\"), \":\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.variants == null ? null : ctx.variants.options);\n    }\n  },\n  directives: [i2.NgForOf],\n  pipes: [i1.TranslatePipe],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantColorSelectorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-product-variant-color-selector',\n      templateUrl: './product-variant-color-selector.component.html',\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [{\n      type: i1.RoutingService\n    }];\n  }, {\n    product: [{\n      type: Input\n    }],\n    variants: [{\n      type: Input\n    }]\n  });\n})();\nclass ProductVariantColorSelectorModule {}\nProductVariantColorSelectorModule.ɵfac = function ProductVariantColorSelectorModule_Factory(t) {\n  return new (t || ProductVariantColorSelectorModule)();\n};\nProductVariantColorSelectorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: ProductVariantColorSelectorModule\n});\nProductVariantColorSelectorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, RouterModule, UrlModule, I18nModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantColorSelectorModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n      declarations: [ProductVariantColorSelectorComponent],\n      exports: [ProductVariantColorSelectorComponent]\n    }]\n  }], null, null);\n})();\nclass ProductVariantSizeSelectorComponent {\n  constructor(productService, routingService) {\n    this.productService = productService;\n    this.routingService = routingService;\n  }\n  changeSize(code) {\n    if (code) {\n      this.productService.get(code, \"list\" /* LIST */).pipe(\n      // below call might looks redundant but in fact this data is going to be loaded anyways\n      // we're just calling it earlier and storing\n      filter(p => !!p), take(1)).subscribe(product => {\n        this.routingService.go({\n          cxRoute: 'product',\n          params: product\n        });\n      });\n    }\n    return null;\n  }\n  getVariantOptionValue(qualifiers) {\n    const obj = qualifiers.find(q => q.qualifier === VariantQualifier.SIZE);\n    return obj ? obj.value : '';\n  }\n}\nProductVariantSizeSelectorComponent.ɵfac = function ProductVariantSizeSelectorComponent_Factory(t) {\n  return new (t || ProductVariantSizeSelectorComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i1.RoutingService));\n};\nProductVariantSizeSelectorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ProductVariantSizeSelectorComponent,\n  selectors: [[\"cx-product-variant-size-selector\"]],\n  inputs: {\n    product: \"product\",\n    variants: \"variants\"\n  },\n  decls: 11,\n  vars: 10,\n  consts: [[1, \"variant-selector\"], [1, \"variant-name\"], [1, \"form-control\", \"variant-select\", 3, \"change\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"#\", 1, \"size-guide\", 3, \"title\"], [3, \"value\", \"selected\"]],\n  template: function ProductVariantSizeSelectorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementContainerStart(0);\n      i0.ɵɵelementStart(1, \"div\", 0);\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3);\n      i0.ɵɵpipe(4, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"select\", 2);\n      i0.ɵɵlistener(\"change\", function ProductVariantSizeSelectorComponent_Template_select_change_5_listener($event) {\n        return ctx.changeSize($event.target.value);\n      });\n      i0.ɵɵtemplate(6, ProductVariantSizeSelectorComponent_option_6_Template, 2, 3, \"option\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"a\", 4);\n      i0.ɵɵpipe(8, \"cxTranslate\");\n      i0.ɵɵtext(9);\n      i0.ɵɵpipe(10, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementContainerEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(4, 4, \"productVariants.size\"), \":\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.variants == null ? null : ctx.variants.options);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"title\", i0.ɵɵpipeBind1(8, 6, \"productVariants.sizeGuideLabel\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 8, \"productVariants.sizeGuideLabel\"), \" \");\n    }\n  },\n  directives: [i2.NgForOf],\n  pipes: [i1.TranslatePipe],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantSizeSelectorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-product-variant-size-selector',\n      templateUrl: './product-variant-size-selector.component.html',\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [{\n      type: i1.ProductService\n    }, {\n      type: i1.RoutingService\n    }];\n  }, {\n    product: [{\n      type: Input\n    }],\n    variants: [{\n      type: Input\n    }]\n  });\n})();\nclass ProductVariantSizeSelectorModule {}\nProductVariantSizeSelectorModule.ɵfac = function ProductVariantSizeSelectorModule_Factory(t) {\n  return new (t || ProductVariantSizeSelectorModule)();\n};\nProductVariantSizeSelectorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: ProductVariantSizeSelectorModule\n});\nProductVariantSizeSelectorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, RouterModule, UrlModule, I18nModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantSizeSelectorModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n      declarations: [ProductVariantSizeSelectorComponent],\n      exports: [ProductVariantSizeSelectorComponent]\n    }]\n  }], null, null);\n})();\nclass ProductVariantStyleSelectorComponent {\n  constructor(config, productService, routingService) {\n    this.config = config;\n    this.productService = productService;\n    this.routingService = routingService;\n    this.variantQualifier = VariantQualifier;\n  }\n  getVariantOptionValue(qualifiers) {\n    const obj = qualifiers.find(q => q.qualifier === VariantQualifier.STYLE);\n    return obj ? obj.value : '';\n  }\n  getVariantThumbnailUrl(variantOptionQualifiers) {\n    var _a, _b, _c, _d;\n    const qualifier = variantOptionQualifiers.find(item => item.image);\n    return qualifier ? `${(_c = (_b = (_a = this.config) === null || _a === void 0 ? void 0 : _a.backend) === null || _b === void 0 ? void 0 : _b.occ) === null || _c === void 0 ? void 0 : _c.baseUrl}${(_d = qualifier.image) === null || _d === void 0 ? void 0 : _d.url}` : '';\n  }\n  changeStyle(code) {\n    if (code) {\n      this.productService.get(code, \"list\" /* LIST */).pipe(\n      // below call might looks redundant but in fact this data is going to be loaded anyways\n      // we're just calling it earlier and storing\n      filter(p => !!p), take(1)).subscribe(product => {\n        this.routingService.go({\n          cxRoute: 'product',\n          params: product\n        });\n      });\n    }\n    return null;\n  }\n}\nProductVariantStyleSelectorComponent.ɵfac = function ProductVariantStyleSelectorComponent_Factory(t) {\n  return new (t || ProductVariantStyleSelectorComponent)(i0.ɵɵdirectiveInject(i1.OccConfig), i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i1.RoutingService));\n};\nProductVariantStyleSelectorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ProductVariantStyleSelectorComponent,\n  selectors: [[\"cx-product-variant-style-selector\"]],\n  inputs: {\n    variants: \"variants\"\n  },\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"variant-selector\"], [\"class\", \"variant-name\", 4, \"ngIf\"], [1, \"variant-list\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"variant-name\"], [1, \"style-name\"], [3, \"ngClass\"], [1, \"variant-button\", 3, \"click\"], [3, \"src\", \"title\", \"alt\"]],\n  template: function ProductVariantStyleSelectorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementContainerStart(0);\n      i0.ɵɵelementStart(1, \"div\", 0);\n      i0.ɵɵtemplate(2, ProductVariantStyleSelectorComponent_div_2_Template, 5, 4, \"div\", 1);\n      i0.ɵɵelementStart(3, \"ul\", 2);\n      i0.ɵɵtemplate(4, ProductVariantStyleSelectorComponent_li_4_Template, 3, 6, \"li\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementContainerEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.variants.selected);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.variants == null ? null : ctx.variants.options);\n    }\n  },\n  directives: [i2.NgIf, i2.NgForOf, i2.NgClass],\n  pipes: [i1.TranslatePipe],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantStyleSelectorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-product-variant-style-selector',\n      templateUrl: './product-variant-style-selector.component.html',\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [{\n      type: i1.OccConfig\n    }, {\n      type: i1.ProductService\n    }, {\n      type: i1.RoutingService\n    }];\n  }, {\n    variants: [{\n      type: Input\n    }]\n  });\n})();\nclass ProductVariantStyleSelectorModule {}\nProductVariantStyleSelectorModule.ɵfac = function ProductVariantStyleSelectorModule_Factory(t) {\n  return new (t || ProductVariantStyleSelectorModule)();\n};\nProductVariantStyleSelectorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: ProductVariantStyleSelectorModule\n});\nProductVariantStyleSelectorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, RouterModule, UrlModule, I18nModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantStyleSelectorModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n      declarations: [ProductVariantStyleSelectorComponent],\n      exports: [ProductVariantStyleSelectorComponent]\n    }]\n  }], null, null);\n})();\nclass ProductVariantsContainerComponent {\n  constructor(currentProductService) {\n    this.currentProductService = currentProductService;\n    this.variants = {};\n    this.variantType = VariantType;\n  }\n  ngOnInit() {\n    this.product$ = this.currentProductService.getProduct().pipe(filter(isNotNullable), filter(product => !!product.baseOptions), distinctUntilChanged(), tap(product => {\n      product.baseOptions.forEach(option => {\n        if (option === null || option === void 0 ? void 0 : option.variantType) {\n          this.variants[option.variantType] = option;\n        }\n      });\n    }));\n  }\n}\nProductVariantsContainerComponent.ɵfac = function ProductVariantsContainerComponent_Factory(t) {\n  return new (t || ProductVariantsContainerComponent)(i0.ɵɵdirectiveInject(i1$1.CurrentProductService));\n};\nProductVariantsContainerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ProductVariantsContainerComponent,\n  selectors: [[\"cx-product-variants-container\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [\"class\", \"variant-section\", 4, \"ngIf\"], [1, \"variant-section\"], [3, \"variants\", 4, \"ngIf\"], [3, \"product\", \"variants\", 4, \"ngIf\"], [3, \"variants\"], [3, \"product\", \"variants\"]],\n  template: function ProductVariantsContainerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductVariantsContainerComponent_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.product$));\n    }\n  },\n  directives: [i2.NgIf, ProductVariantStyleSelectorComponent, ProductVariantSizeSelectorComponent, ProductVariantColorSelectorComponent],\n  pipes: [i2.AsyncPipe],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantsContainerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-product-variants-container',\n      templateUrl: './product-variants-container.component.html',\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [{\n      type: i1$1.CurrentProductService\n    }];\n  }, null);\n})();\nclass ProductVariantsContainerModule {}\nProductVariantsContainerModule.ɵfac = function ProductVariantsContainerModule_Factory(t) {\n  return new (t || ProductVariantsContainerModule)();\n};\nProductVariantsContainerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: ProductVariantsContainerModule\n});\nProductVariantsContainerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, RouterModule, UrlModule, I18nModule, ProductVariantStyleSelectorModule, ProductVariantSizeSelectorModule, ProductVariantColorSelectorModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantsContainerModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, RouterModule, UrlModule, I18nModule, ProductVariantStyleSelectorModule, ProductVariantSizeSelectorModule, ProductVariantColorSelectorModule],\n      declarations: [ProductVariantsContainerComponent]\n    }]\n  }], null, null);\n})();\n\n/**\n * Guard that will redirect to purchasable variant of product, if the navigation\n * is for the non-purchasable one\n */\nclass ProductVariantsGuard {\n  constructor(productService, semanticPathService, router) {\n    this.productService = productService;\n    this.semanticPathService = semanticPathService;\n    this.router = router;\n  }\n  canActivate(activatedRoute) {\n    var _a;\n    const productCode = (_a = activatedRoute.params) === null || _a === void 0 ? void 0 : _a.productCode;\n    if (!productCode) {\n      return of(true);\n    }\n    return this.productService.get(productCode, \"variants\" /* VARIANTS */).pipe(filter(p => !!p), switchMap(product => {\n      if (!product.purchasable) {\n        const purchasableCode = this.findPurchasableProductCode(product);\n        if (purchasableCode) {\n          return this.productService.get(purchasableCode, \"list\" /* LIST */).pipe(filter(p => !!p), take(1), map(_product => {\n            return this.router.createUrlTree(this.semanticPathService.transform({\n              cxRoute: 'product',\n              params: _product\n            }));\n          }));\n        }\n      }\n      return of(true);\n    }));\n  }\n  /**\n   * Finds a purchasable product code looking at variant options, if any\n   *\n   * @param product\n   */\n  findPurchasableProductCode(product) {\n    var _a, _b, _c;\n    if ((_a = product.variantOptions) === null || _a === void 0 ? void 0 : _a.length) {\n      const results = product.variantOptions.filter(variant => {\n        return variant.stock && variant.stock.stockLevel ? variant : false;\n      });\n      return results && results.length ? (_b = results[0]) === null || _b === void 0 ? void 0 : _b.code : (_c = product.variantOptions[0]) === null || _c === void 0 ? void 0 : _c.code;\n    }\n    return undefined;\n  }\n}\nProductVariantsGuard.ɵfac = function ProductVariantsGuard_Factory(t) {\n  return new (t || ProductVariantsGuard)(i0.ɵɵinject(i1.ProductService), i0.ɵɵinject(i1.SemanticPathService), i0.ɵɵinject(i2$1.Router));\n};\nProductVariantsGuard.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ProductVariantsGuard,\n  factory: ProductVariantsGuard.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantsGuard, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: i1.ProductService\n    }, {\n      type: i1.SemanticPathService\n    }, {\n      type: i2$1.Router\n    }];\n  }, null);\n})();\nclass ProductVariantsComponentsModule {}\nProductVariantsComponentsModule.ɵfac = function ProductVariantsComponentsModule_Factory(t) {\n  return new (t || ProductVariantsComponentsModule)();\n};\nProductVariantsComponentsModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: ProductVariantsComponentsModule\n});\nProductVariantsComponentsModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [provideDefaultConfig({\n    cmsComponents: {\n      ProductVariantSelectorComponent: {\n        component: ProductVariantsContainerComponent,\n        guards: [ProductVariantsGuard]\n      }\n    }\n  })],\n  imports: [[ProductVariantsContainerModule, ProductVariantColorSelectorModule, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ProductVariantsComponentsModule, [{\n    type: NgModule,\n    args: [{\n      imports: [ProductVariantsContainerModule, ProductVariantColorSelectorModule, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorModule],\n      providers: [provideDefaultConfig({\n        cmsComponents: {\n          ProductVariantSelectorComponent: {\n            component: ProductVariantsContainerComponent,\n            guards: [ProductVariantsGuard]\n          }\n        }\n      })]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ProductVariantColorSelectorComponent, ProductVariantColorSelectorModule, ProductVariantSizeSelectorComponent, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorComponent, ProductVariantStyleSelectorModule, ProductVariantsComponentsModule, ProductVariantsContainerComponent, ProductVariantsContainerModule, ProductVariantsGuard };","map":{"version":3,"names":["i0","Component","ChangeDetectionStrategy","Input","NgModule","Injectable","i2","CommonModule","i2$1","RouterModule","i1","VariantQualifier","UrlModule","I18nModule","VariantType","isNotNullable","provideDefaultConfig","filter","take","distinctUntilChanged","tap","switchMap","map","i1$1","of","ProductVariantColorSelectorComponent","constructor","routingService","changeColor","code","name","go","cxRoute","params","getVariantOptionValue","qualifiers","obj","find","q","qualifier","COLOR","value","ɵfac","RoutingService","ɵcmp","NgForOf","TranslatePipe","type","args","selector","templateUrl","changeDetection","OnPush","product","variants","ProductVariantColorSelectorModule","ɵmod","ɵinj","imports","declarations","exports","ProductVariantSizeSelectorComponent","productService","changeSize","get","pipe","p","subscribe","SIZE","ProductService","ProductVariantSizeSelectorModule","ProductVariantStyleSelectorComponent","config","variantQualifier","STYLE","getVariantThumbnailUrl","variantOptionQualifiers","_a","_b","_c","_d","item","image","backend","occ","baseUrl","url","changeStyle","OccConfig","NgIf","NgClass","ProductVariantStyleSelectorModule","ProductVariantsContainerComponent","currentProductService","variantType","ngOnInit","product$","getProduct","baseOptions","forEach","option","CurrentProductService","AsyncPipe","ProductVariantsContainerModule","ProductVariantsGuard","semanticPathService","router","canActivate","activatedRoute","productCode","purchasable","purchasableCode","findPurchasableProductCode","_product","createUrlTree","transform","variantOptions","length","results","variant","stock","stockLevel","undefined","SemanticPathService","Router","ɵprov","providedIn","ProductVariantsComponentsModule","cmsComponents","ProductVariantSelectorComponent","component","guards","providers"],"sources":["/home/hamid/cangubike/js-storefront/olf/node_modules/@spartacus/product/fesm2015/spartacus-product-variants-components.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, Input, NgModule, Injectable } from '@angular/core';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i2$1 from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport * as i1 from '@spartacus/core';\nimport { VariantQualifier, UrlModule, I18nModule, VariantType, isNotNullable, provideDefaultConfig } from '@spartacus/core';\nimport { filter, take, distinctUntilChanged, tap, switchMap, map } from 'rxjs/operators';\nimport * as i1$1 from '@spartacus/storefront';\nimport { of } from 'rxjs';\n\nclass ProductVariantColorSelectorComponent {\n    constructor(routingService) {\n        this.routingService = routingService;\n    }\n    changeColor(code, name) {\n        if (code) {\n            this.routingService.go({\n                cxRoute: 'product',\n                params: { code, name },\n            });\n        }\n        return null;\n    }\n    getVariantOptionValue(qualifiers) {\n        const obj = qualifiers.find((q) => q.qualifier === VariantQualifier.COLOR);\n        return obj ? obj.value : '';\n    }\n}\nProductVariantColorSelectorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantColorSelectorComponent, deps: [{ token: i1.RoutingService }], target: i0.ɵɵFactoryTarget.Component });\nProductVariantColorSelectorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: ProductVariantColorSelectorComponent, selector: \"cx-product-variant-color-selector\", inputs: { product: \"product\", variants: \"variants\" }, ngImport: i0, template: \"<ng-container>\\n  <div class=\\\"variant-selector\\\">\\n    <div class=\\\"variant-name\\\">{{ 'productVariants.color' | cxTranslate }}:</div>\\n\\n    <select\\n      (change)=\\\"changeColor($event.target.value, product?.name)\\\"\\n      class=\\\"form-control variant-select\\\"\\n    >\\n      <option\\n        *ngFor=\\\"let v of variants?.options\\\"\\n        value=\\\"{{ v.code }}\\\"\\n        [selected]=\\\"v.code === product?.code\\\"\\n      >\\n        {{ getVariantOptionValue(v.variantOptionQualifiers) }}\\n      </option>\\n    </select>\\n  </div>\\n</ng-container>\\n\", directives: [{ type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], pipes: { \"cxTranslate\": i1.TranslatePipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantColorSelectorComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-product-variant-color-selector',\n                    templateUrl: './product-variant-color-selector.component.html',\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }], ctorParameters: function () { return [{ type: i1.RoutingService }]; }, propDecorators: { product: [{\n                type: Input\n            }], variants: [{\n                type: Input\n            }] } });\n\nclass ProductVariantColorSelectorModule {\n}\nProductVariantColorSelectorModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantColorSelectorModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nProductVariantColorSelectorModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantColorSelectorModule, declarations: [ProductVariantColorSelectorComponent], imports: [CommonModule, RouterModule, UrlModule, I18nModule], exports: [ProductVariantColorSelectorComponent] });\nProductVariantColorSelectorModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantColorSelectorModule, imports: [[CommonModule, RouterModule, UrlModule, I18nModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantColorSelectorModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n                    declarations: [ProductVariantColorSelectorComponent],\n                    exports: [ProductVariantColorSelectorComponent],\n                }]\n        }] });\n\nclass ProductVariantSizeSelectorComponent {\n    constructor(productService, routingService) {\n        this.productService = productService;\n        this.routingService = routingService;\n    }\n    changeSize(code) {\n        if (code) {\n            this.productService\n                .get(code, \"list\" /* LIST */)\n                .pipe(\n            // below call might looks redundant but in fact this data is going to be loaded anyways\n            // we're just calling it earlier and storing\n            filter((p) => !!p), take(1))\n                .subscribe((product) => {\n                this.routingService.go({\n                    cxRoute: 'product',\n                    params: product,\n                });\n            });\n        }\n        return null;\n    }\n    getVariantOptionValue(qualifiers) {\n        const obj = qualifiers.find((q) => q.qualifier === VariantQualifier.SIZE);\n        return obj ? obj.value : '';\n    }\n}\nProductVariantSizeSelectorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantSizeSelectorComponent, deps: [{ token: i1.ProductService }, { token: i1.RoutingService }], target: i0.ɵɵFactoryTarget.Component });\nProductVariantSizeSelectorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: ProductVariantSizeSelectorComponent, selector: \"cx-product-variant-size-selector\", inputs: { product: \"product\", variants: \"variants\" }, ngImport: i0, template: \"<ng-container>\\n  <div class=\\\"variant-selector\\\">\\n    <div class=\\\"variant-name\\\">{{ 'productVariants.size' | cxTranslate }}:</div>\\n    <select\\n      (change)=\\\"changeSize($event.target.value)\\\"\\n      class=\\\"form-control variant-select\\\"\\n    >\\n      <option\\n        *ngFor=\\\"let v of variants?.options\\\"\\n        value=\\\"{{ v.code }}\\\"\\n        [selected]=\\\"v.code === product?.code\\\"\\n      >\\n        {{ getVariantOptionValue(v.variantOptionQualifiers) }}\\n      </option>\\n    </select>\\n    <a\\n      href=\\\"#\\\"\\n      class=\\\"size-guide\\\"\\n      title=\\\"{{ 'productVariants.sizeGuideLabel' | cxTranslate }}\\\"\\n    >\\n      {{ 'productVariants.sizeGuideLabel' | cxTranslate }}\\n    </a>\\n  </div>\\n</ng-container>\\n\", directives: [{ type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], pipes: { \"cxTranslate\": i1.TranslatePipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantSizeSelectorComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-product-variant-size-selector',\n                    templateUrl: './product-variant-size-selector.component.html',\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }], ctorParameters: function () { return [{ type: i1.ProductService }, { type: i1.RoutingService }]; }, propDecorators: { product: [{\n                type: Input\n            }], variants: [{\n                type: Input\n            }] } });\n\nclass ProductVariantSizeSelectorModule {\n}\nProductVariantSizeSelectorModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantSizeSelectorModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nProductVariantSizeSelectorModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantSizeSelectorModule, declarations: [ProductVariantSizeSelectorComponent], imports: [CommonModule, RouterModule, UrlModule, I18nModule], exports: [ProductVariantSizeSelectorComponent] });\nProductVariantSizeSelectorModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantSizeSelectorModule, imports: [[CommonModule, RouterModule, UrlModule, I18nModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantSizeSelectorModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n                    declarations: [ProductVariantSizeSelectorComponent],\n                    exports: [ProductVariantSizeSelectorComponent],\n                }]\n        }] });\n\nclass ProductVariantStyleSelectorComponent {\n    constructor(config, productService, routingService) {\n        this.config = config;\n        this.productService = productService;\n        this.routingService = routingService;\n        this.variantQualifier = VariantQualifier;\n    }\n    getVariantOptionValue(qualifiers) {\n        const obj = qualifiers.find((q) => q.qualifier === VariantQualifier.STYLE);\n        return obj ? obj.value : '';\n    }\n    getVariantThumbnailUrl(variantOptionQualifiers) {\n        var _a, _b, _c, _d;\n        const qualifier = variantOptionQualifiers.find((item) => item.image);\n        return qualifier\n            ? `${(_c = (_b = (_a = this.config) === null || _a === void 0 ? void 0 : _a.backend) === null || _b === void 0 ? void 0 : _b.occ) === null || _c === void 0 ? void 0 : _c.baseUrl}${(_d = qualifier.image) === null || _d === void 0 ? void 0 : _d.url}`\n            : '';\n    }\n    changeStyle(code) {\n        if (code) {\n            this.productService\n                .get(code, \"list\" /* LIST */)\n                .pipe(\n            // below call might looks redundant but in fact this data is going to be loaded anyways\n            // we're just calling it earlier and storing\n            filter((p) => !!p), take(1))\n                .subscribe((product) => {\n                this.routingService.go({\n                    cxRoute: 'product',\n                    params: product,\n                });\n            });\n        }\n        return null;\n    }\n}\nProductVariantStyleSelectorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantStyleSelectorComponent, deps: [{ token: i1.OccConfig }, { token: i1.ProductService }, { token: i1.RoutingService }], target: i0.ɵɵFactoryTarget.Component });\nProductVariantStyleSelectorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: ProductVariantStyleSelectorComponent, selector: \"cx-product-variant-style-selector\", inputs: { variants: \"variants\" }, ngImport: i0, template: \"<ng-container>\\n  <div class=\\\"variant-selector\\\">\\n    <div *ngIf=\\\"variants.selected\\\" class=\\\"variant-name\\\">\\n      {{ 'productVariants.style' | cxTranslate }}:\\n      <span class=\\\"style-name\\\">{{\\n        getVariantOptionValue(variants?.selected.variantOptionQualifiers)\\n      }}</span>\\n    </div>\\n    <ul class=\\\"variant-list\\\">\\n      <li\\n        *ngFor=\\\"let v of variants?.options\\\"\\n        [ngClass]=\\\"{ 'selected-variant': v.code === variants?.selected?.code }\\\"\\n      >\\n        <button class=\\\"variant-button\\\" (click)=\\\"changeStyle(v.code)\\\">\\n          <img\\n            src=\\\"{{ getVariantThumbnailUrl(v.variantOptionQualifiers) }}\\\"\\n            title=\\\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\\\"\\n            alt=\\\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\\\"\\n          />\\n        </button>\\n      </li>\\n    </ul>\\n  </div>\\n</ng-container>\\n\", directives: [{ type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i2.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }], pipes: { \"cxTranslate\": i1.TranslatePipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantStyleSelectorComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-product-variant-style-selector',\n                    templateUrl: './product-variant-style-selector.component.html',\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }], ctorParameters: function () { return [{ type: i1.OccConfig }, { type: i1.ProductService }, { type: i1.RoutingService }]; }, propDecorators: { variants: [{\n                type: Input\n            }] } });\n\nclass ProductVariantStyleSelectorModule {\n}\nProductVariantStyleSelectorModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantStyleSelectorModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nProductVariantStyleSelectorModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantStyleSelectorModule, declarations: [ProductVariantStyleSelectorComponent], imports: [CommonModule, RouterModule, UrlModule, I18nModule], exports: [ProductVariantStyleSelectorComponent] });\nProductVariantStyleSelectorModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantStyleSelectorModule, imports: [[CommonModule, RouterModule, UrlModule, I18nModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantStyleSelectorModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n                    declarations: [ProductVariantStyleSelectorComponent],\n                    exports: [ProductVariantStyleSelectorComponent],\n                }]\n        }] });\n\nclass ProductVariantsContainerComponent {\n    constructor(currentProductService) {\n        this.currentProductService = currentProductService;\n        this.variants = {};\n        this.variantType = VariantType;\n    }\n    ngOnInit() {\n        this.product$ = this.currentProductService.getProduct().pipe(filter(isNotNullable), filter((product) => !!product.baseOptions), distinctUntilChanged(), tap((product) => {\n            product.baseOptions.forEach((option) => {\n                if (option === null || option === void 0 ? void 0 : option.variantType) {\n                    this.variants[option.variantType] = option;\n                }\n            });\n        }));\n    }\n}\nProductVariantsContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsContainerComponent, deps: [{ token: i1$1.CurrentProductService }], target: i0.ɵɵFactoryTarget.Component });\nProductVariantsContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: ProductVariantsContainerComponent, selector: \"cx-product-variants-container\", ngImport: i0, template: \"<ng-container *ngIf=\\\"product$ | async as product\\\">\\n  <div class=\\\"variant-section\\\" *ngIf=\\\"product.baseOptions?.length\\\">\\n    <cx-product-variant-style-selector\\n      *ngIf=\\\"variants[variantType.STYLE]\\\"\\n      [variants]=\\\"variants[variantType.STYLE]\\\"\\n    ></cx-product-variant-style-selector>\\n    <cx-product-variant-size-selector\\n      *ngIf=\\\"variants[variantType.SIZE]\\\"\\n      [product]=\\\"product\\\"\\n      [variants]=\\\"variants[variantType.SIZE]\\\"\\n    ></cx-product-variant-size-selector>\\n    <cx-product-variant-color-selector\\n      *ngIf=\\\"variants[variantType.COLOR]\\\"\\n      [product]=\\\"product\\\"\\n      [variants]=\\\"variants[variantType.COLOR]\\\"\\n    ></cx-product-variant-color-selector>\\n  </div>\\n</ng-container>\\n\", components: [{ type: ProductVariantStyleSelectorComponent, selector: \"cx-product-variant-style-selector\", inputs: [\"variants\"] }, { type: ProductVariantSizeSelectorComponent, selector: \"cx-product-variant-size-selector\", inputs: [\"product\", \"variants\"] }, { type: ProductVariantColorSelectorComponent, selector: \"cx-product-variant-color-selector\", inputs: [\"product\", \"variants\"] }], directives: [{ type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], pipes: { \"async\": i2.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsContainerComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-product-variants-container',\n                    templateUrl: './product-variants-container.component.html',\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }], ctorParameters: function () { return [{ type: i1$1.CurrentProductService }]; } });\n\nclass ProductVariantsContainerModule {\n}\nProductVariantsContainerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsContainerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nProductVariantsContainerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsContainerModule, declarations: [ProductVariantsContainerComponent], imports: [CommonModule,\n        RouterModule,\n        UrlModule,\n        I18nModule,\n        ProductVariantStyleSelectorModule,\n        ProductVariantSizeSelectorModule,\n        ProductVariantColorSelectorModule] });\nProductVariantsContainerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsContainerModule, imports: [[\n            CommonModule,\n            RouterModule,\n            UrlModule,\n            I18nModule,\n            ProductVariantStyleSelectorModule,\n            ProductVariantSizeSelectorModule,\n            ProductVariantColorSelectorModule,\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsContainerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        RouterModule,\n                        UrlModule,\n                        I18nModule,\n                        ProductVariantStyleSelectorModule,\n                        ProductVariantSizeSelectorModule,\n                        ProductVariantColorSelectorModule,\n                    ],\n                    declarations: [ProductVariantsContainerComponent],\n                }]\n        }] });\n\n/**\n * Guard that will redirect to purchasable variant of product, if the navigation\n * is for the non-purchasable one\n */\nclass ProductVariantsGuard {\n    constructor(productService, semanticPathService, router) {\n        this.productService = productService;\n        this.semanticPathService = semanticPathService;\n        this.router = router;\n    }\n    canActivate(activatedRoute) {\n        var _a;\n        const productCode = (_a = activatedRoute.params) === null || _a === void 0 ? void 0 : _a.productCode;\n        if (!productCode) {\n            return of(true);\n        }\n        return this.productService.get(productCode, \"variants\" /* VARIANTS */).pipe(filter((p) => !!p), switchMap((product) => {\n            if (!product.purchasable) {\n                const purchasableCode = this.findPurchasableProductCode(product);\n                if (purchasableCode) {\n                    return this.productService\n                        .get(purchasableCode, \"list\" /* LIST */)\n                        .pipe(filter((p) => !!p), take(1), map((_product) => {\n                        return this.router.createUrlTree(this.semanticPathService.transform({\n                            cxRoute: 'product',\n                            params: _product,\n                        }));\n                    }));\n                }\n            }\n            return of(true);\n        }));\n    }\n    /**\n     * Finds a purchasable product code looking at variant options, if any\n     *\n     * @param product\n     */\n    findPurchasableProductCode(product) {\n        var _a, _b, _c;\n        if ((_a = product.variantOptions) === null || _a === void 0 ? void 0 : _a.length) {\n            const results = product.variantOptions.filter((variant) => {\n                return variant.stock && variant.stock.stockLevel ? variant : false;\n            });\n            return results && results.length\n                ? (_b = results[0]) === null || _b === void 0 ? void 0 : _b.code\n                : (_c = product.variantOptions[0]) === null || _c === void 0 ? void 0 : _c.code;\n        }\n        return undefined;\n    }\n}\nProductVariantsGuard.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsGuard, deps: [{ token: i1.ProductService }, { token: i1.SemanticPathService }, { token: i2$1.Router }], target: i0.ɵɵFactoryTarget.Injectable });\nProductVariantsGuard.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsGuard, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsGuard, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i1.ProductService }, { type: i1.SemanticPathService }, { type: i2$1.Router }]; } });\n\nclass ProductVariantsComponentsModule {\n}\nProductVariantsComponentsModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsComponentsModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nProductVariantsComponentsModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsComponentsModule, imports: [ProductVariantsContainerModule,\n        ProductVariantColorSelectorModule,\n        ProductVariantSizeSelectorModule,\n        ProductVariantStyleSelectorModule] });\nProductVariantsComponentsModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsComponentsModule, providers: [\n        provideDefaultConfig({\n            cmsComponents: {\n                ProductVariantSelectorComponent: {\n                    component: ProductVariantsContainerComponent,\n                    guards: [ProductVariantsGuard],\n                },\n            },\n        }),\n    ], imports: [[\n            ProductVariantsContainerModule,\n            ProductVariantColorSelectorModule,\n            ProductVariantSizeSelectorModule,\n            ProductVariantStyleSelectorModule,\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: ProductVariantsComponentsModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        ProductVariantsContainerModule,\n                        ProductVariantColorSelectorModule,\n                        ProductVariantSizeSelectorModule,\n                        ProductVariantStyleSelectorModule,\n                    ],\n                    providers: [\n                        provideDefaultConfig({\n                            cmsComponents: {\n                                ProductVariantSelectorComponent: {\n                                    component: ProductVariantsContainerComponent,\n                                    guards: [ProductVariantsGuard],\n                                },\n                            },\n                        }),\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ProductVariantColorSelectorComponent, ProductVariantColorSelectorModule, ProductVariantSizeSelectorComponent, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorComponent, ProductVariantStyleSelectorModule, ProductVariantsComponentsModule, ProductVariantsContainerComponent, ProductVariantsContainerModule, ProductVariantsGuard };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}