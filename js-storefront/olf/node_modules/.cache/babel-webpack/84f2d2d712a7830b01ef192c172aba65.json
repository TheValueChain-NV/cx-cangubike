{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, Input, NgModule, Injectable } from '@angular/core';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i2$1 from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport * as i1 from '@spartacus/core';\nimport { VariantQualifier, UrlModule, I18nModule, VariantType, isNotNullable, provideDefaultConfig } from '@spartacus/core';\nimport { filter, take, distinctUntilChanged, tap, switchMap, map } from 'rxjs/operators';\nimport * as i1$1 from '@spartacus/storefront';\nimport { of } from 'rxjs';\nfunction ProductVariantColorSelectorComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const v_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"value\", v_r1.code);\n    i0.ɵɵproperty(\"selected\", v_r1.code === (ctx_r0.product == null ? null : ctx_r0.product.code));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getVariantOptionValue(v_r1.variantOptionQualifiers), \" \");\n  }\n}\nfunction ProductVariantSizeSelectorComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const v_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"value\", v_r1.code);\n    i0.ɵɵproperty(\"selected\", v_r1.code === (ctx_r0.product == null ? null : ctx_r0.product.code));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getVariantOptionValue(v_r1.variantOptionQualifiers), \" \");\n  }\n}\nfunction ProductVariantStyleSelectorComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"cxTranslate\");\n    i0.ɵɵelementStart(3, \"span\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 2, \"productVariants.style\"), \": \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.getVariantOptionValue(ctx_r0.variants == null ? null : ctx_r0.variants.selected.variantOptionQualifiers));\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"selected-variant\": a0\n  };\n};\nfunction ProductVariantStyleSelectorComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 6);\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductVariantStyleSelectorComponent_li_4_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const v_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.changeStyle(v_r2.code);\n    });\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const v_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, v_r2.code === (ctx_r1.variants == null ? null : ctx_r1.variants.selected == null ? null : ctx_r1.variants.selected.code)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.getVariantThumbnailUrl(v_r2.variantOptionQualifiers), i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r1.getVariantOptionValue(v_r2.variantOptionQualifiers));\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r1.getVariantOptionValue(v_r2.variantOptionQualifiers));\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_style_selector_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-product-variant-style-selector\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"variants\", ctx_r3.variants[ctx_r3.variantType.STYLE]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_size_selector_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-product-variant-size-selector\", 6);\n  }\n  if (rf & 2) {\n    const product_r1 = i0.ɵɵnextContext(2).ngIf;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"product\", product_r1)(\"variants\", ctx_r4.variants[ctx_r4.variantType.SIZE]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_color_selector_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-product-variant-color-selector\", 6);\n  }\n  if (rf & 2) {\n    const product_r1 = i0.ɵɵnextContext(2).ngIf;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"product\", product_r1)(\"variants\", ctx_r5.variants[ctx_r5.variantType.COLOR]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_style_selector_1_Template, 1, 1, \"cx-product-variant-style-selector\", 3);\n    i0.ɵɵtemplate(2, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_size_selector_2_Template, 1, 2, \"cx-product-variant-size-selector\", 4);\n    i0.ɵɵtemplate(3, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_color_selector_3_Template, 1, 2, \"cx-product-variant-color-selector\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.variants[ctx_r2.variantType.STYLE]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.variants[ctx_r2.variantType.SIZE]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.variants[ctx_r2.variantType.COLOR]);\n  }\n}\nfunction ProductVariantsContainerComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ProductVariantsContainerComponent_ng_container_0_div_1_Template, 4, 3, \"div\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r1.baseOptions == null ? null : product_r1.baseOptions.length);\n  }\n}\nlet ProductVariantColorSelectorComponent = /*#__PURE__*/(() => {\n  class ProductVariantColorSelectorComponent {\n    constructor(routingService) {\n      this.routingService = routingService;\n    }\n    changeColor(code, name) {\n      if (code) {\n        this.routingService.go({\n          cxRoute: 'product',\n          params: {\n            code,\n            name\n          }\n        });\n      }\n      return null;\n    }\n    getVariantOptionValue(qualifiers) {\n      const obj = qualifiers.find(q => q.qualifier === VariantQualifier.COLOR);\n      return obj ? obj.value : '';\n    }\n  }\n  ProductVariantColorSelectorComponent.ɵfac = function ProductVariantColorSelectorComponent_Factory(t) {\n    return new (t || ProductVariantColorSelectorComponent)(i0.ɵɵdirectiveInject(i1.RoutingService));\n  };\n  ProductVariantColorSelectorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ProductVariantColorSelectorComponent,\n    selectors: [[\"cx-product-variant-color-selector\"]],\n    inputs: {\n      product: \"product\",\n      variants: \"variants\"\n    },\n    decls: 7,\n    vars: 4,\n    consts: [[1, \"variant-selector\"], [1, \"variant-name\"], [1, \"form-control\", \"variant-select\", 3, \"change\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"selected\"]],\n    template: function ProductVariantColorSelectorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementContainerStart(0);\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵtext(3);\n        i0.ɵɵpipe(4, \"cxTranslate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"select\", 2);\n        i0.ɵɵlistener(\"change\", function ProductVariantColorSelectorComponent_Template_select_change_5_listener($event) {\n          return ctx.changeColor($event.target.value, ctx.product == null ? null : ctx.product.name);\n        });\n        i0.ɵɵtemplate(6, ProductVariantColorSelectorComponent_option_6_Template, 2, 3, \"option\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(4, 2, \"productVariants.color\"), \":\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.variants == null ? null : ctx.variants.options);\n      }\n    },\n    directives: [i2.NgForOf],\n    pipes: [i1.TranslatePipe],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return ProductVariantColorSelectorComponent;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantColorSelectorModule = /*#__PURE__*/(() => {\n  class ProductVariantColorSelectorModule {}\n  ProductVariantColorSelectorModule.ɵfac = function ProductVariantColorSelectorModule_Factory(t) {\n    return new (t || ProductVariantColorSelectorModule)();\n  };\n  ProductVariantColorSelectorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: ProductVariantColorSelectorModule\n  });\n  ProductVariantColorSelectorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, RouterModule, UrlModule, I18nModule]]\n  });\n  return ProductVariantColorSelectorModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantSizeSelectorComponent = /*#__PURE__*/(() => {\n  class ProductVariantSizeSelectorComponent {\n    constructor(productService, routingService) {\n      this.productService = productService;\n      this.routingService = routingService;\n    }\n    changeSize(code) {\n      if (code) {\n        this.productService.get(code, \"list\" /* LIST */).pipe(\n        // below call might looks redundant but in fact this data is going to be loaded anyways\n        // we're just calling it earlier and storing\n        filter(p => !!p), take(1)).subscribe(product => {\n          this.routingService.go({\n            cxRoute: 'product',\n            params: product\n          });\n        });\n      }\n      return null;\n    }\n    getVariantOptionValue(qualifiers) {\n      const obj = qualifiers.find(q => q.qualifier === VariantQualifier.SIZE);\n      return obj ? obj.value : '';\n    }\n  }\n  ProductVariantSizeSelectorComponent.ɵfac = function ProductVariantSizeSelectorComponent_Factory(t) {\n    return new (t || ProductVariantSizeSelectorComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i1.RoutingService));\n  };\n  ProductVariantSizeSelectorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ProductVariantSizeSelectorComponent,\n    selectors: [[\"cx-product-variant-size-selector\"]],\n    inputs: {\n      product: \"product\",\n      variants: \"variants\"\n    },\n    decls: 11,\n    vars: 10,\n    consts: [[1, \"variant-selector\"], [1, \"variant-name\"], [1, \"form-control\", \"variant-select\", 3, \"change\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"#\", 1, \"size-guide\", 3, \"title\"], [3, \"value\", \"selected\"]],\n    template: function ProductVariantSizeSelectorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementContainerStart(0);\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵtext(3);\n        i0.ɵɵpipe(4, \"cxTranslate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"select\", 2);\n        i0.ɵɵlistener(\"change\", function ProductVariantSizeSelectorComponent_Template_select_change_5_listener($event) {\n          return ctx.changeSize($event.target.value);\n        });\n        i0.ɵɵtemplate(6, ProductVariantSizeSelectorComponent_option_6_Template, 2, 3, \"option\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"a\", 4);\n        i0.ɵɵpipe(8, \"cxTranslate\");\n        i0.ɵɵtext(9);\n        i0.ɵɵpipe(10, \"cxTranslate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(4, 4, \"productVariants.size\"), \":\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.variants == null ? null : ctx.variants.options);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"title\", i0.ɵɵpipeBind1(8, 6, \"productVariants.sizeGuideLabel\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 8, \"productVariants.sizeGuideLabel\"), \" \");\n      }\n    },\n    directives: [i2.NgForOf],\n    pipes: [i1.TranslatePipe],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return ProductVariantSizeSelectorComponent;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantSizeSelectorModule = /*#__PURE__*/(() => {\n  class ProductVariantSizeSelectorModule {}\n  ProductVariantSizeSelectorModule.ɵfac = function ProductVariantSizeSelectorModule_Factory(t) {\n    return new (t || ProductVariantSizeSelectorModule)();\n  };\n  ProductVariantSizeSelectorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: ProductVariantSizeSelectorModule\n  });\n  ProductVariantSizeSelectorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, RouterModule, UrlModule, I18nModule]]\n  });\n  return ProductVariantSizeSelectorModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantStyleSelectorComponent = /*#__PURE__*/(() => {\n  class ProductVariantStyleSelectorComponent {\n    constructor(config, productService, routingService) {\n      this.config = config;\n      this.productService = productService;\n      this.routingService = routingService;\n      this.variantQualifier = VariantQualifier;\n    }\n    getVariantOptionValue(qualifiers) {\n      const obj = qualifiers.find(q => q.qualifier === VariantQualifier.STYLE);\n      return obj ? obj.value : '';\n    }\n    getVariantThumbnailUrl(variantOptionQualifiers) {\n      var _a, _b, _c, _d;\n      const qualifier = variantOptionQualifiers.find(item => item.image);\n      return qualifier ? `${(_c = (_b = (_a = this.config) === null || _a === void 0 ? void 0 : _a.backend) === null || _b === void 0 ? void 0 : _b.occ) === null || _c === void 0 ? void 0 : _c.baseUrl}${(_d = qualifier.image) === null || _d === void 0 ? void 0 : _d.url}` : '';\n    }\n    changeStyle(code) {\n      if (code) {\n        this.productService.get(code, \"list\" /* LIST */).pipe(\n        // below call might looks redundant but in fact this data is going to be loaded anyways\n        // we're just calling it earlier and storing\n        filter(p => !!p), take(1)).subscribe(product => {\n          this.routingService.go({\n            cxRoute: 'product',\n            params: product\n          });\n        });\n      }\n      return null;\n    }\n  }\n  ProductVariantStyleSelectorComponent.ɵfac = function ProductVariantStyleSelectorComponent_Factory(t) {\n    return new (t || ProductVariantStyleSelectorComponent)(i0.ɵɵdirectiveInject(i1.OccConfig), i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i1.RoutingService));\n  };\n  ProductVariantStyleSelectorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ProductVariantStyleSelectorComponent,\n    selectors: [[\"cx-product-variant-style-selector\"]],\n    inputs: {\n      variants: \"variants\"\n    },\n    decls: 5,\n    vars: 2,\n    consts: [[1, \"variant-selector\"], [\"class\", \"variant-name\", 4, \"ngIf\"], [1, \"variant-list\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"variant-name\"], [1, \"style-name\"], [3, \"ngClass\"], [1, \"variant-button\", 3, \"click\"], [3, \"src\", \"title\", \"alt\"]],\n    template: function ProductVariantStyleSelectorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementContainerStart(0);\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵtemplate(2, ProductVariantStyleSelectorComponent_div_2_Template, 5, 4, \"div\", 1);\n        i0.ɵɵelementStart(3, \"ul\", 2);\n        i0.ɵɵtemplate(4, ProductVariantStyleSelectorComponent_li_4_Template, 3, 6, \"li\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.variants.selected);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.variants == null ? null : ctx.variants.options);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf, i2.NgClass],\n    pipes: [i1.TranslatePipe],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return ProductVariantStyleSelectorComponent;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantStyleSelectorModule = /*#__PURE__*/(() => {\n  class ProductVariantStyleSelectorModule {}\n  ProductVariantStyleSelectorModule.ɵfac = function ProductVariantStyleSelectorModule_Factory(t) {\n    return new (t || ProductVariantStyleSelectorModule)();\n  };\n  ProductVariantStyleSelectorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: ProductVariantStyleSelectorModule\n  });\n  ProductVariantStyleSelectorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, RouterModule, UrlModule, I18nModule]]\n  });\n  return ProductVariantStyleSelectorModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantsContainerComponent = /*#__PURE__*/(() => {\n  class ProductVariantsContainerComponent {\n    constructor(currentProductService) {\n      this.currentProductService = currentProductService;\n      this.variants = {};\n      this.variantType = VariantType;\n    }\n    ngOnInit() {\n      this.product$ = this.currentProductService.getProduct().pipe(filter(isNotNullable), filter(product => !!product.baseOptions), distinctUntilChanged(), tap(product => {\n        product.baseOptions.forEach(option => {\n          if (option === null || option === void 0 ? void 0 : option.variantType) {\n            this.variants[option.variantType] = option;\n          }\n        });\n      }));\n    }\n  }\n  ProductVariantsContainerComponent.ɵfac = function ProductVariantsContainerComponent_Factory(t) {\n    return new (t || ProductVariantsContainerComponent)(i0.ɵɵdirectiveInject(i1$1.CurrentProductService));\n  };\n  ProductVariantsContainerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ProductVariantsContainerComponent,\n    selectors: [[\"cx-product-variants-container\"]],\n    decls: 2,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [\"class\", \"variant-section\", 4, \"ngIf\"], [1, \"variant-section\"], [3, \"variants\", 4, \"ngIf\"], [3, \"product\", \"variants\", 4, \"ngIf\"], [3, \"variants\"], [3, \"product\", \"variants\"]],\n    template: function ProductVariantsContainerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ProductVariantsContainerComponent_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n        i0.ɵɵpipe(1, \"async\");\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.product$));\n      }\n    },\n    directives: [i2.NgIf, ProductVariantStyleSelectorComponent, ProductVariantSizeSelectorComponent, ProductVariantColorSelectorComponent],\n    pipes: [i2.AsyncPipe],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return ProductVariantsContainerComponent;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantsContainerModule = /*#__PURE__*/(() => {\n  class ProductVariantsContainerModule {}\n  ProductVariantsContainerModule.ɵfac = function ProductVariantsContainerModule_Factory(t) {\n    return new (t || ProductVariantsContainerModule)();\n  };\n  ProductVariantsContainerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: ProductVariantsContainerModule\n  });\n  ProductVariantsContainerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, RouterModule, UrlModule, I18nModule, ProductVariantStyleSelectorModule, ProductVariantSizeSelectorModule, ProductVariantColorSelectorModule]]\n  });\n  return ProductVariantsContainerModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Guard that will redirect to purchasable variant of product, if the navigation\n * is for the non-purchasable one\n */\nlet ProductVariantsGuard = /*#__PURE__*/(() => {\n  class ProductVariantsGuard {\n    constructor(productService, semanticPathService, router) {\n      this.productService = productService;\n      this.semanticPathService = semanticPathService;\n      this.router = router;\n    }\n    canActivate(activatedRoute) {\n      var _a;\n      const productCode = (_a = activatedRoute.params) === null || _a === void 0 ? void 0 : _a.productCode;\n      if (!productCode) {\n        return of(true);\n      }\n      return this.productService.get(productCode, \"variants\" /* VARIANTS */).pipe(filter(p => !!p), switchMap(product => {\n        if (!product.purchasable) {\n          const purchasableCode = this.findPurchasableProductCode(product);\n          if (purchasableCode) {\n            return this.productService.get(purchasableCode, \"list\" /* LIST */).pipe(filter(p => !!p), take(1), map(_product => {\n              return this.router.createUrlTree(this.semanticPathService.transform({\n                cxRoute: 'product',\n                params: _product\n              }));\n            }));\n          }\n        }\n        return of(true);\n      }));\n    }\n    /**\n     * Finds a purchasable product code looking at variant options, if any\n     *\n     * @param product\n     */\n    findPurchasableProductCode(product) {\n      var _a, _b, _c;\n      if ((_a = product.variantOptions) === null || _a === void 0 ? void 0 : _a.length) {\n        const results = product.variantOptions.filter(variant => {\n          return variant.stock && variant.stock.stockLevel ? variant : false;\n        });\n        return results && results.length ? (_b = results[0]) === null || _b === void 0 ? void 0 : _b.code : (_c = product.variantOptions[0]) === null || _c === void 0 ? void 0 : _c.code;\n      }\n      return undefined;\n    }\n  }\n  ProductVariantsGuard.ɵfac = function ProductVariantsGuard_Factory(t) {\n    return new (t || ProductVariantsGuard)(i0.ɵɵinject(i1.ProductService), i0.ɵɵinject(i1.SemanticPathService), i0.ɵɵinject(i2$1.Router));\n  };\n  ProductVariantsGuard.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: ProductVariantsGuard,\n    factory: ProductVariantsGuard.ɵfac,\n    providedIn: 'root'\n  });\n  return ProductVariantsGuard;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet ProductVariantsComponentsModule = /*#__PURE__*/(() => {\n  class ProductVariantsComponentsModule {}\n  ProductVariantsComponentsModule.ɵfac = function ProductVariantsComponentsModule_Factory(t) {\n    return new (t || ProductVariantsComponentsModule)();\n  };\n  ProductVariantsComponentsModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: ProductVariantsComponentsModule\n  });\n  ProductVariantsComponentsModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    providers: [provideDefaultConfig({\n      cmsComponents: {\n        ProductVariantSelectorComponent: {\n          component: ProductVariantsContainerComponent,\n          guards: [ProductVariantsGuard]\n        }\n      }\n    })],\n    imports: [[ProductVariantsContainerModule, ProductVariantColorSelectorModule, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorModule]]\n  });\n  return ProductVariantsComponentsModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ProductVariantColorSelectorComponent, ProductVariantColorSelectorModule, ProductVariantSizeSelectorComponent, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorComponent, ProductVariantStyleSelectorModule, ProductVariantsComponentsModule, ProductVariantsContainerComponent, ProductVariantsContainerModule, ProductVariantsGuard };\n//# sourceMappingURL=spartacus-product-variants-components.js.map","map":null,"metadata":{},"sourceType":"module"}