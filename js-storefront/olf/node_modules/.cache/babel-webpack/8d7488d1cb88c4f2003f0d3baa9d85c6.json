{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Component, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i1 from '@spartacus/core';\nimport { I18nModule, ConfigModule, provideDefaultConfig } from '@spartacus/core';\nimport { SpinnerModule } from '@spartacus/storefront';\nimport { switchMap } from 'rxjs/operators';\nimport * as i2 from '@spartacus/product/bulk-pricing/core';\nfunction BulkPricingTableComponent_ng_container_0_div_1_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tier_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.formatQuantity(tier_r4));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tier_r4.formattedValue);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tier_r4.formattedDiscount);\n  }\n}\nfunction BulkPricingTableComponent_ng_container_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"table\", 3);\n    i0.ɵɵelementStart(2, \"thead\", 4);\n    i0.ɵɵelementStart(3, \"tr\");\n    i0.ɵɵelementStart(4, \"th\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 5);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 5);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, BulkPricingTableComponent_ng_container_0_div_1_tr_14_Template, 7, 3, \"tr\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const priceTiers_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 4, \"bulkPricingTable.quantity\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 6, \"bulkPricingTable.price\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(12, 8, \"bulkPricingTable.discount\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", priceTiers_r1);\n  }\n}\nfunction BulkPricingTableComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BulkPricingTableComponent_ng_container_0_div_1_Template, 15, 10, \"div\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const priceTiers_r1 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", priceTiers_r1.length > 0);\n  }\n}\nlet BulkPricingTableComponent = /*#__PURE__*/(() => {\n  class BulkPricingTableComponent {\n    constructor(routingService, bulkPricingService) {\n      this.routingService = routingService;\n      this.bulkPricingService = bulkPricingService;\n      this.PRODUCT_KEY = 'productCode';\n    }\n    ngOnInit() {\n      this.priceTiers$ = this.getPrices();\n    }\n    formatQuantity(tier) {\n      let formattedQuantityRange = '';\n      if (!tier.maxQuantity) {\n        formattedQuantityRange = tier.minQuantity + '+';\n      } else {\n        formattedQuantityRange = tier.minQuantity + ' - ' + tier.maxQuantity;\n      }\n      return formattedQuantityRange;\n    }\n    getPrices() {\n      return this.routingService.getRouterState().pipe(switchMap(state => {\n        const productCode = state.state.params[this.PRODUCT_KEY];\n        return this.bulkPricingService.getBulkPrices(productCode);\n      }));\n    }\n  }\n  BulkPricingTableComponent.ɵfac = function BulkPricingTableComponent_Factory(t) {\n    return new (t || BulkPricingTableComponent)(i0.ɵɵdirectiveInject(i1.RoutingService), i0.ɵɵdirectiveInject(i2.BulkPricingService));\n  };\n  BulkPricingTableComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: BulkPricingTableComponent,\n    selectors: [[\"cx-bulk-pricing-table\"]],\n    decls: 2,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"container\"], [1, \"table\"], [1, \"thead-light\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function BulkPricingTableComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BulkPricingTableComponent_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n        i0.ɵɵpipe(1, \"async\");\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.priceTiers$));\n      }\n    },\n    directives: [i3.NgIf, i3.NgForOf],\n    pipes: [i3.AsyncPipe, i1.TranslatePipe],\n    encapsulation: 2\n  });\n  return BulkPricingTableComponent;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet BulkPricingTableModule = /*#__PURE__*/(() => {\n  class BulkPricingTableModule {}\n  BulkPricingTableModule.ɵfac = function BulkPricingTableModule_Factory(t) {\n    return new (t || BulkPricingTableModule)();\n  };\n  BulkPricingTableModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: BulkPricingTableModule\n  });\n  BulkPricingTableModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, I18nModule, SpinnerModule, ConfigModule.withConfig({\n      cmsComponents: {\n        BulkPricingTableComponent: {\n          component: BulkPricingTableComponent\n        }\n      }\n    })]]\n  });\n  return BulkPricingTableModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nconst defaultOccBulkPricingConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        product: {\n          bulkPrices: 'orgProducts/${productCode}?fields=price(DEFAULT),volumePrices(FULL)'\n        }\n      }\n    }\n  }\n};\nlet BulkPricingOccModule = /*#__PURE__*/(() => {\n  class BulkPricingOccModule {}\n  BulkPricingOccModule.ɵfac = function BulkPricingOccModule_Factory(t) {\n    return new (t || BulkPricingOccModule)();\n  };\n  BulkPricingOccModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: BulkPricingOccModule\n  });\n  BulkPricingOccModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    providers: [provideDefaultConfig(defaultOccBulkPricingConfig)],\n    imports: [[CommonModule]]\n  });\n  return BulkPricingOccModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet BulkPricingModule = /*#__PURE__*/(() => {\n  class BulkPricingModule {}\n  BulkPricingModule.ɵfac = function BulkPricingModule_Factory(t) {\n    return new (t || BulkPricingModule)();\n  };\n  BulkPricingModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: BulkPricingModule\n  });\n  BulkPricingModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[BulkPricingOccModule, BulkPricingTableModule]]\n  });\n  return BulkPricingModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BulkPricingModule };\n//# sourceMappingURL=spartacus-product-bulk-pricing.js.map","map":null,"metadata":{},"sourceType":"module"}