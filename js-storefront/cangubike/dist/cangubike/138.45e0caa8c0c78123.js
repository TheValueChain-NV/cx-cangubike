"use strict";(self.webpackChunkcangubike=self.webpackChunkcangubike||[]).push([[138],{4138:(Kl,Le,b)=>{b.r(Le),b.d(Le,{RulebasedConfiguratorWrapperModule:()=>Jl});var t=b(4537),c=b(6940),y=b(9775),f=b(1739),Gt=b(8229),Q=b(3464),N=b(5917),Pt=b(6797),mt=b(6215),_n=b(9112),Cn=b(9193),vn=b(6682),Ve=b(1627),S=b(5435),v=b(8002),D=b(8307),h=b(5257),m=b(3190),z=b(5792),yt=b(7519),Lt=b(5345);class mn{constructor(o,e){this.keySelector=o,this.flushes=e}call(o,e){return e.subscribe(new yn(o,this.keySelector,this.flushes))}}class yn extends Lt.Ds{constructor(o,e,n){super(o),this.keySelector=e,this.values=new Set,n&&this.add((0,Lt.ft)(n,new Lt.IY(this)))}notifyNext(){this.values.clear()}notifyError(o){this._error(o)}_next(o){this.keySelector?this._useKeySelector(o):this._finalizeNext(o,o)}_useKeySelector(o){let e;const{destination:n}=this;try{e=this.keySelector(o)}catch(i){return void n.error(i)}this._finalizeNext(e,o)}_finalizeNext(o,e){const{values:n}=this;n.has(o)||(n.add(o),this.destination.next(e))}}var Vt=b(8984),bn=b(8049),Tn=b(3653),xn=b(9595),$=b(9773),q=b(5304),_=b(92),w=b(3966),nt=b(6937),it=b(2375),An=b(8090),In=b(7949),p=b(8692),j=b(1208),K=b(6191),x=b(8135),H=b(5732);function Sn(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).ngIf,a=t.oxw();return t.KtG(a.onAddToCart(i.configuration,i.routerData))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(2).ngIf,n=t.oxw();t.xp6(1),t.uIk("aria-label",t.lcZ(2,2,n.getButtonResourceKey(e.routerData,e.configuration))+" "+t.xi3(3,4,"configurator.a11y.addToCartPrices",n.extractConfigPrices(e.configuration))),t.xp6(3),t.hij(" ",t.lcZ(5,7,n.getButtonResourceKey(e.routerData,e.configuration))," ")}}function On(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"div",7)(3,"div",8)(4,"label"),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA(),t._UZ(7,"cx-item-counter",9),t.qZA(),t.TgZ(8,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3).ngIf,a=t.oxw();return t.KtG(a.onAddToCart(i.configuration,i.routerData))}),t.ALo(9,"cxTranslate"),t.ALo(10,"cxTranslate"),t.ALo(11,"cxTranslate"),t._UZ(12,"cx-icon",11),t.qZA()()(),t.BQk()}if(2&r){const e=t.oxw(3).ngIf,n=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,5,"configurator.addToCart.quantity")),t.xp6(2),t.Q6J("control",n.quantityControl),t.xp6(1),t.s9C("title",t.lcZ(11,12,n.getButtonResourceKey(e.routerData,e.configuration))),t.uIk("aria-label",t.lcZ(9,7,n.getButtonResourceKey(e.routerData,e.configuration))+" "+t.xi3(10,9,"configurator.a11y.addToCartPrices",n.extractConfigPrices(e.configuration))),t.xp6(4),t.Q6J("type",n.iconType.CART_PLUS)}}function wn(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3).ngIf,a=t.oxw();return t.KtG(a.onAddToCart(i.configuration,i.routerData))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(3).ngIf,n=t.oxw();t.xp6(1),t.uIk("aria-label",t.lcZ(2,2,n.getButtonResourceKey(e.routerData,e.configuration))+" "+t.xi3(3,4,"configurator.a11y.addToCartPrices",n.extractConfigPrices(e.configuration))),t.xp6(3),t.hij(" ",t.lcZ(5,7,n.getButtonResourceKey(e.routerData,e.configuration))," ")}}function En(r,o){if(1&r&&(t.ynx(0),t.YNc(1,On,13,14,"ng-container",0),t.YNc(2,wn,6,9,"ng-container",0),t.BQk()),2&r){const e=t.oxw(2).ngIf,n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.isCartEntry(e.routerData)),t.xp6(1),t.Q6J("ngIf",n.isCartEntry(e.routerData))}}function Un(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",3),t.YNc(2,Sn,6,9,"ng-container",4),t.YNc(3,En,3,2,"ng-container",4),t.qZA(),t.BQk()),2&r&&(t.xp6(2),t.Q6J("cxFeatureLevel","!6.1"),t.xp6(1),t.Q6J("cxFeatureLevel","6.1"))}function Fn(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.leaveConfigurationOverview())}),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.BQk()}2&r&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"configurator.addToCart.buttonDisplayOnly")," "))}function Rn(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.leaveConfigurationOverview())}),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.BQk()}2&r&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"configurator.addToCart.buttonClose")," "))}function Dn(r,o){1&r&&(t.TgZ(0,"div",12),t.YNc(1,Fn,4,3,"ng-container",4),t.YNc(2,Rn,4,3,"ng-container",4),t.qZA()),2&r&&(t.xp6(1),t.Q6J("cxFeatureLevel","!6.1"),t.xp6(1),t.Q6J("cxFeatureLevel","6.1"))}function Nn(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Un,4,2,"ng-container",1),t.YNc(2,Dn,3,2,"ng-template",null,2,t.W1O),t.BQk()),2&r){const e=o.ngIf,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.routerData.displayOnly)("ngIfElse",n)}}function Mn(r,o){if(1&r&&(t.TgZ(0,"div",2),t.ALo(1,"cxTranslate"),t._UZ(2,"cx-icon",3),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA()),2&r){const e=t.oxw(2);t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.uIk("aria-label",t.lcZ(1,4,"configurator.attribute.defaultRequiredMessage")),t.xp6(2),t.Q6J("type",e.iconType.ERROR),t.xp6(1),t.hij(" ",t.lcZ(4,6,"configurator.attribute.defaultRequiredMessage")," ")}}function Gn(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Mn,5,8,"div",1),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.showRequiredMessageForUserInput$))}}function Pn(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.attribute.defaultRequiredMessage")," "))}function Ln(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.attribute.singleSelectRequiredMessage")," "))}function Vn(r,o){if(1&r&&(t.TgZ(0,"div",2),t.ALo(1,"cxTranslate"),t.ALo(2,"cxTranslate"),t._UZ(3,"cx-icon",3),t.YNc(4,Pn,3,3,"ng-container",4),t.YNc(5,Ln,3,3,"ng-container",4),t.qZA()),2&r){const e=t.oxw(2);t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.uIk("aria-label",e.isUserInput(e.attribute)?t.lcZ(1,5,"configurator.attribute.defaultRequiredMessage"):t.lcZ(2,7,"configurator.attribute.singleSelectRequiredMessage")),t.xp6(3),t.Q6J("type",e.iconType.ERROR),t.xp6(1),t.Q6J("ngIf",e.isUserInput(e.attribute)),t.xp6(1),t.Q6J("ngIf",e.isDropDown(e.attribute))}}function qn(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Vn,6,9,"div",1),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.showRequiredMessageForUserInput$))}}function Zn(r,o){if(1&r&&(t.TgZ(0,"div",7),t._UZ(1,"cx-icon",8),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("type",e.iconTypes.WARNING),t.xp6(1),t.hij(" ",t.lcZ(3,2,"configurator.attribute.notVisibleAttributeMsg"),"\n")}}function kn(r,o){if(1&r&&t._UZ(0,"cx-icon",8),2&r){const e=t.oxw(2);t.Q6J("type",e.iconTypes.WARNING)}}const X=function(r){return{attribute:r}};function Bn(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.navigateToGroup())})("keydown.enter",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.navigateToGroup())}),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(3);t.xp6(1),t.uIk("aria-label",t.xi3(2,2,"configurator.a11y.navigateToConflict",t.VKq(7,X,e.attribute.label))),t.xp6(2),t.hij(" ",t.lcZ(4,5,e.getConflictMessageKey())," ")}}function Qn(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Bn,5,9,"ng-container",11),t.BQk()),2&r){const e=t.oxw(2),n=t.MAs(14);t.xp6(1),t.Q6J("ngIf",e.isNavigationToConflictEnabled())("ngIfElse",n)}}function Yn(r,o){if(1&r&&(t.TgZ(0,"div",9),t.ALo(1,"cxTranslate"),t.YNc(2,kn,1,1,"cx-icon",10),t.YNc(3,Qn,2,2,"ng-container",11),t.qZA()),2&r){const e=t.oxw(),n=t.MAs(12);t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.uIk("aria-live",e.isConflictResolutionActive()?"assertive":"off")("aria-atomic",!!e.isConflictResolutionActive())("role",e.isConflictResolutionActive()?"alert":null)("aria-label",e.isConflictResolutionActive()?t.lcZ(1,8,"configurator.a11y.conflictDetected"):""),t.xp6(2),t.Q6J("ngIf",e.isAttributeGroup()),t.xp6(1),t.Q6J("ngIf",e.isAttributeGroup())("ngIfElse",n)}}function Jn(r,o){if(1&r&&(t.TgZ(0,"div",13),t.ALo(1,"cxTranslate"),t._UZ(2,"cx-icon",14),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA()),2&r){const e=t.oxw();t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.uIk("aria-label",t.lcZ(1,4,e.getRequiredMessageKey())),t.xp6(2),t.Q6J("type",e.iconTypes.ERROR),t.xp6(1),t.hij(" ",t.lcZ(4,6,e.getRequiredMessageKey()),"\n")}}function $n(r,o){if(1&r&&t._UZ(0,"img",15),2&r){const e=t.oxw();t.s9C("src",null==e.image?null:e.image.url,t.LSH),t.s9C("alt",null==e.image?null:e.image.altText)}}function Kn(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.navigateToGroup())})("keydown.enter",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.navigateToGroup())}),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()}if(2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.getConflictMessageKey())," ")}}function Hn(r,o){if(1&r&&t.YNc(0,Kn,3,3,"a",16),2&r){const e=t.oxw();t.Q6J("ngIf",e.isNavigationToGroupEnabled)}}function Wn(r,o){if(1&r&&(t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.getConflictMessageKey())," ")}}const zn=function(r){return{param:r}};function jn(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij("\xa0... ",t.lcZ(2,1,"configurator.button.less"),""))}function Xn(r,o){1&r&&(t._uU(0),t.ALo(1,"cxTranslate")),2&r&&t.hij(" \xa0... ",t.lcZ(1,1,"configurator.button.more"),"")}function ti(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleShowMore())}),t.YNc(1,jn,3,3,"ng-container",4),t.YNc(2,Xn,2,3,"ng-template",null,5,t.W1O),t.qZA()}if(2&r){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.showHiddenText)("ngIfElse",e)}}const ei=function(r){return{item:r}};function ri(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"span",1),t.ALo(2,"cxTranslate"),t.YNc(3,ti,4,2,"button",2),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("innerHTML",e.textToShow,t.oJD),t.uIk("aria-label",t.xi3(2,3,"configurator.a11y.itemDescription",t.VKq(6,ei,e.productName))),t.xp6(2),t.Q6J("ngIf",e.showMore)}}function ni(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1),t.ALo(2,"cxTranslate"),t._uU(3),t.qZA(),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",e.styleClass),t.uIk("aria-label",t.lcZ(2,3,"configurator.a11y.valueSurcharge")),t.xp6(2),t.hij(" ",e.price," ")}}function ii(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",2),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxNumeric"),t.qZA(),t.TgZ(5,"div",3),t._uU(6),t.qZA(),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.uIk("aria-label",t.lcZ(2,3,"configurator.a11y.valueSurcharge")),t.xp6(2),t.hij(" ",e.quantityWithPrice(t.lcZ(4,5,null==e.formula?null:e.formula.quantity))," "),t.xp6(3),t.Oqu(e.priceTotal)}}function oi(r,o){if(1&r&&(t.ynx(0),t.YNc(1,ni,4,5,"ng-container",0),t.YNc(2,ii,7,7,"ng-container",0),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.displayPriceOnly()),t.xp6(1),t.Q6J("ngIf",e.displayQuantityAndPrice())}}function ai(r,o){if(1&r&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&r){const e=t.oxw().ngIf;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"configurator.attribute.id"),": ",e.code," ")}}function ui(r,o){if(1&r&&t._UZ(0,"cx-configurator-show-more",11),2&r){const e=t.oxw().ngIf;t.Q6J("text",e.description)("textSize",45)("productName",e.code)}}function ci(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-quantity",20),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onChangeQuantity(i))}),t.qZA()}if(2&r){const e=t.oxw(3);t.Q6J("quantityOptions",e.extractQuantityParameters())}}function si(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.onHandleDeselect())}),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()}if(2&r){const e=t.oxw(4).ngIf,n=t.oxw();t.Q6J("cxFocus",n.focusConfig),t.uIk("aria-label",n.getAriaLabelMultiSelected(e))("aria-describedby",n.createAttributeUiKey("label",n.attributeName)),t.xp6(1),t.hij(" ",t.lcZ(2,4,"configurator.button.remove")," ")}}function li(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.onHandleSelect())}),t.ALo(1,"async"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()}if(2&r){const e=t.oxw(4).ngIf,n=t.oxw();t.Q6J("disabled",n.productCardOptions.disableAllButtons||t.lcZ(1,5,n.loading$))("cxFocus",n.focusConfig),t.uIk("aria-label",n.getAriaLabelMultiUnselected(e))("aria-describedby",n.createAttributeUiKey("label",n.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(3,7,"configurator.button.add")," ")}}function pi(r,o){if(1&r&&(t.ynx(0),t.YNc(1,si,3,6,"button",24),t.YNc(2,li,4,9,"ng-template",null,25,t.W1O),t.BQk()),2&r){const e=t.MAs(3),n=t.oxw(4);t.xp6(1),t.Q6J("ngIf",null==n.productCardOptions||null==n.productCardOptions.productBoundValue?null:n.productCardOptions.productBoundValue.selected)("ngIfElse",e)}}function gi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.onHandleSelect())}),t.ALo(1,"async"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()}if(2&r){const e=t.oxw(4).ngIf,n=t.oxw();t.Q6J("disabled",n.productCardOptions.disableAllButtons||t.lcZ(1,5,n.loading$))("cxFocus",n.focusConfig),t.uIk("aria-label",n.getAriaLabelSingleUnselected(e))("aria-describedby",n.createAttributeUiKey("label",n.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(3,7,"configurator.button.select")," ")}}function di(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(7);return t.KtG(i.onHandleDeselect())}),t.ALo(1,"async"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()}if(2&r){const e=t.oxw(6).ngIf,n=t.oxw();t.Q6J("disabled",n.productCardOptions.hideRemoveButton||t.lcZ(1,5,n.loading$))("cxFocus",n.focusConfig),t.uIk("aria-label",n.getAriaLabelSingleSelected(e))("aria-describedby",n.createAttributeUiKey("label",n.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(3,7,"configurator.button.deselect")," ")}}function fi(r,o){if(1&r&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&r){const e=t.oxw(6).ngIf,n=t.oxw();t.xp6(1),t.hij(" ",n.getAriaLabelSingleSelectedNoButton(e)," ")}}function _i(r,o){if(1&r&&(t.ynx(0),t.YNc(1,di,4,9,"button",30),t.YNc(2,fi,2,1,"span",31),t.BQk()),2&r){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",!(null!=e.productCardOptions&&e.productCardOptions.hideRemoveButton)),t.xp6(1),t.Q6J("ngIf",null==e.productCardOptions?null:e.productCardOptions.hideRemoveButton)}}function Ci(r,o){if(1&r&&t.YNc(0,_i,3,2,"ng-container",0),2&r){const e=t.oxw(5);t.Q6J("ngIf",e.isValueCodeDefined(null==e.productCardOptions||null==e.productCardOptions.productBoundValue?null:e.productCardOptions.productBoundValue.valueCode))}}function vi(r,o){if(1&r&&(t.YNc(0,gi,4,9,"button",28),t.YNc(1,Ci,1,1,"ng-template",null,29,t.W1O)),2&r){const e=t.MAs(2),n=t.oxw(4);t.Q6J("ngIf",!(null!=n.productCardOptions&&null!=n.productCardOptions.productBoundValue&&n.productCardOptions.productBoundValue.selected))("ngIfElse",e)}}function hi(r,o){if(1&r&&(t.TgZ(0,"div",21),t.YNc(1,pi,4,2,"ng-container",22),t.YNc(2,vi,3,2,"ng-template",null,23,t.W1O),t.qZA()),2&r){const e=t.MAs(3),n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==n.productCardOptions?null:n.productCardOptions.multiSelect)("ngIfElse",e)}}function mi(r,o){if(1&r&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14),t.YNc(3,ci,1,1,"cx-configurator-attribute-quantity",15),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"cx-configurator-price",17),t.qZA()(),t.TgZ(6,"div",18),t.YNc(7,hi,4,2,"div",19),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.showQuantity),t.xp6(2),t.Q6J("formula",e.extractPriceFormulaParameters()),t.xp6(2),t.Q6J("ngIf",!(null!=e.productCardOptions&&e.productCardOptions.singleDropdown))}}function yi(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",34),t._UZ(2,"cx-icon",35),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attributeName)),t.xp6(2),t.hij(" ",t.lcZ(4,2,"configurator.attribute.deselectionNotPossible")," ")}}const bi=function(r){return{"cx-product-card-selected":r}};function Ti(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1),t.ALo(2,"cxTranslate"),t.TgZ(3,"div",2)(4,"div",3),t._UZ(5,"cx-media",4),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"p"),t._uU(9),t.qZA()(),t.YNc(10,ai,3,4,"div",7),t.YNc(11,ui,1,3,"cx-configurator-show-more",8),t.qZA()(),t.YNc(12,mi,8,3,"div",9),t.YNc(13,yi,5,4,"ng-container",0),t.qZA(),t.BQk()),2&r){const e=o.ngIf,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(11,bi,n.isProductCardSelected())),t.uIk("aria-label",t.xi3(2,8,"configurator.a11y.itemOfAttribute",t.VKq(13,X,n.productCardOptions.attributeLabel))),t.xp6(4),t.Q6J("container",null==e.images?null:e.images.PRIMARY),t.xp6(4),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",e.code),t.xp6(1),t.Q6J("ngIf",e.description&&e.code),t.xp6(1),t.Q6J("ngIf",!n.productCardOptions.singleDropdown||n.hasPriceDisplay()),t.xp6(1),t.Q6J("ngIf",n.showDeselectionNotPossible)}}function xi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",6),t.qZA()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attribute.quantity,!e.attribute.required)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function Ai(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(),u=a.$implicit,l=a.index,C=t.oxw();return t.KtG(C.onChangeValueQuantity(i,u.valueCode,l))}),t.qZA()}if(2&r){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("quantityOptions",n.extractQuantityParameters(e.quantity,n.allowZeroValueQuantity))}}const G=function(r){return{key:r}},Y=function(r,o,e){return{value:r,attribute:o,price:e}},Z=function(r,o){return{value:r,attribute:o}};function Ii(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",7)(2,"div",8)(3,"input",9),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect())}),t.ALo(4,"cxTranslate"),t.ALo(5,"cxTranslate"),t.ALo(6,"cxTranslate"),t.qZA(),t.TgZ(7,"label",10),t._uU(8),t.qZA()(),t.TgZ(9,"div",11),t._UZ(10,"cx-configurator-price",6),t.qZA()(),t.YNc(11,Ai,1,1,"cx-configurator-attribute-quantity",12),t.BQk()}if(2&r){const e=o.$implicit,n=o.index,i=t.oxw();t.xp6(3),t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)),t.s9C("name",i.createAttributeIdForConfigurator(i.attribute)),t.Q6J("cxFocus",t.VKq(21,G,i.attribute.name+"-"+e.name))("value",e.valueCode)("formControl",i.attributeCheckBoxForms[n]),t.uIk("aria-label",e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?e.valuePriceTotal&&0!==(null==e.valuePriceTotal?null:e.valuePriceTotal.value)?t.xi3(4,12,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(23,Y,e.valueDisplay,i.attribute.label,e.valuePriceTotal.formattedValue)):t.xi3(5,15,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(27,Y,e.valueDisplay,i.attribute.label,e.valuePrice.formattedValue)):t.xi3(6,18,"configurator.a11y.valueOfAttributeFull",t.WLB(31,Z,e.valueDisplay,i.attribute.label)))("aria-describedby",i.createAttributeUiKey("label",i.attribute.name)),t.xp6(4),t.s9C("id",i.createValueUiKey("label",i.attribute.name,e.valueCode)),t.s9C("for",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)),t.xp6(1),t.Oqu(i.getLabel(i.expMode,e.valueDisplay,e.valueCode)),t.xp6(2),t.Q6J("formula",i.extractValuePriceFormulaParameters(e)),t.xp6(1),t.Q6J("ngIf",e.selected&&i.withQuantity&&!i.withQuantityOnAttributeLevel)}}function Si(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"input",2),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.s9C("maxlength",e.attribute.maxlength),t.Q6J("formControl",e.attributeInputForm)("required",e.isRequired)("cxFocus",t.VKq(13,G,e.createAttributeIdForConfigurator(e.attribute))),t.uIk("required",e.attribute.required)("aria-label",e.isUserInputEmpty?t.xi3(2,7,"configurator.a11y.valueOfAttributeBlank",t.VKq(15,X,e.attribute.label)):t.xi3(3,10,"configurator.a11y.valueOfAttributeFull",t.WLB(17,Z,e.attribute.userInput,e.attribute.label)))("aria-describedby",e.createAttributeUiKey("label",e.attribute.name))}}const bt=function(r){return{"cx-required-error-msg ":r}};function Oi(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"input",3),t.ALo(2,"async"),t.ALo(3,"cxTranslate"),t.ALo(4,"cxTranslate"),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.ekj("ng-invalid",e.isRequired&&e.isUserInputEmpty),t.s9C("maxlength",e.attribute.maxlength),t.Q6J("formControl",e.attributeInputForm)("ngClass",t.VKq(16,bt,t.lcZ(2,8,e.showRequiredErrorMessage$)))("cxFocus",t.VKq(18,G,e.createAttributeIdForConfigurator(e.attribute))),t.uIk("aria-label",e.isUserInputEmpty?t.xi3(3,10,"configurator.a11y.valueOfAttributeBlank",t.VKq(20,X,e.attribute.label)):t.xi3(4,13,"configurator.a11y.valueOfAttributeFull",t.WLB(22,Z,e.attribute.userInput,e.attribute.label)))("aria-describedby",e.createAttributeUiKey("label",e.attribute.name))}}function wi(r,o){if(1&r&&(t.TgZ(0,"label",4),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.getHelpTextForInterval())}}function Ei(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",5),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onChange())}),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(1),t.s9C("maxlength",e.attribute.maxlength),t.Q6J("formControl",e.attributeInputForm)("required",e.isRequired)("cxFocus",t.VKq(8,G,e.createAttributeIdForConfigurator(e.attribute))),t.uIk("aria-describedby",e.mustDisplayValidationMessage()?e.createAttributeUiKey("label",e.attribute.name)+" "+e.createAttributeUiKey("attribute-msg",e.attribute.name):e.createAttributeUiKey("label",e.attribute.name))("role",e.attribute.dataType)("required",e.attribute.required)("aria-label",e.getAriaLabelComplete())}}function Ui(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",6),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onChange())}),t.ALo(2,"async"),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(1),t.ekj("ng-invalid",e.isRequired&&e.isUserInputEmpty),t.s9C("maxlength",e.attribute.maxlength),t.Q6J("formControl",e.attributeInputForm)("ngClass",t.VKq(12,bt,t.lcZ(2,10,e.showRequiredErrorMessage$)))("cxFocus",t.VKq(14,G,e.createAttributeIdForConfigurator(e.attribute))),t.uIk("aria-describedby",e.mustDisplayValidationMessage()?e.createAttributeUiKey("label",e.attribute.name)+" "+e.createAttributeUiKey("attribute-msg",e.attribute.name):e.createAttributeUiKey("label",e.attribute.name))("role",e.attribute.dataType)("required",e.attribute.required)("aria-label",e.getAriaLabelComplete())}}const qe=function(r){return{pattern:r}};function Fi(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-icon",8),t._uU(2),t.ALo(3,"cxTranslate"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("type",e.iconType.WARNING),t.xp6(1),t.hij(" ",t.xi3(3,2,"configurator.attribute.wrongNumericFormat",t.VKq(5,qe,e.numericFormatPattern))," ")}}function Ri(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-icon",8),t._uU(2),t.ALo(3,"cxTranslate"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("type",e.iconType.ERROR),t.xp6(1),t.hij(" ",t.xi3(3,2,"configurator.attribute.wrongNumericFormatMessage",t.VKq(5,qe,e.numericFormatPattern))," ")}}function Di(r,o){if(1&r&&(t.TgZ(0,"div",7),t.YNc(1,Fi,4,7,"ng-container",2),t.YNc(2,Ri,4,7,"ng-container",2),t.qZA()),2&r){const e=t.oxw();t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.xp6(1),t.Q6J("cxFeatureLevel","!6.2"),t.xp6(1),t.Q6J("cxFeatureLevel","6.2")}}function Ni(r,o){if(1&r&&(t.TgZ(0,"div",7),t._UZ(1,"cx-icon",8),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA()),2&r){const e=t.oxw();t.s9C("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),t.xp6(1),t.Q6J("type",e.iconType.ERROR),t.xp6(1),t.hij(" ",t.lcZ(3,3,"configurator.attribute.wrongIntervalFormat"),"\n")}}function Mi(r,o){if(1&r&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&r){const e=o.$implicit,n=t.oxw(3);t.Q6J("selected",e.selected)("label",n.getLabel(n.expMode,e.valueDisplay,e.valueCode,e))("value",e.valueCode),t.uIk("aria-label",n.getAriaLabel(e,n.attribute)),t.xp6(1),t.hij(" ",n.getLabel(n.expMode,e.valueDisplay,e.valueCode,e)," ")}}function Gi(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"select",7),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSelect(i.attributeDropDownForm.value))}),t.YNc(2,Mi,2,5,"option",8),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("formControl",e.attributeDropDownForm)("cxFocus",t.VKq(5,G,e.attribute.name)),t.uIk("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),t.xp6(1),t.Q6J("ngForOf",e.attribute.values)}}function Pi(r,o){if(1&r&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&r){const e=o.$implicit,n=t.oxw(3);t.Q6J("selected",e.selected)("label",n.getLabel(n.expMode,e.valueDisplay,e.valueCode,e))("value",e.valueCode),t.uIk("aria-label",n.getAriaLabel(e,n.attribute)),t.xp6(1),t.hij(" ",n.getLabel(n.expMode,e.valueDisplay,e.valueCode,e)," ")}}function Li(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"select",10),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSelect(i.attributeDropDownForm.value))}),t.ALo(2,"async"),t.YNc(3,Pi,2,5,"option",8),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("ngClass",t.VKq(8,bt,t.lcZ(2,6,e.showRequiredErrorMessage$)))("formControl",e.attributeDropDownForm)("cxFocus",t.VKq(10,G,e.attribute.name)),t.uIk("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),t.xp6(2),t.Q6J("ngForOf",e.attribute.values)}}function Vi(r,o){if(1&r&&(t.TgZ(0,"div",11),t._UZ(1,"cx-configurator-price",12),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("formula",e.extractValuePriceFormulaParameters(e.getSelectedValue()))}}const Tt=function(r){return{count:r}};function qi(r,o){if(1&r&&(t.TgZ(0,"div",3)(1,"label",4),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.YNc(4,Gi,3,7,"ng-container",5),t.YNc(5,Li,4,12,"ng-container",5),t.YNc(6,Vi,2,1,"div",6),t.qZA()),2&r){const e=t.oxw();let n;t.xp6(1),t.s9C("for",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.hij(" ",t.xi3(3,5,"configurator.a11y.listbox",t.VKq(8,Tt,e.attribute.values.length))," "),t.xp6(2),t.Q6J("cxFeatureLevel","!6.2"),t.xp6(1),t.Q6J("cxFeatureLevel","6.2"),t.xp6(1),t.Q6J("ngIf",!e.withQuantity&&(null==(n=e.getSelectedValue())?null:n.valuePrice))}}function Zi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",13)(1,"cx-configurator-attribute-quantity",14),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i,a.attributeDropDownForm))}),t.qZA(),t._UZ(2,"cx-configurator-price",12),t.qZA()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attributeDropDownForm)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function ki(r,o){1&r&&(t._UZ(0,"cx-configurator-attribute-numeric-input-field",15),t.ALo(1,"cxTranslate")),2&r&&t.uIk("aria-label",t.lcZ(1,1,"configurator.a11y.additionalValue"))}function Bi(r,o){1&r&&(t._UZ(0,"cx-configurator-attribute-input-field",15),t.ALo(1,"cxTranslate")),2&r&&t.uIk("aria-label",t.lcZ(1,1,"configurator.a11y.additionalValue"))}function Qi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onChangeAttributeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",6),t.qZA()}if(2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attribute.quantity)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function Yi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-product-card",7),t.NdJ("handleDeselect",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onDeselect(i))})("handleQuantity",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onChangeValueQuantity(i))})("handleSelect",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSelect(i))}),t.ALo(1,"async"),t.ALo(2,"async"),t.qZA()}if(2&r){const e=o.$implicit,n=o.index,i=t.oxw(2);t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)),t.Q6J("productCardOptions",i.extractProductCardParameters(t.lcZ(1,2,i.loading$),t.lcZ(2,4,i.preventAction$),e,n))}}function Ji(r,o){if(1&r&&(t.TgZ(0,"div",1),t.YNc(1,Qi,3,2,"div",2),t.YNc(2,Yi,3,6,"cx-configurator-attribute-product-card",3),t.qZA()),2&r){const e=t.oxw();t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.Q6J("ngIf",e.withQuantityOnAttributeLevel),t.xp6(1),t.Q6J("ngForOf",null==e.attribute?null:e.attribute.values)}}function $i(r,o){if(1&r&&t._UZ(0,"img",9),2&r){const e=o.ngIf;t.s9C("src",null==e?null:e.url,t.LSH),t.s9C("alt",null==e?null:e.altText)}}function Ki(r,o){1&r&&t._UZ(0,"div",10)}function Hi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",2)(1,"input",3),t.NdJ("click",function(){const a=t.CHM(e).index,u=t.oxw();return t.KtG(u.onSelect(a))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t.YNc(6,$i,1,2,"img",6),t.YNc(7,Ki,1,0,"div",7),t._uU(8),t._UZ(9,"cx-configurator-price",8),t.qZA()()()}if(2&r){const e=o.$implicit,n=o.index,i=t.oxw();t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)),t.xp6(1),t.s9C("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)+"-input"),t.s9C("name",i.createAttributeIdForConfigurator(i.attribute)),t.Q6J("value",e.valueCode)("formControl",i.attributeCheckBoxForms[n])("cxFocus",t.VKq(21,G,i.attribute.name+"-"+e.name)),t.uIk("aria-label",e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?t.xi3(2,15,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(23,Y,e.valueDisplay,i.attribute.label,e.valuePrice.formattedValue)):t.xi3(3,18,"configurator.a11y.valueOfAttributeFull",t.WLB(27,Z,e.valueDisplay,i.attribute.label)))("aria-describedby",i.createAttributeUiKey("label",i.attribute.name))("checked",i.attributeCheckBoxForms[n].value?"checked":null),t.xp6(4),t.s9C("id",i.createValueUiKey("label",i.attribute.name,e.valueCode)),t.s9C("for",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode)+"-input"),t.xp6(1),t.Q6J("ngIf",i.getImage(e)),t.xp6(1),t.Q6J("ngIf",!i.getImage(e)),t.xp6(1),t.hij(" ",i.getLabel(i.expMode,e.valueDisplay,e.valueCode)," "),t.xp6(1),t.Q6J("formula",i.extractValuePriceFormulaParameters(e))}}function Wi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",5)(1,"cx-configurator-attribute-quantity",6),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",7),t.qZA()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters()),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function zi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"input",10),t.NdJ("change",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onSelect(a.valueCode))}),t.qZA(),t.TgZ(3,"label",11),t._uU(4),t.qZA()(),t.TgZ(5,"div",12),t._UZ(6,"cx-configurator-price",7),t.qZA()()}if(2&r){const e=o.$implicit,n=t.oxw();t.xp6(2),t.s9C("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),t.s9C("name",n.createAttributeIdForConfigurator(n.attribute)),t.Q6J("formControl",n.attributeRadioButtonForm)("value",e.valueCode)("cxFocus",t.VKq(14,G,n.attribute.name+"-"+e.name)),t.uIk("required",n.attribute.required)("name",n.createAttributeIdForConfigurator(n.attribute))("aria-label",n.getAriaLabel(e,n.attribute))("checked",n.attributeRadioButtonForm.value===e.valueCode?"checked":null)("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)),t.xp6(1),t.s9C("id",n.createValueUiKey("label",n.attribute.name,e.valueCode)),t.s9C("for",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),t.xp6(1),t.Oqu(n.getLabel(n.expMode,e.valueDisplay,e.valueCode)),t.xp6(2),t.Q6J("formula",n.extractValuePriceFormulaParameters(e))}}function ji(r,o){1&r&&t._UZ(0,"cx-configurator-attribute-numeric-input-field",13)}function Xi(r,o){1&r&&t._UZ(0,"cx-configurator-attribute-input-field",13)}function to(r,o){if(1&r&&(t.TgZ(0,"div",5)(1,"span",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7)(4,"label",8),t._uU(5),t.qZA()(),t.TgZ(6,"div",9),t._UZ(7,"cx-configurator-price",10),t.qZA()()),2&r){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.s9C("id",n.createValueUiKey("label",n.attribute.name,e.valueCode)),t.xp6(1),t.hij(" ",n.getAriaLabel(n.attribute,e)," "),t.xp6(2),t.s9C("id",n.createValueUiKey("label",n.attribute.name,e.valueCode)),t.xp6(1),t.Oqu(n.getLabel(n.expMode,e.valueDisplay,e.valueCode)),t.xp6(2),t.Q6J("formula",n.extractValuePriceFormulaParameters(e))}}function eo(r,o){if(1&r&&(t.ynx(0),t.YNc(1,to,8,5,"div",4),t.BQk()),2&r){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.selected)}}function ro(r,o){if(1&r&&(t.ynx(0),t.YNc(1,eo,2,1,"ng-container",3),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.attribute.values)}}function no(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"span",6),t._uU(2),t.qZA(),t.TgZ(3,"div",12)(4,"span",13),t._uU(5),t.qZA()(),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createValueUiKey("label",e.attribute.name,e.attribute.selectedSingleValue)),t.xp6(1),t.hij(" ",e.getAriaLabel(e.attribute)," "),t.xp6(3),t.Oqu(e.attribute.selectedSingleValue)}}function io(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"span",6),t._uU(2),t.qZA(),t.TgZ(3,"div",12)(4,"span",13),t._uU(5),t.qZA()(),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createValueUiKey("label",e.attribute.name,e.attribute.userInput)),t.xp6(1),t.hij(" ",e.getAriaLabel(e.attribute)," "),t.xp6(3),t.Oqu(e.attribute.userInput)}}function oo(r,o){if(1&r&&(t.YNc(0,no,6,3,"ng-container",11),t.YNc(1,io,6,3,"ng-container",11)),2&r){const e=t.oxw();t.Q6J("ngIf",e.attribute.selectedSingleValue),t.xp6(1),t.Q6J("ngIf",e.attribute.userInput)}}function ao(r,o){if(1&r&&(t.TgZ(0,"option",8),t.ALo(1,"cxTranslate"),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t._uU(4),t.qZA()),2&r){const e=o.$implicit,n=t.oxw(3);let i;t.Q6J("label",n.getLabel(!1,e.valueDisplay,void 0,e))("selected",e.selected)("value",e.valueCode)("value",e.valueCode),t.uIk("aria-label",n.isRetractValue(e.valueCode)?t.xi3(1,6,"configurator.a11y.forAttribute",t.WLB(15,Z,e.valueDisplay,n.attribute.label)):e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?t.xi3(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",t.kEZ(18,Y,e.valueDisplay,n.attribute.label,null!==(i=null==e.valuePriceTotal?null:e.valuePriceTotal.formattedValue)&&void 0!==i?i:0)):t.xi3(3,12,"configurator.a11y.selectedValueOfAttributeFull",t.WLB(22,Z,e.valueDisplay,n.attribute.label))),t.xp6(4),t.hij(" ",n.getLabel(!1,e.valueDisplay,void 0,e)," ")}}function uo(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"select",6),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSelect(i.attributeDropDownForm.value))}),t.YNc(2,ao,5,25,"option",7),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("formControl",e.attributeDropDownForm)("cxFocus",t.VKq(5,G,e.attribute.name)),t.uIk("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),t.xp6(1),t.Q6J("ngForOf",e.attribute.values)}}function co(r,o){if(1&r&&(t.TgZ(0,"option",8),t.ALo(1,"cxTranslate"),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t._uU(4),t.qZA()),2&r){const e=o.$implicit,n=t.oxw(3);let i;t.Q6J("label",n.getLabel(!1,e.valueDisplay,void 0,e))("selected",e.selected)("value",e.valueCode)("value",e.valueCode),t.uIk("aria-label",n.isRetractValue(e.valueCode)?t.xi3(1,6,"configurator.a11y.forAttribute",t.WLB(15,Z,e.valueDisplay,n.attribute.label)):e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?t.xi3(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",t.kEZ(18,Y,e.valueDisplay,n.attribute.label,null!==(i=null==e.valuePriceTotal?null:e.valuePriceTotal.formattedValue)&&void 0!==i?i:0)):t.xi3(3,12,"configurator.a11y.selectedValueOfAttributeFull",t.WLB(22,Z,e.valueDisplay,n.attribute.label))),t.xp6(4),t.hij(" ",n.getLabel(!1,e.valueDisplay,void 0,e)," ")}}function so(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"select",9),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSelect(i.attributeDropDownForm.value))}),t.ALo(2,"async"),t.YNc(3,co,5,25,"option",7),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(2);t.xp6(1),t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.Q6J("ngClass",t.VKq(8,bt,t.lcZ(2,6,e.showRequiredErrorMessage$)))("formControl",e.attributeDropDownForm)("cxFocus",t.VKq(10,G,e.attribute.name)),t.uIk("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),t.xp6(2),t.Q6J("ngForOf",e.attribute.values)}}function lo(r,o){if(1&r&&(t.TgZ(0,"div",3)(1,"label",4),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.YNc(4,uo,3,7,"ng-container",5),t.YNc(5,so,4,12,"ng-container",5),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.s9C("for",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.hij(" ",t.xi3(3,4,"configurator.a11y.listbox",t.VKq(7,Tt,null==e.attribute.values?null:e.attribute.values.length))," "),t.xp6(2),t.Q6J("cxFeatureLevel","!6.2"),t.xp6(1),t.Q6J("cxFeatureLevel","6.2")}}function po(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-product-card",10),t.NdJ("handleDeselect",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSelect(i.RETRACT_VALUE_CODE))}),t.qZA()}if(2&r){const e=t.oxw();t.s9C("id",e.createAttributeValueIdForConfigurator(e.attribute,e.selectedValue.valueCode)),t.Q6J("productCardOptions",e.extractProductCardParameters())}}function go(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",11)(1,"cx-configurator-attribute-quantity",12),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeQuantity(i,a.attributeDropDownForm))}),t.qZA(),t._UZ(2,"cx-configurator-price",13),t.qZA()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters(e.attributeDropDownForm)),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function fo(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),t.NdJ("changeQuantity",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onChangeQuantity(i))}),t.qZA(),t._UZ(2,"cx-configurator-price",6),t.qZA()}if(2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("quantityOptions",e.extractQuantityParameters()),t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters())}}function _o(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"cx-configurator-attribute-product-card",7),t.NdJ("handleDeselect",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSelect(""))})("handleSelect",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSelect(i))}),t.qZA()}if(2&r){const e=o.$implicit,n=o.index,i=t.oxw(2);t.Q6J("id",i.createAttributeValueIdForConfigurator(i.attribute,e.valueCode))("productCardOptions",i.extractProductCardParameters(e,n))}}function Co(r,o){if(1&r&&(t.TgZ(0,"div",1),t.YNc(1,fo,3,2,"div",2),t.YNc(2,_o,1,2,"cx-configurator-attribute-product-card",3),t.qZA()),2&r){const e=t.oxw();t.s9C("id",e.createAttributeIdForConfigurator(e.attribute)),t.xp6(1),t.Q6J("ngIf",e.withQuantity),t.xp6(1),t.Q6J("ngForOf",null==e.attribute?null:e.attribute.values)}}function vo(r,o){if(1&r&&t._UZ(0,"img",9),2&r){const e=t.oxw().$implicit,n=t.oxw();let i,a;t.s9C("src",null==(i=n.getImage(e))?null:i.url,t.LSH),t.s9C("alt",null==(a=n.getImage(e))?null:a.altText)}}function ho(r,o){1&r&&t._UZ(0,"div",10)}function mo(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",2)(1,"input",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onClick(a.valueCode))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t.YNc(6,vo,1,2,"img",6),t.YNc(7,ho,1,0,"div",7),t._uU(8),t._UZ(9,"cx-configurator-price",8),t.qZA()()()}if(2&r){const e=o.$implicit,n=t.oxw();t.s9C("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),t.xp6(1),t.s9C("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)+"-input"),t.s9C("name",n.createAttributeIdForConfigurator(n.attribute)),t.Q6J("value",e.valueCode)("formControl",n.attributeRadioButtonForm)("value",e.valueCode)("cxFocus",t.VKq(25,G,n.attribute.name+"-"+e.name)),t.uIk("name",n.createAttributeIdForConfigurator(n.attribute))("required",n.attribute.required)("checked",n.attributeRadioButtonForm.value===e.valueCode?"checked":null)("aria-checked",n.attributeRadioButtonForm.value===e.valueCode?"true":"false")("aria-label",e.valuePrice&&0!==(null==e.valuePrice?null:e.valuePrice.value)?t.xi3(2,19,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(27,Y,e.valueDisplay,n.attribute.label,e.valuePrice.formattedValue)):t.xi3(3,22,"configurator.a11y.valueOfAttributeFull",t.WLB(31,Z,e.valueDisplay,n.attribute.label)))("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)),t.xp6(4),t.s9C("id",n.createValueUiKey("label",n.attribute.name,e.valueCode)),t.s9C("for",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)+"-input"),t.xp6(1),t.Q6J("ngIf",n.getImage(e)),t.xp6(1),t.Q6J("ngIf",!n.getImage(e)),t.xp6(1),t.hij(" ",n.getLabel(n.expMode,e.valueDisplay,e.valueCode)," "),t.xp6(1),t.Q6J("formula",n.extractValuePriceFormulaParameters(e))}}function yo(r,o){1&r&&(t.TgZ(0,"span",8),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.header.multipleWarnings"),""))}function bo(r,o){1&r&&(t.ynx(0),t._UZ(1,"cx-icon",10),t.BQk())}function To(r,o){1&r&&(t.ynx(0),t._UZ(1,"cx-icon",11),t.BQk())}function xo(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.toggleWarnings())}),t._uU(1),t.ALo(2,"cxTranslate"),t.YNc(3,bo,2,0,"ng-container",0),t.YNc(4,To,2,0,"ng-container",0),t.qZA()}if(2&r){const e=t.oxw(3);t.uIk("aria-expanded",e.showWarnings),t.xp6(1),t.hij(" ",t.lcZ(2,4,"configurator.header.reviewWarnings")," "),t.xp6(2),t.Q6J("ngIf",!e.showWarnings),t.xp6(1),t.Q6J("ngIf",e.showWarnings)}}function Ao(r,o){if(1&r&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&r){const e=o.$implicit,n=t.oxw(2).ngIf,i=t.oxw();t.ekj("open",i.showWarnings||1===(null==n||null==n.warningMessages?null:n.warningMessages.length)),t.xp6(1),t.hij(" ",e," ")}}function Io(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1)(2,"span",2),t._UZ(3,"cx-icon",3),t.qZA(),t.YNc(4,yo,3,3,"span",4),t.YNc(5,xo,5,6,"button",5),t.TgZ(6,"div",6),t.YNc(7,Ao,2,3,"div",7),t.qZA()(),t.BQk()),2&r){const e=t.oxw().ngIf;let n,i;t.xp6(4),t.Q6J("ngIf",(null!==(n=null==e||null==e.warningMessages?null:e.warningMessages.length)&&void 0!==n?n:0)>1),t.xp6(1),t.Q6J("ngIf",(null!==(i=null==e||null==e.warningMessages?null:e.warningMessages.length)&&void 0!==i?i:0)>1),t.xp6(1),t.ekj("inline",1===(null==e||null==e.warningMessages?null:e.warningMessages.length)),t.xp6(1),t.Q6J("ngForOf",e.warningMessages)}}function So(r,o){1&r&&(t.TgZ(0,"span",19),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.header.multipleErrors"),""))}function Oo(r,o){1&r&&(t.ynx(0),t._UZ(1,"cx-icon",10),t.BQk())}function wo(r,o){1&r&&(t.ynx(0),t._UZ(1,"cx-icon",11),t.BQk())}function Eo(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.toggleErrors())}),t._uU(1),t.ALo(2,"cxTranslate"),t.YNc(3,Oo,2,0,"ng-container",0),t.YNc(4,wo,2,0,"ng-container",0),t.qZA()}if(2&r){const e=t.oxw(3);t.uIk("aria-expanded",e.showErrors),t.xp6(1),t.hij(" ",t.lcZ(2,4,"configurator.header.reviewErrors")," "),t.xp6(2),t.Q6J("ngIf",!e.showErrors),t.xp6(1),t.Q6J("ngIf",e.showErrors)}}function Uo(r,o){if(1&r&&(t.TgZ(0,"div",21),t._uU(1),t.qZA()),2&r){const e=o.$implicit,n=t.oxw(2).ngIf,i=t.oxw();t.ekj("open",i.showErrors||1===(null==n||null==n.errorMessages?null:n.errorMessages.length)),t.xp6(1),t.hij(" ",e," ")}}function Fo(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",13)(2,"span",2),t._UZ(3,"cx-icon",14),t.qZA(),t.YNc(4,So,3,3,"span",15),t.YNc(5,Eo,5,6,"button",16),t.TgZ(6,"div",17),t.YNc(7,Uo,2,3,"div",18),t.qZA()(),t.BQk()),2&r){const e=t.oxw().ngIf;let n,i;t.xp6(4),t.Q6J("ngIf",(null!==(n=null==e||null==e.errorMessages?null:e.errorMessages.length)&&void 0!==n?n:0)>1),t.xp6(1),t.Q6J("ngIf",(null!==(i=null==e||null==e.errorMessages?null:e.errorMessages.length)&&void 0!==i?i:0)>1),t.xp6(1),t.ekj("inline",1===(null==e||null==e.errorMessages?null:e.errorMessages.length)),t.xp6(1),t.Q6J("ngForOf",e.errorMessages)}}function Ro(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Io,8,5,"ng-container",0),t.YNc(2,Fo,8,5,"ng-container",0),t.BQk()),2&r){const e=o.ngIf;let n,i;t.xp6(1),t.Q6J("ngIf",(null!==(n=null==e||null==e.warningMessages?null:e.warningMessages.length)&&void 0!==n?n:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(i=null==e||null==e.errorMessages?null:e.errorMessages.length)&&void 0!==i?i:0)>0)}}function Do(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-icon",1),t._uU(2),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("type",e.iconTypes.WARNING),t.xp6(1),t.hij(" ",e.currentGroup.name,"\n")}}const qt=function(r){return{number:r}};function No(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()(),t.TgZ(7,"span",2),t._uU(8),t.ALo(9,"cxTranslate"),t.qZA(),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.uIk("aria-label",t.xi3(2,3,"configurator.conflict.suggestionTitle",t.VKq(15,qt,e.suggestionNumber+1))+" "+t.xi3(3,6,"configurator.conflict.suggestionText",t.VKq(17,X,e.attribute.label))),t.xp6(4),t.Oqu(t.xi3(6,9,"configurator.conflict.suggestionTitle",t.VKq(19,qt,e.suggestionNumber+1))),t.xp6(3),t.Oqu(t.xi3(9,12,"configurator.conflict.suggestionText",t.VKq(21,X,e.attribute.label)))}}function Mo(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.exit")," "))}function Go(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.exitMobile")," "))}function Po(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Mo,3,3,"ng-container",0),t.ALo(2,"async"),t.YNc(3,Go,3,3,"ng-container",0),t.ALo(4,"async"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.isDesktop())),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,e.isMobile()))}}function Lo(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.cancelConfigurationMobile")," "))}function Vo(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.button.cancelConfiguration")," "))}function qo(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Lo,3,3,"ng-container",0),t.ALo(2,"async"),t.YNc(3,Vo,3,3,"ng-container",0),t.ALo(4,"async"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.isMobile())),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,e.isDesktop()))}}function Zo(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",1),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exitConfiguration())}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.YNc(4,Po,5,6,"ng-container",0),t.YNc(5,qo,5,6,"ng-container",0),t.qZA(),t.BQk()}if(2&r){const e=o.ngIf;t.xp6(1),t.uIk("title",e.routerData.isOwnerCartEntry?t.lcZ(2,3,"configurator.button.cancelConfiguration"):t.lcZ(3,5,"configurator.button.exit")),t.xp6(3),t.Q6J("ngIf",!e.routerData.isOwnerCartEntry),t.xp6(1),t.Q6J("ngIf",e.routerData.isOwnerCartEntry)}}function ko(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-conflict-description",3),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("currentGroup",e.group)}}function Bo(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-conflict-suggestion",5),t.BQk()),2&r){const e=t.oxw(),n=e.$implicit,i=e.index,a=t.oxw();t.xp6(1),t.Q6J("currentGroup",a.group)("attribute",n)("suggestionNumber",i)}}const Qo=function(r,o,e,n,i,a){return{componentKey:"Header",attribute:r,owner:o,group:e,language:n,expMode:i,isNavigationToGroupEnabled:a}},Yo=function(r,o,e,n,i,a){return{componentKey:r,attribute:o,owner:e,group:n,language:i,expMode:a}},Jo=function(r,o,e,n,i){return{componentKey:"Footer",attribute:r,owner:o,group:e,language:n,expMode:i}};function $o(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"div",6),t.ALo(2,"async"),t._UZ(3,"div",6),t.ALo(4,"async"),t._UZ(5,"div",6),t.ALo(6,"async"),t.BQk()),2&r){const e=o.ngIf,n=t.oxw().$implicit,i=t.oxw();let a,u,l;t.xp6(1),t.Q6J("cxConfiguratorAttributeComponent",t.HTZ(9,Qo,n,i.owner,i.group,e,null!==(a=t.lcZ(2,3,i.expMode))&&void 0!==a&&a,i.isNavigationToGroupEnabled)),t.xp6(2),t.Q6J("cxConfiguratorAttributeComponent",t.HTZ(16,Yo,i.getComponentKey(n),n,i.owner,i.group,e,null!==(u=t.lcZ(4,5,i.expMode))&&void 0!==u&&u)),t.xp6(2),t.Q6J("cxConfiguratorAttributeComponent",t.qbA(23,Jo,n,i.owner,i.group,e,null!==(l=t.lcZ(6,7,i.expMode))&&void 0!==l&&l))}}function Ko(r,o){if(1&r&&(t.TgZ(0,"div",4),t.YNc(1,Bo,2,3,"ng-container",1),t.YNc(2,$o,7,29,"ng-container",1),t.ALo(3,"async"),t.qZA()),2&r){const e=o.$implicit,n=t.oxw();t.ekj("cx-hidden",!e.visible),t.xp6(1),t.Q6J("ngIf",n.isConflictGroupType(n.group.groupType)),t.xp6(1),t.Q6J("ngIf",t.lcZ(3,4,n.activeLanguage$))}}function Ho(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-group",11),t.BQk()),2&r){const e=o.ngIf,n=t.oxw().ngIf;t.xp6(1),t.Q6J("group",e)("owner",n.owner)("isNavigationToGroupEnabled",!1)}}function Wo(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Ho,2,3,"ng-container",10),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.conflictGroup$))}}function zo(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-group",3),t.BQk()),2&r){const e=o.ngIf,n=t.oxw(2).ngIf,i=t.oxw();t.xp6(1),t.Q6J("group",e)("owner",n.owner)("isNavigationToGroupEnabled",i.isNavigationToGroupEnabled(n))}}function jo(r,o){if(1&r&&(t.ynx(0),t.YNc(1,zo,2,3,"ng-container",2),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.currentGroup$))}}function Xo(r,o){if(1&r&&(t.ynx(0),t.YNc(1,jo,3,3,"ng-container",0),t.BQk()),2&r){const e=o.ngIf,n=t.oxw(),i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!n.isDialogActive(e))("ngIfElse",i)}}function ta(r,o){1&r&&(t.ynx(0),t._UZ(1,"div",20),t.BQk())}function ea(r,o){if(1&r&&(t.TgZ(0,"div",15)(1,"div",16),t._UZ(2,"div",17)(3,"div",18),t.qZA(),t.TgZ(4,"div",19),t.YNc(5,ta,2,0,"ng-container",2),t.qZA()()),2&r){const e=o.index;t.xp6(5),t.Q6J("ngIf",0!==e)}}const ot=function(){return[0,1,2]};function ra(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",5)(2,"div",6),t._UZ(3,"div",7)(4,"div",8),t.qZA(),t.TgZ(5,"div",9),t._UZ(6,"div",10)(7,"div",11),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6),t._UZ(10,"div",7)(11,"div",8),t.TgZ(12,"div",12),t._UZ(13,"div",13),t.qZA()(),t.TgZ(14,"div",9),t.YNc(15,ea,6,1,"div",14),t.qZA()(),t.BQk()),2&r&&(t.xp6(15),t.Q6J("ngForOf",t.DdM(1,ot)))}function na(r,o){1&r&&t.YNc(0,ra,16,2,"ng-container",4),2&r&&t.Q6J("ngForOf",t.DdM(1,ot))}const ia=["groupItem"],oa=function(){return{key:"cx-menu-back"}};function aa(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",8,9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(7);return t.KtG(i.navigateUp())})("keydown",function(i){t.CHM(e);const a=t.oxw(2),u=a.index,l=a.$implicit,C=t.oxw().ngIf,g=t.oxw(4);return t.KtG(g.switchGroupOnArrowPress(i,u,l,C))}),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t._UZ(4,"cx-icon",10),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()}if(2&r){const e=t.oxw().ngIf,n=t.oxw(6);t.Q6J("cxFocus",t.DdM(11,oa)),t.uIk("aria-selected",!1)("aria-label",n.isConflictGroupTypeAllowingUndefined(e.groupType)?t.lcZ(2,5,"configurator.a11y.conflictBack"):t.lcZ(3,7,"configurator.a11y.groupBack")),t.xp6(4),t.Q6J("type",n.iconTypes.CARET_LEFT),t.xp6(1),t.hij(" ",t.lcZ(6,9,"configurator.button.back")," ")}}function ua(r,o){if(1&r&&(t.ynx(0),t.YNc(1,aa,7,12,"button",7),t.BQk()),2&r){const e=o.ngIf,n=t.oxw().index;t.xp6(1),t.Q6J("ngIf",null!==e&&0===n)}}function ca(r,o){if(1&r&&(t._UZ(0,"cx-icon",21),t.ALo(1,"cxTranslate"),t.ALo(2,"cxTranslate")),2&r){const e=t.oxw(2).$implicit,n=t.oxw(5);t.s9C("id",n.createIconId(n.iconTypes.CARET_RIGHT,e.id)),t.s9C("title",t.lcZ(2,6,"configurator.icon.subgroup")),t.Q6J("type",n.iconTypes.CARET_RIGHT),t.uIk("aria-label",t.lcZ(1,4,"configurator.a11y.iconSubGroup"))}}function sa(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",11,9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(5);return t.KtG(a.click(i))})("keydown",function(i){t.CHM(e);const a=t.oxw(),u=a.index,l=a.$implicit,C=t.oxw().ngIf,g=t.oxw(4);return t.KtG(g.switchGroupOnArrowPress(i,u,l,C))}),t.ALo(3,"async"),t.ALo(4,"async"),t.TgZ(5,"span",12),t._uU(6),t.qZA(),t.TgZ(7,"div",13)(8,"div",14),t._uU(9),t.qZA(),t.TgZ(10,"div",15),t._UZ(11,"cx-icon",16),t.ALo(12,"cxTranslate"),t.ALo(13,"cxTranslate"),t.qZA(),t.TgZ(14,"div",15),t._UZ(15,"cx-icon",17),t.ALo(16,"cxTranslate"),t.ALo(17,"cxTranslate"),t._UZ(18,"cx-icon",18),t.ALo(19,"cxTranslate"),t.ALo(20,"cxTranslate"),t.qZA(),t.TgZ(21,"div",19),t.YNc(22,ca,3,8,"cx-icon",20),t.qZA()()(),t.BQk()}if(2&r){const e=t.oxw().$implicit,n=t.oxw().ngIf,i=t.oxw(3).ngIf,a=t.oxw();t.xp6(1),t.ekj("DISABLED",!e.configurable)("cx-menu-conflict",a.isConflictGroupTypeAllowingUndefined(e.groupType))("active",a.isGroupSelected(e.id,n.id))("disable",!e.configurable),t.s9C("id",e.id),t.s9C("ngClass",t.lcZ(3,32,a.getGroupStatusStyles(e,i))),t.Q6J("cxFocus",t.VKq(48,G,e.id))("tabindex",a.getTabIndex(e,n.id)),t.uIk("aria-describedby",t.lcZ(4,34,a.getAriaDescribedby(e,i)))("aria-selected",a.isGroupSelected(e.id,n.id))("aria-controls",a.isGroupSelected(e.id,n.id)?a.createAriaControls(e.id):null)("aria-label",a.getAriaLabel(e)),t.xp6(4),t.s9C("title",e.description),t.xp6(1),t.Oqu(a.getGroupMenuTitle(e)),t.xp6(3),t.hij(" ",a.getConflictNumber(e)," "),t.xp6(2),t.s9C("id",a.createIconId(a.iconTypes.WARNING,e.id)),t.s9C("title",t.lcZ(13,38,"configurator.icon.groupConflict")),t.Q6J("type",a.iconTypes.WARNING),t.uIk("aria-label",t.lcZ(12,36,"configurator.a11y.iconConflict")),t.xp6(4),t.s9C("id",a.createIconId(a.iconTypes.ERROR,e.id)),t.s9C("title",t.lcZ(17,42,"configurator.icon.groupIncomplete")),t.Q6J("type",a.iconTypes.ERROR),t.uIk("aria-label",t.lcZ(16,40,"configurator.a11y.iconIncomplete")),t.xp6(3),t.s9C("id",a.createIconId(a.iconTypes.SUCCESS,e.id)),t.s9C("title",t.lcZ(20,46,"configurator.icon.groupComplete")),t.Q6J("type",a.iconTypes.SUCCESS),t.uIk("aria-label",t.lcZ(19,44,"configurator.a11y.iconComplete")),t.xp6(4),t.Q6J("ngIf",a.hasSubGroups(e))}}function la(r,o){if(1&r&&(t.ynx(0),t.YNc(1,ua,2,1,"ng-container",5),t.ALo(2,"async"),t.YNc(3,sa,23,50,"ng-container",5),t.ALo(4,"async"),t.BQk()),2&r){const e=o.$implicit,n=t.oxw(5);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.displayedParentGroup$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,n.displayMenuItem(e)))}}function pa(r,o){if(1&r&&(t.ynx(0),t.YNc(1,la,5,6,"ng-container",6),t.BQk()),2&r){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function ga(r,o){if(1&r&&(t.ynx(0),t.YNc(1,pa,2,1,"ng-container",5),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.currentGroup$))}}function da(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",2)(2,"span",3),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"cxTranslate"),t.qZA(),t.YNc(8,ga,3,3,"ng-container",5),t.ALo(9,"async"),t.qZA(),t.BQk()),2&r){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"configurator.a11y.listOfGroups")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"configurator.a11y.inListOfGroups")," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,7,e.displayedGroups$))}}function fa(r,o){if(1&r&&(t.ynx(0),t.YNc(1,da,10,9,"ng-container",0),t.BQk()),2&r){const e=o.ngIf,n=t.oxw(),i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!n.isDialogActive(e))("ngIfElse",i)}}function _a(r,o){1&r&&(t.TgZ(0,"div",24),t._UZ(1,"div",25),t.qZA())}const Ca=function(){return[0,1,2,3,4,5,6,7,8,9]};function va(r,o){1&r&&(t.TgZ(0,"div",22),t.YNc(1,_a,2,0,"div",23),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,Ca)))}function ha(r,o){1&r&&(t.ynx(0),t._UZ(1,"cx-hamburger-menu"),t.BQk())}function ma(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",2),t.YNc(2,ha,2,0,"ng-container",3),t.ALo(3,"async"),t._uU(4),t.qZA(),t.BQk()),2&r){const e=o.ngIf,n=t.oxw();t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,n.isMobile())),t.xp6(2),t.hij(" ",n.getGroupTitle(e)," ")}}function ya(r,o){1&r&&t._UZ(0,"div",4)}function ba(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",4),t._uU(2),t.qZA(),t.TgZ(3,"div",5),t._UZ(4,"cx-configurator-price",6),t.qZA(),t.BQk()),2&r){const e=t.oxw();t.xp6(2),t.hij(" ",e.attributeOverview.attribute," "),t.xp6(2),t.Q6J("formula",e.extractPriceFormulaParameters())}}function Ta(r,o){if(1&r&&(t.TgZ(0,"div",5),t._UZ(1,"cx-configurator-price",6),t.qZA(),t.TgZ(2,"div",4),t._uU(3),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("formula",e.extractPriceFormulaParameters()),t.xp6(2),t.hij(" ",e.attributeOverview.attribute," ")}}function xa(r,o){if(1&r&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"configurator.attribute.id"),": ",e.attributeOverview.productCode,"")}}function Aa(r,o){if(1&r&&(t.TgZ(0,"div",13)(1,"span",14),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"span",15),t._uU(5),t.ALo(6,"cxNumeric"),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"configurator.attribute.quantity")),t.xp6(3),t.Oqu(t.lcZ(6,4,e.attributeOverview.quantity))}}function Ia(r,o){if(1&r&&(t.TgZ(0,"div",16)(1,"span",14),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"span",15),t._uU(5),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"configurator.overviewForm.itemPrice")),t.xp6(3),t.Oqu(null==e.attributeOverview.valuePrice?null:e.attributeOverview.valuePrice.formattedValue)}}function Sa(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"cx-media",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"div"),t._uU(8),t.qZA(),t.YNc(9,xa,3,4,"span",6),t.YNc(10,Aa,7,6,"div",7),t.YNc(11,Ia,6,4,"div",8),t.qZA()(),t.TgZ(12,"div",9)(13,"span",10),t._uU(14),t.qZA(),t._UZ(15,"cx-configurator-price",11),t.qZA(),t.BQk()),2&r){const e=o.ngIf,n=t.oxw();t.xp6(3),t.Q6J("container",n.getProductPrimaryImage(e)),t.xp6(2),t.hij(" ",n.getAriaLabel()," "),t.xp6(3),t.hij(" ",n.attributeOverview.value," "),t.xp6(1),t.Q6J("ngIf",null==n.attributeOverview?null:n.attributeOverview.productCode),t.xp6(1),t.Q6J("ngIf",n.displayQuantity()),t.xp6(1),t.Q6J("ngIf",n.displayPrice()),t.xp6(3),t.Oqu(n.attributeOverview.attribute),t.xp6(1),t.Q6J("formula",n.extractPriceFormulaParameters())}}function Oa(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",2),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onAttrFilterRemove(u.config,a))}),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxTranslate"),t.TgZ(5,"span",3),t._UZ(6,"cx-icon",4),t.qZA()(),t.BQk()}if(2&r){const e=o.$implicit,n=t.oxw();t.xp6(1),t.s9C("title",t.lcZ(2,3,e===n.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.removeByPrice":"configurator.overviewFilter.removeMySelections")),t.xp6(2),t.hij(" ",t.lcZ(4,5,e===n.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.byPrice":"configurator.overviewFilter.mySelections")," "),t.xp6(3),t.Q6J("type",n.iconTypes.CLOSE)}}const Zt=function(r){return{group:r}};function wa(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",2),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onGroupFilterRemove(u.config,a))}),t.ALo(2,"cxTranslate"),t._uU(3),t.TgZ(4,"span",3),t._UZ(5,"cx-icon",4),t.qZA()(),t.BQk()}if(2&r){const e=o.$implicit,n=t.oxw();t.xp6(1),t.s9C("title",t.xi3(2,3,"configurator.overviewFilter.removeByGroup",t.VKq(6,Zt,n.getGroupFilterDescription(n.config.overview,e)))),t.xp6(2),t.hij(" ",n.getGroupFilterDescription(n.config.overview,e)," "),t.xp6(2),t.Q6J("type",n.iconTypes.CLOSE)}}function Ea(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onRemoveAll(i.config))}),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxTranslate"),t.TgZ(5,"span",3),t._UZ(6,"cx-icon",4),t.qZA()(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(1),t.s9C("title",t.lcZ(2,3,"configurator.overviewFilter.removeAllFilters")),t.xp6(2),t.hij(" ",t.lcZ(4,5,"configurator.overviewFilter.removeAll")," "),t.xp6(3),t.Q6J("type",e.iconTypes.CLOSE)}}function Ua(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-overview-filter-bar",8),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("config",e.config)}}const Fa=function(r){return{groupName:r}};function Ra(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"input",10),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onFilter(i.config))}),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"label",11),t._uU(6),t.qZA()()(),t.BQk()}if(2&r){const e=o.$implicit,n=o.index,i=t.oxw(2);t.xp6(3),t.s9C("id","cx-configurator-overview-filter-option-group-"+e.id),t.s9C("name","config-overview-group-filter-"+e.id),t.Q6J("formControl",i.groupFilters[n]),t.uIk("aria-label",t.xi3(4,6,"configurator.a11y.filterOverviewByGroup",t.VKq(9,Fa,e.groupDescription))),t.xp6(2),t.s9C("for","cx-configurator-overview-filter-option-group-"+e.id),t.xp6(1),t.Oqu(e.groupDescription)}}function Da(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.YNc(4,Ra,7,11,"ng-container",9),t.BQk()),2&r){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"configurator.overviewFilter.byGroup")," "),t.xp6(2),t.Q6J("ngForOf",e.config.overview.possibleGroups)}}const Na=["filterButton"],Ze=function(r){return{numAppliedFilters:r}};function Ma(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",2,3),t.NdJ("click",function(){const a=t.CHM(e).ngIf,u=t.oxw();return t.KtG(u.openFilterModal(a))}),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t._UZ(6,"cx-configurator-overview-filter-bar",4),t.BQk()}if(2&r){const e=o.ngIf,n=t.oxw();t.xp6(1),t.s9C("title",t.xi3(3,3,n.getNumFilters(e.overview)>0?"configurator.a11y.filterOverviewWithCount":"configurator.a11y.filterOverview",t.VKq(9,Ze,n.getNumFilters(e.overview)))),t.xp6(3),t.hij(" ",t.xi3(5,6,n.getNumFilters(e.overview)>0?"configurator.button.filterOverviewWithCount":"configurator.button.filterOverview",t.VKq(11,Ze,n.getNumFilters(e.overview)))," "),t.xp6(2),t.Q6J("config",e)}}function Ga(r,o){1&r&&t._UZ(0,"div",5)}function Pa(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",8),t._UZ(2,"cx-configurator-overview-filter",9),t.qZA(),t.BQk()),2&r){const e=o.ngIf;t.xp6(2),t.Q6J("config",e)("showFilterBar",!1)}}function La(r,o){1&r&&t.GkF(0)}const ke=function(r){return{overviewGroups:r,level:1,idPrefix:""}};function Va(r,o){if(1&r&&(t.ynx(0),t.YNc(1,La,1,0,"ng-container",4),t.BQk()),2&r){const e=t.oxw().ngIf;t.oxw();const n=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,ke,null==e.overview?null:e.overview.groups))}}function qa(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Va,2,4,"ng-container",0),t.BQk()),2&r){const e=o.ngIf,n=t.oxw(),i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.hasAttributes(e))("ngIfElse",i)}}function Za(r,o){1&r&&(t.TgZ(0,"div",5)(1,"h2"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()()),2&r&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"configurator.overviewForm.noAttributeHeader")),t.xp6(3),t.Oqu(t.lcZ(6,4,"configurator.overviewForm.noAttributeText")))}function ka(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-overview-attribute",16),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function Ba(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-cpq-overview-attribute",16),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function Qa(r,o){if(1&r&&(t.ynx(0),t._UZ(1,"cx-configurator-overview-attribute",16),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("attributeOverview",e)}}function Ya(r,o){if(1&r&&(t.TgZ(0,"div",12),t.ynx(1,13),t.YNc(2,ka,2,1,"ng-container",14),t.YNc(3,Ba,2,1,"ng-container",14),t.YNc(4,Qa,2,1,"ng-container",15),t.BQk(),t.qZA()),2&r){const e=o.$implicit,n=o.index,i=t.oxw().$implicit,a=t.oxw(2);t.Q6J("ngClass",a.getStyleClasses(i.attributes,n)),t.xp6(1),t.Q6J("ngSwitch",null==e?null:e.type),t.xp6(1),t.Q6J("ngSwitchCase",a.attributeOverviewType.GENERAL),t.xp6(1),t.Q6J("ngSwitchCase",a.attributeOverviewType.BUNDLE)}}function Ja(r,o){1&r&&t.GkF(0)}const Be=function(r,o,e){return{overviewGroups:r,level:o,idPrefix:e}};function $a(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Ja,1,0,"ng-container",4),t.BQk()),2&r){const e=t.oxw().$implicit,n=t.oxw(),i=n.level,a=n.idPrefix,u=t.oxw(),l=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.kEZ(2,Be,e.subGroups,i+1,u.getPrefixId(a,e.id)))}}function Ka(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",8)(2,"span",6),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"h2",9)(6,"span"),t._uU(7),t.qZA()(),t.YNc(8,Ya,5,4,"div",10),t.YNc(9,$a,2,6,"ng-container",11),t.qZA(),t.BQk()),2&r){const e=o.$implicit,n=t.oxw(),i=n.idPrefix,a=n.level,u=t.oxw();t.xp6(1),t.s9C("id",u.getGroupId(i,e.id)),t.Q6J("ngClass",u.getGroupLevelStyleClasses(a,e.subGroups)),t.xp6(2),t.hij(" ",t.xi3(4,6,"configurator.a11y.group",t.VKq(9,Zt,e.groupDescription))," "),t.xp6(4),t.Oqu(e.groupDescription),t.xp6(1),t.Q6J("ngForOf",e.attributes),t.xp6(1),t.Q6J("ngIf",(null==e.subGroups?null:e.subGroups.length)>0)}}function Ha(r,o){if(1&r&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA(),t.YNc(3,Ka,10,11,"ng-container",7)),2&r){const e=o.overviewGroups;t.xp6(1),t.hij(" ",t.lcZ(2,2,"configurator.a11y.listOfAttributesAndValues")," "),t.xp6(2),t.Q6J("ngForOf",e)}}function Wa(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",20),t._UZ(2,"div",21),t.qZA(),t.TgZ(3,"div",22),t._UZ(4,"div",23),t.qZA(),t._UZ(5,"div",24),t.BQk())}const za=function(){return[0,1,2,3,4,5]};function ja(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",17),t._UZ(2,"div",18),t.TgZ(3,"div",19),t.YNc(4,Wa,6,0,"ng-container",7),t.qZA()(),t.BQk()),2&r&&(t.xp6(4),t.Q6J("ngForOf",t.DdM(1,za)))}function Xa(r,o){1&r&&t.YNc(0,ja,5,2,"ng-container",7),2&r&&t.Q6J("ngForOf",t.DdM(1,ot))}function tu(r,o){1&r&&t.GkF(0)}function eu(r,o){if(1&r&&(t.ynx(0),t.YNc(1,tu,1,0,"ng-container",2),t.BQk()),2&r){const e=t.oxw(),n=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,ke,e.config.overview.groups))}}function ru(r,o){1&r&&t.GkF(0)}function nu(r,o){if(1&r&&(t.ynx(0),t.YNc(1,ru,1,0,"ng-container",2),t.BQk()),2&r){const e=t.oxw().$implicit,n=t.oxw(),i=n.level,a=n.idPrefix,u=t.oxw(),l=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.kEZ(2,Be,e.subGroups,i+1,u.getPrefixId(a,e.id)))}}function iu(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"li",4)(2,"button",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw().idPrefix,l=t.oxw();return t.KtG(l.navigateToGroup(u,a.id))}),t.ALo(3,"cxTranslate"),t.TgZ(4,"span",6),t._uU(5),t.qZA(),t._UZ(6,"cx-icon",7),t.qZA(),t.YNc(7,nu,2,6,"ng-container",0),t.qZA(),t.BQk()}if(2&r){const e=o.$implicit,n=t.oxw(),i=n.level,a=n.idPrefix,u=t.oxw();t.xp6(1),t.Q6J("ngClass",u.getGroupLevelStyleClasses(i)),t.xp6(1),t.s9C("id",u.getMenuItemId(a,e.id)),t.uIk("aria-label",t.xi3(3,6,"configurator.a11y.groupName",t.VKq(9,Zt,e.groupDescription))),t.xp6(3),t.hij(" ",e.groupDescription,""),t.xp6(1),t.Q6J("type",u.iconTypes.ARROW_LEFT),t.xp6(1),t.Q6J("ngIf",(null==e.subGroups?null:e.subGroups.length)>0)}}function ou(r,o){if(1&r&&(t.TgZ(0,"ul"),t.YNc(1,iu,8,11,"ng-container",3),t.qZA()),2&r){const e=o.overviewGroups;t.xp6(1),t.Q6J("ngForOf",e)}}const xt=function(r,o){return{entityKey:r,ownerType:o}},At=function(r,o){return{cxRoute:r,params:o}},au=function(r){return{resolveIssues:!0,skipConflicts:r}};function uu(r,o){if(1&r&&(t.TgZ(0,"div",3),t._UZ(1,"cx-icon",4),t.TgZ(2,"div",5),t._uU(3),t.ALo(4,"cxTranslate"),t.TgZ(5,"button",6),t.ALo(6,"cxUrl"),t.ALo(7,"async"),t._uU(8),t.ALo(9,"cxTranslate"),t.qZA()()()),2&r){const e=o.ngIf,n=t.oxw(2).ngIf,i=t.oxw();t.xp6(1),t.Q6J("type",i.iconTypes.ERROR),t.xp6(2),t.hij(" ",t.xi3(4,5,"configurator.notificationBanner.numberOfIssues",t.VKq(14,Tt,e))," "),t.xp6(2),t.Q6J("routerLink",t.lcZ(6,8,t.WLB(19,At,"configure"+n.owner.configuratorType,t.WLB(16,xt,n.owner.id,n.owner.type))))("queryParams",t.VKq(22,au,t.lcZ(7,10,i.skipConflictsOnIssueNavigation$))),t.xp6(3),t.hij(" ",t.lcZ(9,12,"configurator.header.resolveIssues")," ")}}const cu=function(){return{resolveIssues:!0}};function su(r,o){if(1&r&&(t.TgZ(0,"div",7),t._UZ(1,"cx-icon",4),t.TgZ(2,"div",8),t._uU(3),t.ALo(4,"cxTranslate"),t.TgZ(5,"button",9),t.ALo(6,"cxUrl"),t._uU(7),t.ALo(8,"cxTranslate"),t.qZA()()()),2&r){const e=o.ngIf,n=t.oxw(2).ngIf,i=t.oxw();t.xp6(1),t.Q6J("type",i.iconTypes.WARNING),t.xp6(2),t.hij(" ",t.xi3(4,5,"configurator.notificationBanner.numberOfConflicts",t.VKq(12,Tt,e))," "),t.xp6(2),t.Q6J("routerLink",t.lcZ(6,8,t.WLB(17,At,"configure"+n.owner.configuratorType,t.WLB(14,xt,n.owner.id,n.owner.type))))("queryParams",t.DdM(20,cu)),t.xp6(2),t.hij(" ",t.lcZ(8,10,"configurator.header.resolveConflicts")," ")}}function lu(r,o){if(1&r&&(t.ynx(0),t.YNc(1,uu,10,24,"div",1),t.ALo(2,"async"),t.YNc(3,su,9,21,"div",2),t.ALo(4,"async"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.numberOfIssues$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,e.numberOfConflicts$))}}function pu(r,o){if(1&r&&(t.ynx(0),t.YNc(1,lu,5,6,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.configurationOverview$))}}function gu(r,o){if(1&r&&t._UZ(0,"cx-configurator-overview-filter",5),2&r){const e=t.oxw().ngIf;t.Q6J("config",e)}}function du(r,o){if(1&r&&t._UZ(0,"cx-configurator-overview-menu",5),2&r){const e=t.oxw().ngIf;t.Q6J("config",e)}}function fu(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onMenu())}),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onFilter())}),t._uU(6),t.ALo(7,"cxTranslate"),t.qZA()(),t.YNc(8,gu,1,1,"cx-configurator-overview-filter",4),t.YNc(9,du,1,1,"cx-configurator-overview-menu",4),t.BQk()}if(2&r){const e=t.oxw();t.xp6(2),t.ekj("active",!e.showFilter),t.uIk("aria-selected",!e.showFilter),t.xp6(1),t.hij(" ",t.lcZ(4,10,"configurator.overviewSidebar.menu")," "),t.xp6(2),t.ekj("active",e.showFilter),t.uIk("aria-selected",e.showFilter),t.xp6(1),t.hij(" ",t.lcZ(7,12,"configurator.overviewSidebar.filter")," "),t.xp6(2),t.Q6J("ngIf",e.showFilter),t.xp6(1),t.Q6J("ngIf",!e.showFilter)}}function _u(r,o){1&r&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.qZA())}const Cu=function(){return[0,1,2,3]};function vu(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",13),t.YNc(2,_u,2,0,"div",14),t.qZA(),t.BQk()),2&r&&(t.xp6(2),t.Q6J("ngForOf",t.DdM(1,Cu)))}function hu(r,o){1&r&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.qZA())}function mu(r,o){1&r&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.qZA())}function yu(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",13),t.YNc(2,hu,2,0,"div",14),t.TgZ(3,"div",15),t.YNc(4,mu,2,0,"div",14),t.qZA()(),t.BQk()),2&r&&(t.xp6(2),t.Q6J("ngForOf",t.DdM(2,ot)),t.xp6(2),t.Q6J("ngForOf",t.DdM(3,ot)))}function bu(r,o){1&r&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.qZA())}const Qe=function(){return[0,1]};function Tu(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",9),t.YNc(2,bu,2,0,"div",14),t.qZA(),t.BQk()),2&r&&(t.xp6(2),t.Q6J("ngForOf",t.DdM(1,Qe)))}function xu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",9)(2,"div",10),t._UZ(3,"div",11),t.qZA(),t.YNc(4,vu,3,2,"ng-container",12),t.YNc(5,yu,5,4,"ng-container",12),t.YNc(6,Tu,3,2,"ng-container",12),t.qZA(),t.BQk()),2&r){const e=o.index;t.xp6(4),t.Q6J("ngIf",0===e),t.xp6(1),t.Q6J("ngIf",1===e),t.xp6(1),t.Q6J("ngIf",2===e)}}function Au(r,o){1&r&&(t.ynx(0),t.YNc(1,xu,7,3,"ng-container",8),t.BQk()),2&r&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,ot)))}function Iu(r,o){1&r&&(t.TgZ(0,"div",6),t._UZ(1,"div",7),t.YNc(2,Au,2,2,"ng-container",8),t.qZA()),2&r&&(t.xp6(2),t.Q6J("ngForOf",t.DdM(1,Qe)))}function Su(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",1),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,a=t.oxw();return t.KtG(a.onPrevious(i))}),t.ALo(2,"async"),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,a=t.oxw();return t.KtG(a.onNext(i))}),t.ALo(7,"async"),t.ALo(8,"cxTranslate"),t._uU(9),t.ALo(10,"cxTranslate"),t.qZA(),t.BQk()}if(2&r){const e=t.oxw().ngIf,n=t.oxw();t.xp6(1),t.Q6J("disabled",t.lcZ(2,6,n.isFirstGroup(e.owner))),t.uIk("aria-label",t.lcZ(3,8,"configurator.a11y.previous")),t.xp6(3),t.hij(" ",t.lcZ(5,10,"configurator.button.previous")," "),t.xp6(2),t.Q6J("disabled",t.lcZ(7,12,n.isLastGroup(e.owner))),t.uIk("aria-label",t.lcZ(8,14,"configurator.a11y.next")),t.xp6(3),t.hij(" ",t.lcZ(10,16,"configurator.button.next")," ")}}function Ou(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Su,11,18,"ng-container",0),t.BQk()),2&r){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.groups.length>1)}}function wu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",7)(2,"div",4),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"div",6),t._uU(6),t.qZA()(),t.TgZ(7,"div",8)(8,"div",4),t._uU(9),t.ALo(10,"cxTranslate"),t.qZA(),t.TgZ(11,"div",6),t._uU(12),t.qZA()(),t.BQk()),2&r){const e=t.oxw(2).ngIf;t.xp6(3),t.hij(" ",t.lcZ(4,4,"configurator.priceSummary.basePrice"),": "),t.xp6(3),t.hij(" ",null==e||null==e.priceSummary||null==e.priceSummary.basePrice?null:e.priceSummary.basePrice.formattedValue," "),t.xp6(3),t.hij(" ",t.lcZ(10,6,"configurator.priceSummary.selectedOptions"),": "),t.xp6(3),t.hij(" ",null==e||null==e.priceSummary||null==e.priceSummary.selectedOptions?null:e.priceSummary.selectedOptions.formattedValue," ")}}function Eu(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.priceSummary.totalPrice"),": "))}function Uu(r,o){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"cxTranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"configurator.priceSummary.totalPricePerItem"),": "))}function Fu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,wu,13,8,"ng-container",0),t.TgZ(4,"div",3)(5,"div",4),t.YNc(6,Eu,3,3,"ng-container",5),t.YNc(7,Uu,3,3,"ng-container",5),t.qZA(),t.TgZ(8,"div",6),t._uU(9),t.qZA()()()(),t.BQk()),2&r){const e=t.oxw().ngIf;t.xp6(3),t.Q6J("ngIf",!e.hideBasePriceAndSelectedOptions),t.xp6(3),t.Q6J("cxFeatureLevel","!6.1"),t.xp6(1),t.Q6J("cxFeatureLevel","6.1"),t.xp6(2),t.hij(" ",null==e||null==e.priceSummary||null==e.priceSummary.currentTotal?null:e.priceSummary.currentTotal.formattedValue," ")}}function Ru(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Fu,10,4,"ng-container",0),t.BQk()),2&r){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.pricingEnabled)}}const Ye=function(r){return{product:r}};function Du(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",13),t.ALo(2,"cxTranslate"),t.TgZ(3,"span",14),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA()(),t._UZ(6,"cx-icon",15),t.BQk()),2&r){const e=t.oxw().ngIf,n=t.oxw();t.xp6(1),t.uIk("aria-label",t.xi3(2,3,"configurator.a11y.showMoreProductInfo",t.VKq(8,Ye,e.name))),t.xp6(3),t.Oqu(t.lcZ(5,6,"configurator.header.showMore")),t.xp6(2),t.Q6J("type",n.iconTypes.CARET_DOWN)}}function Nu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",13),t.ALo(2,"cxTranslate"),t._uU(3),t.ALo(4,"cxTranslate"),t.qZA(),t._UZ(5,"cx-icon",15),t.BQk()),2&r){const e=t.oxw().ngIf,n=t.oxw();t.xp6(1),t.uIk("aria-label",t.xi3(2,3,"configurator.a11y.showLessProductInfo",t.VKq(8,Ye,e.name))),t.xp6(2),t.hij(" ",t.lcZ(4,6,"configurator.header.showLess")," "),t.xp6(2),t.Q6J("type",n.iconTypes.CARET_UP)}}function Mu(r,o){if(1&r&&(t.TgZ(0,"span"),t.ALo(1,"cxTranslate"),t._uU(2),t.qZA()),2&r){const e=t.oxw().ngIf;t.uIk("aria-label",t.lcZ(1,2,"configurator.a11y.productName")),t.xp6(2),t.hij(" ",e.name," ")}}function Gu(r,o){if(1&r&&(t.TgZ(0,"span"),t.ALo(1,"cxTranslate"),t._uU(2),t.qZA()),2&r){const e=t.oxw().ngIf;t.uIk("aria-label",t.lcZ(1,2,"configurator.a11y.productCode")),t.xp6(2),t.hij(" ",e.code," ")}}function Pu(r,o){if(1&r&&(t.TgZ(0,"span"),t.ALo(1,"cxTranslate"),t._uU(2),t.qZA()),2&r){const e=t.oxw().ngIf;t.uIk("aria-label",t.lcZ(1,2,"configurator.a11y.productDescription")),t.xp6(2),t.hij(" ",e.description," ")}}const Lu=function(r){return{name:r}};function Vu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",17)(2,"span",18),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",19),t._uU(7),t.qZA()(),t.BQk()),2&r){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyName",t.VKq(8,Lu,e.kbKey.kbName))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyName")," "),t.xp6(3),t.hij(" ",e.kbKey.kbName," ")}}const qu=function(r){return{logsys:r}};function Zu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",17)(2,"span",18),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",19),t._uU(7),t.qZA()(),t.BQk()),2&r){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyLogsys",t.VKq(8,qu,e.kbKey.kbLogsys))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyLogsys")," "),t.xp6(3),t.hij(" ",e.kbKey.kbLogsys," ")}}const ku=function(r){return{version:r}};function Bu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",17)(2,"span",18),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",19),t._uU(7),t.qZA()(),t.BQk()),2&r){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyVersion",t.VKq(8,ku,e.kbKey.kbVersion))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyVersion")," "),t.xp6(3),t.hij(" ",e.kbKey.kbVersion," ")}}function Qu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",17)(2,"span",18),t.ALo(3,"cxTranslate"),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"span",19),t._uU(7),t.qZA()(),t.BQk()),2&r){const e=t.oxw(2).ngIf;t.xp6(2),t.uIk("aria-label",t.xi3(3,3,"configurator.a11y.kbKeyBuildNr",t.VKq(8,qt,e.kbKey.kbBuildNumber))),t.xp6(2),t.hij(" ",t.lcZ(5,6,"configurator.header.kbKeyBuildNr")," "),t.xp6(3),t.hij(" ",e.kbKey.kbBuildNumber," ")}}function Yu(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",16),t.YNc(2,Vu,8,10,"ng-container",5),t.YNc(3,Zu,8,10,"ng-container",5),t.YNc(4,Bu,8,10,"ng-container",5),t.YNc(5,Qu,8,10,"ng-container",5),t.qZA(),t.BQk()),2&r){const e=t.oxw().ngIf;t.xp6(2),t.Q6J("ngIf",e.kbKey.kbName),t.xp6(1),t.Q6J("ngIf",e.kbKey.kbLogsys),t.xp6(1),t.Q6J("ngIf",e.kbKey.kbVersion),t.xp6(1),t.Q6J("ngIf",e.kbKey.kbBuildNumber)}}function Ju(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Yu,6,4,"ng-container",5),t.BQk()),2&r){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.kbKey)}}function $u(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Ju,2,1,"ng-container",5),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.configuration$))}}function Ku(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"button",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.triggerDetails())}),t.YNc(6,Du,7,10,"ng-container",5),t.YNc(7,Nu,6,10,"ng-container",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7),t._UZ(10,"cx-media",8),t.qZA(),t.TgZ(11,"div",9)(12,"div",10),t.YNc(13,Mu,3,4,"span",5),t.qZA(),t.TgZ(14,"div",11),t.YNc(15,Gu,3,4,"span",5),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,Pu,3,4,"span",5),t.qZA(),t.YNc(18,$u,3,3,"ng-container",5),t.ALo(19,"async"),t.qZA()()(),t.BQk()}if(2&r){const e=o.ngIf,n=t.oxw();t.xp6(4),t.hij(" ",e.name," "),t.xp6(1),t.uIk("aria-expanded",n.showMore),t.xp6(1),t.Q6J("ngIf",!n.showMore),t.xp6(1),t.Q6J("ngIf",n.showMore),t.xp6(1),t.ekj("open",n.showMore),t.xp6(2),t.Q6J("container",null==e||null==e.images?null:e.images.PRIMARY),t.xp6(1),t.uIk("aria-hidden",!n.showMore),t.xp6(2),t.Q6J("ngIf",e.name),t.xp6(2),t.Q6J("ngIf",e.code),t.xp6(2),t.Q6J("ngIf",e.description),t.xp6(1),t.Q6J("ngIf",t.lcZ(19,12,n.expMode))}}function Hu(r,o){1&r&&t._UZ(0,"div",20)}function Wu(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2),t.NdJ("esc",function(){const a=t.CHM(e).ngIf,u=t.oxw(2);return t.KtG(u.backToPDP(a))}),t.TgZ(2,"div",3)(3,"div",4),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){const a=t.CHM(e).ngIf,u=t.oxw(2);return t.KtG(u.backToPDP(a))}),t.ALo(7,"cxTranslate"),t.TgZ(8,"span",6),t._UZ(9,"cx-icon",7),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9),t._uU(12),t.ALo(13,"cxTranslate"),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){const a=t.CHM(e).ngIf,u=t.oxw(2);return t.KtG(u.resume(a))}),t._uU(15),t.ALo(16,"cxTranslate"),t.qZA(),t.TgZ(17,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,a=t.oxw();return t.KtG(a.restart(i.owner))}),t._uU(18),t.ALo(19,"cxTranslate"),t.qZA()()(),t.BQk()}if(2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("cxFocus",e.focusConfig),t.xp6(3),t.hij(" ",t.lcZ(5,7,"configurator.restartDialog.title")," "),t.xp6(2),t.s9C("title",t.lcZ(7,9,"configurator.a11y.closeRestartDialog")),t.xp6(3),t.Q6J("type",e.iconTypes.CLOSE),t.xp6(3),t.hij(" ",t.lcZ(13,11,"configurator.restartDialog.description")," "),t.xp6(3),t.hij(" ",t.lcZ(16,13,"configurator.restartDialog.resumeButton")," "),t.xp6(3),t.hij(" ",t.lcZ(19,15,"configurator.restartDialog.restartButton")," ")}}function zu(r,o){if(1&r&&(t.ynx(0),t.YNc(1,Wu,20,17,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.product$))}}const ju=["configTab"],Xu=["overviewTab"];function tc(r,o){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"a",4,5),t.NdJ("keydown",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.switchTabOnArrowPress(i,"#configTab"))}),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"cxUrl"),t.ALo(7,"async"),t.ALo(8,"cxTranslate"),t.ALo(9,"cxTranslate"),t._uU(10),t.ALo(11,"cxTranslate"),t.qZA(),t.TgZ(12,"a",4,6),t.NdJ("keydown",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.switchTabOnArrowPress(i,"#overviewTab"))}),t.ALo(14,"async"),t.ALo(15,"async"),t.ALo(16,"cxUrl"),t.ALo(17,"async"),t.ALo(18,"cxTranslate"),t.ALo(19,"cxTranslate"),t._uU(20),t.ALo(21,"cxTranslate"),t.qZA()(),t.BQk()}if(2&r){const e=t.oxw(2).ngIf,n=t.oxw();t.xp6(2),t.ekj("active",!t.lcZ(4,14,n.isOverviewPage$)),t.Q6J("tabindex",n.getTabIndexConfigTab())("routerLink",t.lcZ(6,18,t.WLB(45,At,"configure"+e.owner.configuratorType,t.WLB(42,xt,e.owner.id,e.owner.type)))),t.uIk("aria-selected",!t.lcZ(5,16,n.isOverviewPage$))("aria-label",t.lcZ(7,20,n.isOverviewPage$)?t.lcZ(9,24,"configurator.a11y.configurationPageLink"):t.lcZ(8,22,"configurator.a11y.configurationPage")),t.xp6(8),t.Oqu(t.lcZ(11,26,"configurator.tabBar.configuration")),t.xp6(2),t.ekj("active",t.lcZ(14,28,n.isOverviewPage$)),t.Q6J("tabindex",n.getTabIndexOverviewTab())("routerLink",t.lcZ(16,32,t.WLB(51,At,"configureOverview"+e.owner.configuratorType,t.WLB(48,xt,e.owner.id,e.owner.type)))),t.uIk("aria-selected",t.lcZ(15,30,n.isOverviewPage$))("aria-label",t.lcZ(17,34,n.isOverviewPage$)?t.lcZ(18,36,"configurator.a11y.overviewPage"):t.lcZ(19,38,"configurator.a11y.overviewPageLink")),t.xp6(8),t.Oqu(t.lcZ(21,40,"configurator.tabBar.overview"))}}function ec(r,o){if(1&r&&(t.ynx(0),t.YNc(1,tc,22,54,"ng-container",0),t.BQk()),2&r){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",!e.displayOnly)}}function rc(r,o){1&r&&t._UZ(0,"div",7)}function nc(r,o){if(1&r&&(t.ynx(0),t.YNc(1,ec,2,1,"ng-container",1),t.ALo(2,"async"),t.YNc(3,rc,1,0,"ng-template",null,2,t.W1O),t.BQk()),2&r){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.configuration$))("ngIfElse",e)}}function ic(r,o){1&r&&t._UZ(0,"cx-product-carousel-item",4),2&r&&t.Q6J("item",o.item)}const oc=function(r){return{title:r}};function ac(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"cx-carousel",2),t.ALo(3,"cxTranslate"),t.ALo(4,"async"),t.ALo(5,"async"),t.YNc(6,ic,1,1,"ng-template",null,3,t.W1O),t.qZA(),t.BQk()),2&r){const e=o.ngIf,n=t.MAs(7),i=t.oxw();t.xp6(2),t.Q6J("items",e)("title",t.lcZ(5,9,i.title$))("template",n),t.uIk("aria-label",t.xi3(3,4,"productCarousel.carouselLabel",t.VKq(11,oc,t.lcZ(4,7,i.title$))))}}var s;!function(r){let o;var d;let e,n,i,a,u,l,C,g;(d=o=r.GroupType||(r.GroupType={})).ATTRIBUTE_GROUP="AttributeGroup",d.SUB_ITEM_GROUP="SubItemGroup",d.CONFLICT_HEADER_GROUP="ConflictHeaderGroup",d.CONFLICT_GROUP="ConflictGroup",function(d){d.NOT_IMPLEMENTED="not_implemented",d.RADIOBUTTON="radioGroup",d.RADIOBUTTON_ADDITIONAL_INPUT="radioGroup_add",d.CHECKBOX="checkBox",d.CHECKBOXLIST="checkBoxList",d.DROPDOWN="dropdown",d.DROPDOWN_ADDITIONAL_INPUT="dropdown_add",d.LISTBOX="listbox",d.LISTBOX_MULTI="listboxmulti",d.READ_ONLY="readonly",d.STRING="string",d.NUMERIC="numeric",d.AUTO_COMPLETE_CUSTOM="input_autocomplete",d.MULTI_SELECTION_IMAGE="multi_selection_image",d.SINGLE_SELECTION_IMAGE="single_selection_image",d.CHECKBOXLIST_PRODUCT="checkBoxListProduct",d.DROPDOWN_PRODUCT="dropdownProduct",d.RADIOBUTTON_PRODUCT="radioGroupProduct"}(e=r.UiType||(r.UiType={})),function(d){d.VALUE_IMAGE="VALUE_IMAGE",d.ATTRIBUTE_IMAGE="ATTRIBUTE_IMAGE"}(n=r.ImageFormatType||(r.ImageFormatType={})),function(d){d.PRIMARY="PRIMARY",d.GALLERY="GALLERY"}(i=r.ImageType||(r.ImageType={})),function(d){d.INPUT_STRING="String",d.INPUT_NUMBER="Number",d.USER_SELECTION_QTY_ATTRIBUTE_LEVEL="UserSelectionWithAttributeQuantity",d.USER_SELECTION_QTY_VALUE_LEVEL="UserSelectionWithValueQuantity",d.USER_SELECTION_NO_QTY="UserSelectionWithoutQuantity",d.NOT_IMPLEMENTED="not_implemented"}(a=r.DataType||(r.DataType={})),function(d){d.ATTRIBUTE="Attribute",d.ATTRIBUTE_QUANTITY="AttributeQuantity",d.VALUE_QUANTITY="ValueQuantity"}(u=r.UpdateType||(r.UpdateType={})),function(d){d.GENERAL="general",d.BUNDLE="bundle"}(l=r.AttributeOverviewType||(r.AttributeOverviewType={})),function(d){d.NONE="NONE",d.NUMERIC="NUMERIC"}(C=r.ValidationType||(r.ValidationType={})),function(d){d.VISIBLE="PRIMARY",d.USER_INPUT="USER_INPUT",d.PRICE_RELEVANT="PRICE_RELEVANT"}(g=r.OverviewFilter||(r.OverviewFilter={})),r.ConflictIdPrefix="CONFLICT",r.ConflictHeaderId="CONFLICT_HEADER",r.CustomUiTypeIndicator="___",r.RetractValueCode="###RETRACT_VALUE_CODE###"}(s||(s={}));const Je="productConfigurator",A="[Configurator] Configuration Data",kt="[Configurator] Read Cart Entry Configuration",Bt="[Configurator] Read Cart Entry Configuration Success",Qt="[Configurator] Read Order Entry Configuration",Yt="[Configurator] Read Order Entry Configuration Success",Jt="[Configurator] Add to cart",It="[Configurator] Update cart entry",$t="[Configurator] Add next owner",Kt="[Configurator] Set next owner cart entry",Ht="[Configurator] Remove cart bound configurations";class He extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=kt}}class We extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Bt}}class ze extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Read Cart Entry Configuration Fail"}}class je extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Qt}}class Xe extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Yt}}class tr extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Read Order Entry Configuration Fail"}}class er extends c.kPG.EntityProcessesIncrementAction{constructor(o){super(nt.N4,o.cartId),this.payload=o,this.type=Jt}}class rr extends c.kPG.EntityProcessesIncrementAction{constructor(o){super(nt.N4,o.cartId),this.payload=o,this.type=It}}class nr{constructor(o){this.payload=o,this.type=$t}}class ir{constructor(){this.type=Ht}}class or extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=Kt}}const Wt="[Configurator] Search Variants",zt="[Configurator] Search Variants success";class St extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Wt}}class ur extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator]  Search Variants fail"}}class cr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.ownerKey),this.payload=o,this.type=zt}}const jt="[Configurator] Create Configuration",Xt="[Configurator] Create Configuration Sucess",te="[Configurator] Read Configuration",ee="[Configurator] Read Configuration Sucess",re="[Configurator] Update Configuration",ne="[Configurator] Update Configuration Fail",ie="[Configurator] Update Configuration Success",oe="[Configurator] Update Configuration finalize success",ae="[Configurator] Update Configuration finalize fail",Ot="[Configurator] Change group",ue="[Configurator] Update Configuration Summary Price",ce="[Configurator] Update Configuration Price Summary success",se="[Configurator] Get Configuration Overview",le="[Configurator] Get Configuration Overview success",pe="[Configurator] Update Configuration Overview",ge="[Configurator] Update Configuration Overview success",de="[Configurator] Set interaction state",fe="[Configurator] Set current group to State",_e="[Configurator] Set current parent group for menu to State",Ce="[Configurator] Set groups to visited",ve="[Configurator] Remove product bound configurations",wt="[Configurator] Dismiss conflict dialog",he="[Configurator] Check conflict dialog";class me extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=jt}}class Cr extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Create Configuration Fail"}}class vr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=Xt}}class hr extends c.kPG.EntityLoadAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=te}}class ye extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Read Configuration Fail"}}class be extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=ee}}class mr extends c.kPG.EntityProcessesIncrementAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=re,this.meta.loader={load:!0}}}class yr extends c.kPG.EntityProcessesDecrementAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=ne,this.meta.loader={error:o.error}}}class br extends c.kPG.EntityProcessesDecrementAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=ie}}class Tr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=oe}}class xr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=ae}}class lt extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=ue}}class Ar extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Update Configuration Price Summary fail"}}class Ir extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=ce}}class Te extends c.kPG.EntityLoadAction{constructor(o){super(A,o.configuration.owner.key),this.payload=o,this.type=Ot}}class pt extends c.kPG.EntityLoaderResetAction{constructor(o){super(A,o.ownerKey),this.payload=o,this.type="[Configurator] Remove configuration"}}class Sr extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=se}}class Or extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Get Configuration Overview fail"}}class wr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.ownerKey),this.payload=o,this.type=le}}class Er extends c.kPG.EntityLoadAction{constructor(o){super(A,o.owner.key),this.payload=o,this.type=pe}}class Ur extends c.kPG.EntityFailAction{constructor(o){super(A,o.ownerKey,o.error),this.payload=o,this.type="[Configurator] Update Configuration Overview fail"}}class Fr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.ownerKey),this.payload=o,this.type=ge}}class Rr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.interactionState),this.payload=o,this.type=de}}class Dr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.currentGroup),this.payload=o,this.type=fe}}class xe extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.menuParentGroup),this.payload=o,this.type=_e}}class Nr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o.entityKey,o.visitedGroups),this.payload=o,this.type=Ce}}class Mr{constructor(){this.type=ve}}class Gr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o),this.ownerKey=o,this.type=wt}}class Pr extends c.kPG.EntitySuccessAction{constructor(o){super(A,o),this.ownerKey=o,this.type=he}}const Et=(0,w.ZF)(Je),Ae=(0,w.P1)(Et,r=>r.configurations),at=r=>(0,w.P1)(Ae,o=>c.kPG.entityProcessesLoaderStateSelector(o,r)),gt=r=>(0,w.P1)(Ae,o=>c.kPG.entityHasPendingProcessesSelector(o,r)),W=r=>(0,w.P1)(at(r),o=>c.kPG.loaderValueSelector(o));let ut=(()=>{class r{getParentGroup(e,n,i){return e.includes(n)?i:e.map(a=>a.subGroups?this.getParentGroup(a.subGroups,n,a):void 0).filter(a=>a).pop()}getGroupById(e,n){const i=e.find(u=>u.id===n);return i||(this.getGroupFromSubGroups(e,n)||e[0])}getOptionalGroupById(e,n){return e.find(a=>a.id===n)||this.getGroupFromSubGroups(e,n)}getGroupByIdIfPresent(e,n){return e.find(a=>a.id===n)||this.getGroupFromSubGroups(e,n)}getGroupFromSubGroups(e,n){return e.map(a=>a.subGroups?this.getGroupByIdIfPresent(a.subGroups,n):void 0).filter(a=>a).pop()}hasSubGroups(e){return!!e.subGroups&&e.subGroups.length>0}isConfigurationCreated(e){const n=e?.configId;return void 0!==n&&0!==n.length&&void 0!==e&&(e.flatGroups.length>0||void 0!==e.overview)}createConfigurationExtract(e,n,i){i||(i=s.UpdateType.ATTRIBUTE);const a={configId:n.configId,groups:[],flatGroups:[],interactionState:{isConflictResolutionMode:n.interactionState.isConflictResolutionMode},owner:n.owner,productCode:n.productCode,updateType:i},u=[];if(!e.groupId)throw Error("GroupId must be available at attribute level during update");this.buildGroupPath(e.groupId,n.groups,u);const l=u.length;if(0===l)throw new Error("At this point we expect that group is available in the configuration: "+e.groupId+", "+JSON.stringify(n.groups.map(d=>d.id)));let C=this.buildGroupForExtract(u[l-1]),g=C;a.groups.push(C);for(let d=u.length-1;d>0;d--)g=this.buildGroupForExtract(u[d-1]),C.subGroups=[g],C=g;return g.attributes=[e],a}buildGroupPath(e,n,i){let a=!1;const u=n.find(l=>l.id===e);return u?(i.push(u),a=!0):n.filter(l=>l.subGroups).forEach(l=>{l.subGroups&&this.buildGroupPath(e,l.subGroups,i)&&(i.push(l),a=!0)}),a}getConfigurationFromState(e){const n=e.value;if(n)return n;throw new Error("Configuration must be defined at this point")}buildGroupForExtract(e){return{groupType:e.groupType,id:e.id,subGroups:[]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ie=(()=>{class r{constructor(e,n,i,a,u,l){this.store=e,this.activeCartService=n,this.commonConfigUtilsService=i,this.checkoutQueryFacade=a,this.userIdService=u,this.configuratorUtilsService=l}readConfigurationForCartEntry(e){return this.store.pipe((0,w.Ys)(at(e.key)),(0,Ve.j)(()=>this.activeCartService.isStable().pipe((0,S.h)(n=>n))),(0,Ve.j)(()=>this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,v.U)(n=>n.loading),(0,S.h)(n=>!n))),(0,D.b)(n=>{this.configurationNeedsReading(n)&&this.activeCartService.requireLoadedCart().pipe((0,h.q)(1)).subscribe(i=>{this.userIdService.getUserId().pipe((0,h.q)(1)).subscribe(a=>{const u={userId:a,cartId:this.commonConfigUtilsService.getCartId(i),cartEntryNumber:e.id,owner:e};this.store.dispatch(new He(u))})})}),(0,S.h)(n=>void 0!==n.value&&this.isConfigurationCreated(n.value)),(0,v.U)(n=>this.configuratorUtilsService.getConfigurationFromState(n)))}readConfigurationForOrderEntry(e){return this.store.pipe((0,w.Ys)(at(e.key)),(0,D.b)(n=>{if(this.configurationNeedsReading(n)){const i=this.commonConfigUtilsService.decomposeOwnerId(e.id);this.store.dispatch(new je({userId:c.zyp,orderId:i.documentId,orderEntryNumber:i.entryNumber,owner:e}))}}),(0,S.h)(n=>void 0!==n.value&&this.isConfigurationCreated(n.value)),(0,v.U)(n=>this.configuratorUtilsService.getConfigurationFromState(n)))}addToCart(e,n,i,a){this.activeCartService.requireLoadedCart().pipe((0,h.q)(1)).subscribe(u=>{this.userIdService.getUserId().pipe((0,h.q)(1)).subscribe(l=>{const C={userId:l,cartId:this.commonConfigUtilsService.getCartId(u),productCode:e,quantity:a??1,configId:n,owner:i};this.store.dispatch(new er(C))})})}updateCartEntry(e){this.activeCartService.requireLoadedCart().pipe((0,h.q)(1)).subscribe(n=>{this.userIdService.getUserId().pipe((0,h.q)(1)).subscribe(i=>{const a={userId:i,cartId:this.commonConfigUtilsService.getCartId(n),cartEntryNumber:e.owner.id,configuration:e};this.store.dispatch(new rr(a))})})}activeCartHasIssues(){return this.activeCartService.requireLoadedCart().pipe((0,v.U)(e=>e?e.entries:[]),(0,v.U)(e=>e?e.filter(n=>this.commonConfigUtilsService.getNumberOfIssues(n)):[]),(0,v.U)(e=>e.length>0))}getEntry(e){return this.activeCartService.requireLoadedCart().pipe((0,v.U)(n=>n.entries?n.entries:[]),(0,v.U)(n=>{const i=n.filter(a=>a.entryNumber?.toString()===e);return i?i[i.length-1]:void 0}))}removeCartBoundConfigurations(){this.store.dispatch(new ir)}isConfigurationCreated(e){return 0!==e.configId.length}configurationNeedsReading(e){const n=e.value;return void 0===n||!this.isConfigurationCreated(n)&&!e.loading&&!e.error}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(w.yh),t.LFG(it.bu),t.LFG(y.NU),t.LFG(An.nh),t.LFG(c.XBV),t.LFG(ut))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),O=(()=>{class r{constructor(e,n,i,a,u){this.store=e,this.commonConfigUtilsService=n,this.configuratorCartService=i,this.activeCartService=a,this.configuratorUtils=u,this.logger=(0,t.f3M)(c.mQy)}hasPendingChanges(e){return this.store.pipe((0,w.Ys)(gt(e.key)))}isConfigurationLoading(e){return this.store.pipe((0,w.Ys)(at(e.key)),(0,v.U)(n=>n.loading??!1))}getConfiguration(e){return this.store.pipe((0,w.Ys)(W(e.key)),(0,S.h)(n=>this.configuratorUtils.isConfigurationCreated(n)))}getOrCreateConfiguration(e,n){switch(e.type){case y.$g.OwnerType.CART_ENTRY:return this.configuratorCartService.readConfigurationForCartEntry(e);case y.$g.OwnerType.ORDER_ENTRY:return this.configuratorCartService.readConfigurationForOrderEntry(e);default:return this.getOrCreateConfigurationForProduct(e,n)}}updateConfiguration(e,n,i){i||(i=s.UpdateType.ATTRIBUTE),this.activeCartService.getActive().pipe((0,h.q)(1),(0,m.w)(a=>this.activeCartService.isStable().pipe((0,h.q)(1),(0,D.b)(u=>{(0,t.X6Q)()&&a.code&&!u&&this.logger.warn("Cart is busy, no configuration updates possible")}),(0,S.h)(u=>!a.code||u),(0,m.w)(()=>this.store.pipe((0,w.Ys)(W(e)),(0,h.q)(1)))))).subscribe(a=>{this.store.dispatch(new mr(this.configuratorUtils.createConfigurationExtract(n,a,i)))})}getConfigurationWithOverview(e){return this.store.pipe((0,w.Ys)(W(e.owner.key)),(0,S.h)(n=>this.configuratorUtils.isConfigurationCreated(n)),(0,D.b)(n=>{this.hasConfigurationOverview(n)||this.store.dispatch(new Sr(e))}),(0,S.h)(n=>this.hasConfigurationOverview(n)))}updateConfigurationOverview(e){this.store.dispatch(new Er(e))}removeConfiguration(e){this.store.dispatch(new pt({ownerKey:e.key}))}dismissConflictSolverDialog(e){this.store.dispatch(new Gr(e.key))}checkConflictSolverDialog(e){this.store.dispatch(new Pr(e.key))}hasConflicts(e){return this.getConfiguration(e).pipe((0,v.U)(n=>!1===n.immediateConflictResolution&&n.groups[0]?.groupType===s.GroupType.CONFLICT_HEADER_GROUP))}forceNewConfiguration(e){this.store.dispatch(new pt({ownerKey:e.key})),this.store.dispatch(new me({owner:e,configIdTemplate:void 0,forceReset:!0}))}getOrCreateConfigurationForProduct(e,n){return this.store.pipe((0,w.Ys)(at(e.key)),(0,D.b)(i=>{(void 0===i.value||!this.configuratorUtils.isConfigurationCreated(i.value))&&!0!==i.loading&&!0!==i.error&&this.store.dispatch(new me({owner:e,configIdTemplate:n}))}),(0,S.h)(i=>void 0!==i.value&&this.configuratorUtils.isConfigurationCreated(i.value)),(0,v.U)(i=>this.configuratorUtils.getConfigurationFromState(i)))}hasConfigurationOverview(e){return void 0!==e.overview}removeProductBoundConfigurations(){this.store.dispatch(new Mr)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(w.yh),t.LFG(y.NU),t.LFG(Ie),t.LFG(it.bu),t.LFG(ut))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Zr=(()=>{class r{constructor(e,n){this.store=e,this.configuratorUtilsService=n}isGroupVisited(e,n){return this.store.select(((r,o)=>(0,w.P1)(W(r),e=>{const n=e?.interactionState?.groupsVisited;return!!n&&n[o]}))(e.key,n))}getFirstIncompleteGroup(e){return e.flatGroups?e.flatGroups.filter(n=>n.groupType!==s.GroupType.CONFLICT_GROUP).find(n=>!n.complete):void 0}setGroupStatusVisited(e,n){const i=this.configuratorUtilsService.getGroupById(e.groups,n),a=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,n)),u=[];u.push(i.id),a&&this.getParentGroupStatusVisited(e,i.id,a,u),this.store.dispatch(new Nr({entityKey:e.owner.key,visitedGroups:u}))}areGroupsVisited(e,n){return this.store.select(((r,o)=>(0,w.P1)(W(r),e=>0===o.map(n=>{const i=e?.interactionState?.groupsVisited;return!!i&&i[n]}).filter(n=>!n).length))(e.key,n))}getParentGroupStatusVisited(e,n,i,a){const u=[];i.subGroups.forEach(l=>{l.id!==n&&u.push(l.id)}),this.areGroupsVisited(e.owner,u).pipe((0,h.q)(1)).subscribe(l=>{if(l){a.push(i.id);const C=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,i.id));C&&this.getParentGroupStatusVisited(e,i.id,C,a)}})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(w.yh),t.LFG(ut))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),J=(()=>{class r{constructor(e,n,i,a){this.store=e,this.configuratorCommonsService=n,this.configuratorUtilsService=i,this.configuratorGroupStatusService=a}getCurrentGroupId(e){return this.configuratorCommonsService.getConfiguration(e).pipe((0,v.U)(n=>n.interactionState.currentGroup?n.interactionState.currentGroup:n.groups[0]?.id))}getFirstConflictGroup(e){return e.flatGroups.find(n=>n.groupType===s.GroupType.CONFLICT_GROUP)}navigateToFirstIncompleteGroup(e){this.configuratorCommonsService.getConfiguration(e).pipe((0,h.q)(1)).subscribe(n=>{const i=this.configuratorGroupStatusService.getFirstIncompleteGroup(n)?.id;i&&this.navigateToGroup(n,i,!0)})}navigateToConflictSolver(e){this.configuratorCommonsService.getConfiguration(e).pipe((0,h.q)(1)).subscribe(n=>{const i=this.getFirstConflictGroup(n)?.id;i&&this.navigateToGroup(n,i,!0,!0)})}getMenuParentGroup(e){return this.configuratorCommonsService.getConfiguration(e).pipe((0,v.U)(n=>{const i=n.interactionState.menuParentGroup;return i?this.configuratorUtilsService.getOptionalGroupById(n.groups,i):void 0}))}setMenuParentGroup(e,n){this.store.dispatch(new xe({entityKey:e.key,menuParentGroup:n}))}getCurrentGroup(e){return this.getCurrentGroupId(e).pipe((0,m.w)(n=>this.configuratorCommonsService.getConfiguration(e).pipe((0,v.U)(i=>this.configuratorUtilsService.getGroupById(i.groups,n)))))}getConflictGroupForImmediateConflictResolution(e){return this.configuratorCommonsService.getConfiguration(e).pipe((0,z.g)(0),(0,v.U)(n=>{if(n.interactionState.showConflictSolverDialog)return n.flatGroups.find(i=>i.groupType===s.GroupType.CONFLICT_GROUP)}))}setGroupStatusVisited(e,n){this.configuratorCommonsService.getConfiguration(e).pipe((0,v.U)(i=>this.configuratorGroupStatusService.setGroupStatusVisited(i,n)),(0,h.q)(1)).subscribe()}navigateToGroup(e,n,i=!0,a=!1){i&&this.getCurrentGroup(e.owner).pipe((0,h.q)(1)).subscribe(l=>{this.configuratorGroupStatusService.setGroupStatusVisited(e,l.id)});const u=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,n));this.store.dispatch(new Te({configuration:e,groupId:n,parentGroupId:u?u.id:void 0,conflictResolutionMode:a}))}getNextGroupId(e){return this.getNeighboringGroupId(e,1)}getPreviousGroupId(e){return this.getNeighboringGroupId(e,-1)}isGroupVisited(e,n){return this.configuratorGroupStatusService.isGroupVisited(e,n)}getParentGroup(e,n){return this.configuratorUtilsService.getParentGroup(e,n)}hasSubGroups(e){return this.configuratorUtilsService.hasSubGroups(e)}isConflictGroupInImmediateConflictResolutionMode(e,n=!1){return!!e&&e===s.GroupType.CONFLICT_GROUP&&n}getNeighboringGroupId(e,n){return this.getCurrentGroupId(e).pipe((0,m.w)(i=>this.configuratorCommonsService.getConfiguration(e).pipe((0,v.U)(a=>{let u;return a.flatGroups.forEach((l,C)=>{l.id===i&&a.flatGroups&&a.flatGroups[C+n]&&!this.isConflictGroupInImmediateConflictResolutionMode(a.flatGroups[C+n]?.groupType,a.immediateConflictResolution)&&(u=a.flatGroups[C+n].id)}),u}),(0,h.q)(1))))}isConflictGroupType(e){return e===s.GroupType.CONFLICT_HEADER_GROUP||e===s.GroupType.CONFLICT_GROUP}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(w.yh),t.LFG(O),t.LFG(ut),t.LFG(Zr))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),R=(()=>{class r{constructor(e,n,i){this.configuratorGroupsService=e,this.windowRef=n,this.keyboardFocusService=i,this.CX_PREFIX="cx",this.SEPARATOR="--",this.ADD_TO_CART_BUTTON_HEIGHT=82,this.logger=(0,t.f3M)(c.mQy)}isCartEntryOrGroupVisited(e,n){return this.configuratorGroupsService.isGroupVisited(e,n).pipe((0,h.q)(1),(0,v.U)(i=>!!i||e.type===y.$g.OwnerType.CART_ENTRY))}assembleValuesForMultiSelectAttributes(e,n){const i=[];for(let a=0;a<e.length;a++){const u=n.values?n.values[a]:void 0;if(u){const l={valueCode:u.valueCode};l.name=u.name,l.quantity=u.quantity,l.selected=e[a].value,i.push(l)}else(0,t.X6Q)()&&this.logger.warn("ControlArray does not match values, at least one value could not been found")}return i}scroll(e){let n=0;e instanceof HTMLElement&&(n=e.offsetTop),this.windowRef.nativeWindow?.scroll(0,n)}scrollToConfigurationElement(e){if(this.windowRef.isBrowser()){const n=this.getElement(e);n&&this.scroll(n)}}focusFirstAttribute(){if(!this.windowRef.isBrowser())return;const e=this.getElement("cx-configurator-form");if(e){const n=this.keyboardFocusService.findFocusable(e);n&&n.length>0&&n[0].focus()}}getFocusableElementById(e,n){return e.find(i=>{if(n&&(-1!==i.nodeName.toLocaleLowerCase().indexOf(n)||-1!==i.id.indexOf(n)))return i})}getFocusableConflictDescription(e){return this.getFocusableElementById(e,"cx-configurator-conflict-description")}getFocusableElementByValueUiKey(e,n){return this.getFocusableElementById(e,n)}getFocusableElementByAttributeId(e,n){return this.getFocusableElementById(e,n)}createAttributeValueUiKey(e,n){return e+this.SEPARATOR+n}focusValue(e){if(!this.windowRef.isBrowser())return;const n=this.getElement("cx-configurator-form");if(n){const i=this.keyboardFocusService.findFocusable(n);i.length>0&&this.focusOnElements(i,e)}}focusOnElements(e,n){let i=this.getFocusableConflictDescription(e);i||(i=this.focusOnElementForConflicting(n,i,e)),i&&i.focus()}focusOnElementForConflicting(e,n,i){const a=e.values?.find(u=>u.selected);if(a){const u=this.createAttributeValueUiKey(e.name,a.valueCode);n=this.getFocusableElementByValueUiKey(i,u)}return n||(n=this.getFocusableElementByAttributeId(i,e.name)),n}getPrefixId(e,n){return e?e+this.SEPARATOR+n:this.CX_PREFIX+this.SEPARATOR+n}createGroupId(e){if(e)return e+"-group"}createOvGroupId(e,n){return this.getPrefixId(e,n)+"-ovGroup"}createOvMenuItemId(e,n){return this.getPrefixId(e,n)+"-ovMenuItem"}setFocus(e,n){e&&this.keyboardFocusService.set(e,n)}changeStyling(e,n,i){const a=this.getElement(e);a&&a.style.setProperty(n,i)}removeStyling(e,n){const i=this.getElement(e);i&&i.style.removeProperty(n)}getElement(e){if(this.windowRef.isBrowser())return this.windowRef.document.querySelector(e)}getElements(e){if(this.windowRef.isBrowser())return Array.from(this.windowRef.document.querySelectorAll(e))}getVerticallyScrolledPixels(){if(this.windowRef.isBrowser())return this.windowRef.nativeWindow?.scrollY}hasScrollbar(e){const n=this.getElement(e);return!!n&&n.scrollHeight>n.clientHeight}isInViewport(e){if(e){const n=e.getBoundingClientRect(),i=e.offsetHeight,a=e.offsetWidth;return n.top>=-i&&n.left>=-a&&n.right<=(this.windowRef.nativeWindow?.innerWidth||e.clientWidth)+a&&n.bottom<=(this.windowRef.nativeWindow?.innerHeight||e.clientHeight)+i}return!1}getHeight(e){const n=this.getElement(e);return this.isInViewport(n)&&n?.offsetHeight?n?.offsetHeight:0}getSpareViewportHeight(){if(this.windowRef.isBrowser()){const e=this.getHeight("header"),n=this.getHeight(".VariantConfigOverviewHeader"),i=0!==this.getHeight("cx-configurator-add-to-cart-button")?this.getHeight("cx-configurator-add-to-cart-button"):this.ADD_TO_CART_BUTTON_HEIGHT;return this.windowRef.nativeWindow?this.windowRef.nativeWindow.innerHeight-(e+n+2*i):0}return 0}ensureElementVisible(e,n){const i=this.getElement(e);if(n&&i)if(n.offsetTop>i.scrollTop){const a=n.offsetTop+n.offsetHeight;a>i.scrollTop&&(i.scrollTop=a-i.offsetHeight)}else i.scrollTop=n.getBoundingClientRect()?.top-10}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(J),t.LFG(c.X9E),t.LFG(f.K9x))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),kr=(()=>{class r{constructor(){this._quantity=new Gt.t(1)}setQuantity(e){this._quantity.next(e)}getQuantity(){return this._quantity}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();let sc=(()=>{class r{constructor(e,n,i,a,u,l,C,g,d,T,E){this.routingService=e,this.configuratorCommonsService=n,this.configuratorCartService=i,this.configuratorGroupsService=a,this.configRouterExtractorService=u,this.globalMessageService=l,this.orderHistoryFacade=C,this.commonConfiguratorUtilsService=g,this.configUtils=d,this.intersectionService=T,this.configuratorQuantityService=E,this.subscription=new Q.w,this.quantityControl=new _.p4(1),this.iconType=f.e1G,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(st=>this.configuratorCommonsService.getConfiguration(st.owner).pipe((0,v.U)(ht=>({routerData:st,configuration:ht}))).pipe((0,m.w)(ht=>this.configuratorCommonsService.hasPendingChanges(ht.configuration.owner).pipe((0,v.U)($l=>({routerData:ht.routerData,configuration:ht.configuration,hasPendingChanges:$l})))))))}ngOnInit(){this.makeAddToCartButtonSticky(),this.configuratorQuantityService&&this.configuratorQuantityService.getQuantity().pipe((0,h.q)(1)).subscribe(e=>{this.quantityControl.setValue(e)}),this.subscription.add(this.quantityControl.valueChanges.pipe((0,yt.x)()).subscribe(()=>this.configuratorQuantityService?.setQuantity(this.quantityControl.value)))}navigateToCart(){this.routingService.go("cart")}navigateToOverview(e,n){this.routingService.go({cxRoute:"configureOverview"+e,params:{ownerType:"cartEntry",entityKey:n.id}})}displayConfirmationMessage(e){this.globalMessageService.add({key:e},c.xUg.MSG_TYPE_CONFIRMATION)}performNavigation(e,n,i,a,u){const l=i?"configurator.addToCart.confirmation":"configurator.addToCart.confirmationUpdate";a?this.navigateToCart():this.navigateToOverview(e,n),u&&this.displayConfirmationMessage(l)}getButtonResourceKey(e,n){return e.isOwnerCartEntry&&n.isCartEntryUpdateRequired?"configurator.addToCart.buttonUpdateCart":e.isOwnerCartEntry&&!n.isCartEntryUpdateRequired?"configurator.addToCart.buttonAfterAddToCart":"configurator.addToCart.button"}isCartEntry(e){return!!e.isOwnerCartEntry&&e.isOwnerCartEntry}onAddToCart(e,n){const a=e.owner.configuratorType,u=n.pageType===y.iB.PageType.OVERVIEW,l=n.owner.type===y.$g.OwnerType.CART_ENTRY,C=e.owner,g=e.interactionState.currentGroup;g&&this.configuratorGroupsService.setGroupStatusVisited(e.owner,g),this.container$.pipe((0,S.h)(d=>!d.hasPendingChanges),(0,h.q)(1)).subscribe(()=>{l?this.onUpdateCart(e,a,C,u):this.onAddToCartForProduct(C,e,a,u)})}onAddToCartForProduct(e,n,i,a){this.configuratorCartService.addToCart(e.id,n.configId,e,this.quantityControl.value),this.configuratorCommonsService.getConfiguration(e).pipe((0,S.h)(l=>void 0!==l.nextOwner),(0,h.q)(1)).subscribe(l=>{this.navigateForProductBound(l,i,a)})}navigateForProductBound(e,n,i){const a=e.nextOwner??y.mR.createInitialOwner();this.performNavigation(n,a,!0,i,!0),i||this.configuratorCommonsService.removeConfiguration(a)}onUpdateCart(e,n,i,a){e.isCartEntryUpdateRequired&&this.configuratorCartService.updateCartEntry(e),this.performNavigation(n,i,!1,a,e.isCartEntryUpdateRequired??!1),e.isCartEntryUpdateRequired&&!a&&this.configuratorCommonsService.removeConfiguration(i)}leaveConfigurationOverview(){this.container$.pipe((0,h.q)(1)).subscribe(e=>{e.routerData.owner.type===y.$g.OwnerType.ORDER_ENTRY?this.goToOrderDetails(e.routerData.owner):this.routingService.go({cxRoute:"checkoutReviewOrder"})})}goToOrderDetails(e){this.orderHistoryFacade.loadOrderDetails(this.commonConfiguratorUtilsService.decomposeOwnerId(e.id).documentId),this.orderHistoryFacade.getOrderDetails().pipe((0,S.h)(n=>void 0!==n),(0,h.q)(1)).subscribe(n=>this.routingService.go({cxRoute:"orderDetails",params:n}))}extractConfigPrices(e){const n=e.priceSummary,i=n?.basePrice?.formattedValue,a=n?.selectedOptions?.formattedValue,u=n?.currentTotal?.formattedValue,l={basePrice:i,selectedOptions:a,totalPrice:u};return(!i||"-"===i)&&(l.basePrice="0"),(!a||"-"===a)&&(l.selectedOptions="0"),(!u||"-"===u)&&(l.totalPrice="0"),l}makeAddToCartButtonSticky(){const e={rootMargin:"9999px 0px -100px 0px"};this.subscription.add(this.container$.pipe((0,h.q)(1),(0,z.g)(0),(0,v.U)(()=>this.configUtils.getElement("cx-configurator-price-summary")),(0,m.w)(n=>n?this.intersectionService.isIntersecting(n,e):(0,N.of)(void 0)),(0,S.h)(n=>void 0!==n)).subscribe(n=>{this.configUtils.changeStyling("cx-configurator-add-to-cart-button","position",n?"sticky":"fixed")}))}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.Znh),t.Y36(O),t.Y36(Ie),t.Y36(J),t.Y36(y.u6),t.Y36(c.IWp),t.Y36(In.Kr),t.Y36(y.NU),t.Y36(R),t.Y36(f.o8g),t.Y36(kr,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-add-to-cart-button"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["displayOnly",""],[1,"cx-add-to-cart-btn-container"],[4,"cxFeatureLevel"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click"],[1,"cx-quantity-add-to-cart-container"],[1,"cx-quantity-add-to-cart-row"],[1,"cx-quantity"],[3,"control"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"title","click"],[3,"type"],[1,"cx-display-only-btn-container"],[1,"cx-btn","btn","btn-block","btn-primary","cx-display-only-btn",3,"click"],[1,"cx-btn","btn","btn-block","btn-secondary","cx-display-only-btn",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,Nn,4,2,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.container$))},dependencies:[p.O5,f.odZ,f.oJW,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),lc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorAddToCartButton:{component:sc}}})],imports:[p.ez,c.LUR,f.Td$,f.QX1,c.GSh]}),r})(),B=(()=>{class r{createValueUiKey(e,n,i){return this.createAttributeUiKey(e,n)+r.SEPERATOR+i}createAttributeValueIdForConfigurator(e,n){return this.createValueUiKey(this.getUiType(e),e.name,n)}getUiType(e){return e.uiType?e.uiType:s.UiType.NOT_IMPLEMENTED}createAttributeUiKey(e,n){return r.PREFIX+r.SEPERATOR+e+r.SEPERATOR+n}createAttributeIdForConfigurator(e){return this.createAttributeUiKey(this.getUiType(e),e.name)}createAriaLabelledBy(e,n,i,a){let u=this.createAttributeUiKey(r.PREFIX_LABEL,n);return i&&(u+=" "+this.createAttributeUiKey(e,n)+r.SEPERATOR+i+" ",u+="boolean"!=typeof a||a?this.createAttributeUiKey(r.PREFIX_OPTION_PRICE_VALUE,n)+r.SEPERATOR+i:this.createAttributeUiKey(r.PREFIX_DDLB_OPTION_PRICE_VALUE,n)+r.SEPERATOR+i),u}createFocusId(e,n){return`${e}--${n}--focus`}getLabel(e,n,i,a){let u=n||"";return e&&i&&(u+=` / [${i}]`),u+=this.getValuePrice(a),u}getImage(e){const n=e.images;return n?n[0]:void 0}getValuePrice(e){if(e?.valuePrice?.value&&!e.selected){if(e.valuePrice.value<0)return` [${e.valuePrice?.formattedValue}]`;if(e.valuePrice.value>0)return` [+${e.valuePrice?.formattedValue}]`}return""}getAttributeCode(e){const n=e.attrCode;if(n)return n;throw new Error("No attribute code for: "+e.name)}isWithAdditionalValues(e){const n=e.uiType;return n===s.UiType.RADIOBUTTON_ADDITIONAL_INPUT||n===s.UiType.DROPDOWN_ADDITIONAL_INPUT}isRequiredErrorMsg(e){return e.required&&e.incomplete||!1}isUserInput(e){return e.uiType===s.UiType.STRING||e.uiType===s.UiType.NUMERIC}isDropDown(e){return e.uiType===s.UiType.DROPDOWN||e.uiType===s.UiType.DROPDOWN_PRODUCT}getSelectedValue(e){return e.values?.find(n=>n.selected)}isNoValueSelected(e){const n=this.getSelectedValue(e);return!n||n.valueCode===s.RetractValueCode}}return r.SEPERATOR="--",r.PREFIX="cx-configurator",r.PREFIX_LABEL="label",r.PREFIX_OPTION_PRICE_VALUE="price--optionsPriceValue",r.PREFIX_DDLB_OPTION_PRICE_VALUE="option--price",r})(),M=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),pc=(()=>{class r extends B{constructor(e,n,i){super(),this.configUtils=e,this.attributeComponentContext=n,this.featureConfigService=i,this.iconType=f.e1G,this.attribute=n.attribute,this.owner=n.owner,this.groupId=n.group.id}ngOnInit(){this.showRequiredMessageForUserInput$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,v.U)(e=>!!e&&this.needsRequiredAttributeErrorMsg()))}needsRequiredAttributeErrorMsg(){return this.featureConfigService?.isLevel("6.2")?this.needsUserInputMsg()||this.needsDropDownMsg():this.needsUserInputMsg()}needsDropDownMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)}isUserInputEmpty(e){return void 0!==e&&(!e.trim()||0===e.length)}needsUserInputMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute)&&this.isUserInputEmpty(this.attribute.userInput)}needsUserInputMessage(){const e=this.attribute.uiType;return(this.attribute.required&&this.attribute.incomplete&&(e===s.UiType.STRING||e===s.UiType.NUMERIC)&&this.isUserInputEmpty(this.attribute.userInput))??!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(R),t.Y36(M),t.Y36(c.Ru9,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-footer"]],features:[t.qOj],decls:2,vars:2,consts:[[4,"cxFeatureLevel"],["class","cx-required-error-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-required-error-msg",3,"id"],[3,"type"],[4,"ngIf"]],template:function(e,n){1&e&&(t.YNc(0,Gn,3,3,"ng-container",0),t.YNc(1,qn,3,3,"ng-container",0)),2&e&&(t.Q6J("cxFeatureLevel","!6.2"),t.xp6(1),t.Q6J("cxFeatureLevel","6.2"))},dependencies:[p.O5,f.oJW,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),gc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{Footer:pc}}})],imports:[_.u5,_.UX,p.ez,c.LUR,f.QX1,c.GSh]}),r})(),dt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:function(e){let n=null;return n=e?new(e||r):t.LFG(c.DeH),n},providedIn:"root"}),r})(),dc=(()=>{class r extends B{constructor(e,n,i,a,u,l){super(),this.configUtils=e,this.configuratorCommonsService=n,this.configuratorGroupsService=i,this.configuratorUiSettings=a,this.attributeComponentContext=u,this.featureConfigService=l,this.iconTypes=f.e1G,this.logger=(0,t.f3M)(c.mQy),this.attribute=u.attribute,this.owner=u.owner,this.groupId=u.group.id,this.groupType=u.group.groupType??s.GroupType.ATTRIBUTE_GROUP,this.expMode=u.expMode,this.isNavigationToGroupEnabled=u.isNavigationToGroupEnabled??!1}ngOnInit(){this.showRequiredMessageForDomainAttribute$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,v.U)(e=>e&&this.needsRequiredAttributeErrorMsg()))}getRequiredMessageKey(){return this.isSingleSelection()?this.isWithAdditionalValues(this.attribute)?"configurator.attribute.singleSelectAdditionalRequiredMessage":"configurator.attribute.singleSelectRequiredMessage":this.isMultiSelection?"configurator.attribute.multiSelectRequiredMessage":"configurator.attribute.singleSelectRequiredMessage"}get isMultiSelection(){switch(this.attribute.uiType){case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOXLIST_PRODUCT:case s.UiType.MULTI_SELECTION_IMAGE:return!0}return!1}isSingleSelection(){switch(this.attribute.uiType){case s.UiType.RADIOBUTTON:case s.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case s.UiType.RADIOBUTTON_PRODUCT:case s.UiType.CHECKBOX:case s.UiType.DROPDOWN_ADDITIONAL_INPUT:case s.UiType.SINGLE_SELECTION_IMAGE:return!0}return!1}isAttributeWithoutErrorMsg(e){switch(e){case s.UiType.NOT_IMPLEMENTED:case s.UiType.STRING:case s.UiType.NUMERIC:case s.UiType.CHECKBOX:case s.UiType.DROPDOWN:case s.UiType.DROPDOWN_PRODUCT:return!1}return!0}isAttributeWithDomain(e){switch(e){case s.UiType.NOT_IMPLEMENTED:case s.UiType.STRING:case s.UiType.NUMERIC:case s.UiType.CHECKBOX:return!1}return!0}needsRequiredAttributeErrorMsg(){return this.featureConfigService?.isLevel("6.2")?this.isRequiredAttributeWithoutErrorMsg():this.isRequiredAttributeWithDomain()}isRequiredAttributeWithDomain(){return this.isRequiredErrorMsg(this.attribute)&&this.isAttributeWithDomain(this.attribute.uiType)}isRequiredAttributeWithoutErrorMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isAttributeWithoutErrorMsg(this.attribute.uiType)}isAttributeGroup(){return s.GroupType.ATTRIBUTE_GROUP===this.groupType}isConflictResolutionActive(){return this.isAttributeGroup()&&this.isNavigationToGroupEnabled}getConflictMessageKey(){return this.groupType===s.GroupType.CONFLICT_GROUP?"configurator.conflict.viewConfigurationDetails":this.isNavigationToConflictEnabled()?"configurator.conflict.viewConflictDetails":"configurator.conflict.conflictDetected"}get hasImage(){const e=this.attribute.images;return!!e&&e.length>0}get image(){const e=this.attribute.images;return e&&this.hasImage?e[0]:void 0}navigateToGroup(){this.configuratorCommonsService.getConfiguration(this.owner).pipe((0,h.q)(1)).subscribe(e=>{let n;n=this.groupType===s.GroupType.CONFLICT_GROUP?this.attribute.groupId:this.findConflictGroupId(e,this.attribute),n?(this.configuratorGroupsService.navigateToGroup(e,n),this.focusValue(this.attribute),this.scrollToAttribute(this.attribute.name)):this.logError('Attribute was not found in any conflict group. Note that for this navigation, commerce 22.05 or later is required. Consider to disable setting "enableNavigationToConflict"')})}scrollToAttribute(e){this.onNavigationCompleted(()=>this.configUtils.scrollToConfigurationElement("#"+this.createAttributeUiKey("label",e)))}findConflictGroupId(e,n){return e.flatGroups.filter(i=>i.groupType===s.GroupType.CONFLICT_GROUP).find(i=>i.attributes?.find(a=>a.key===n.key))?.id}logError(e){(0,t.X6Q)()&&this.logger.error(e)}focusValue(e){this.onNavigationCompleted(()=>this.configUtils.focusValue(e))}onNavigationCompleted(e){this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,S.h)(n=>n),(0,h.q)(1),(0,m.w)(()=>this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,S.h)(n=>!n),(0,h.q)(1),(0,z.g)(0)))).subscribe(e)}isNavigationToConflictEnabled(){return(this.isNavigationToGroupEnabled&&this.configuratorUiSettings.productConfigurator?.enableNavigationToConflict)??!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(R),t.Y36(O),t.Y36(J),t.Y36(dt),t.Y36(M),t.Y36(c.Ru9,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-header"]],features:[t.qOj],decls:15,vars:26,consts:[["class","cx-hidden-msg",4,"ngIf"],[3,"id"],["class","cx-conflict-msg",3,"id",4,"ngIf"],["class","cx-required-error-msg",3,"id",4,"ngIf"],["class","cx-attribute-img",3,"src","alt",4,"ngIf"],["conflictGroup",""],["withoutLink",""],[1,"cx-hidden-msg"],["aria-hidden","true",3,"type"],[1,"cx-conflict-msg",3,"id"],["aria-hidden","true",3,"type",4,"ngIf"],[4,"ngIf","ngIfElse"],["tabindex","0",1,"link","cx-action-link",3,"click","keydown.enter"],[1,"cx-required-error-msg",3,"id"],[3,"type"],[1,"cx-attribute-img",3,"src","alt"],["class","link cx-action-link","tabindex","0",3,"click","keydown.enter",4,"ngIf"],[1,"cx-conflict-msg"]],template:function(e,n){1&e&&(t.YNc(0,Zn,4,4,"div",0),t.TgZ(1,"label",1),t.ALo(2,"async"),t.ALo(3,"cxTranslate"),t.ALo(4,"cxTranslate"),t.TgZ(5,"span"),t._uU(6),t.qZA()(),t.YNc(7,Yn,4,10,"div",2),t.YNc(8,Jn,5,8,"div",3),t.ALo(9,"async"),t.YNc(10,$n,1,2,"img",4),t.YNc(11,Hn,1,1,"ng-template",null,5,t.W1O),t.YNc(13,Wn,3,3,"ng-template",null,6,t.W1O)),2&e&&(t.Q6J("ngIf",!n.attribute.visible),t.xp6(1),t.ekj("cx-required-error",t.lcZ(2,12,n.showRequiredMessageForDomainAttribute$)),t.s9C("id",n.createAttributeUiKey("label",n.attribute.name)),t.uIk("aria-label",n.attribute.required?t.xi3(4,17,"configurator.a11y.requiredAttribute",t.VKq(24,zn,n.attribute.label)):t.xi3(3,14,"configurator.a11y.attribute",t.VKq(22,X,n.attribute.label))),t.xp6(4),t.ekj("cx-required-icon",n.attribute.required),t.uIk("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)),t.xp6(1),t.Oqu(n.getLabel(n.expMode,n.attribute.label,n.attribute.name)),t.xp6(1),t.Q6J("ngIf",n.attribute.hasConflicts),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,20,n.showRequiredMessageForDomainAttribute$)),t.xp6(2),t.Q6J("ngIf",n.hasImage))},dependencies:[p.O5,f.oJW,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),fc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{Header:dc}}})],imports:[_.u5,_.UX,p.ez,c.LUR,f.QX1,j.A0]}),r})(),_c=(()=>{class r{constructor(e){this.cdRef=e,this.showMore=!1,this.showHiddenText=!1,this.textSize=60}ngAfterViewInit(){this.textNormalized=this.normalize(this.text),this.textNormalized.length>this.textSize?(this.showMore=!0,this.textToShow=this.textNormalized.substring(0,this.textSize)):this.textToShow=this.textNormalized,this.cdRef.detectChanges()}toggleShowMore(){this.showHiddenText=!this.showHiddenText,this.textToShow=this.showHiddenText?this.textNormalized:this.textNormalized.substring(0,this.textSize),this.cdRef.detectChanges()}normalize(e=""){return e.replace(/<[^>]*>/g,"")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.sBO))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-show-more"]],inputs:{text:"text",textSize:"textSize",productName:"productName"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"],["tabindex","-1",3,"click",4,"ngIf"],["tabindex","-1",3,"click"],[4,"ngIf","ngIfElse"],["less",""]],template:function(e,n){1&e&&t.YNc(0,ri,4,8,"ng-container",0),2&e&&t.Q6J("ngIf",n.text)},dependencies:[p.O5,c.X$D],encapsulation:2,changeDetection:0}),r})(),tt=(()=>{class r{constructor(e){this.config=e,this.quantity=new _.p4(1),this.optionsChangeSub=new Q.w,this.quantityChangeSub=new Q.w,this.changeQuantity=new t.vpe}ngOnInit(){this.quantity.setValue(this.quantityOptions?.initialQuantity),this.optionsChangeSub.add(this.quantityOptions.disableQuantityActions$?.pipe(function hn(r,o){return e=>e.lift(new mn(r,o))}()).subscribe(e=>{e?(this.quantity.disable(),this.quantityChangeSub.unsubscribe()):(this.quantity.enable(),this.quantityChangeSub.add(this.subscribeToQuantityChange()))}))}subscribeToQuantityChange(){return this.quantity.valueChanges.pipe((0,Vt.D)(()=>(0,Pt.H)(this.config.productConfigurator?.updateDebounceTime?.quantity??0)),(0,h.q)(1)).subscribe(()=>this.onChangeQuantity())}ngOnDestroy(){this.optionsChangeSub.unsubscribe(),this.quantityChangeSub.unsubscribe()}onChangeQuantity(){this.changeQuantity.emit(this.quantity?.value)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(dt))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-quantity"]],inputs:{quantityOptions:"quantityOptions"},outputs:{changeQuantity:"changeQuantity"},decls:5,vars:6,consts:[[1,"cx-quantity"],[3,"allowZero","control","min"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"label"),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t._UZ(4,"cx-item-counter",1),t.qZA()),2&e){let i;t.xp6(2),t.Oqu(t.lcZ(3,4,"configurator.attribute.quantity")),t.xp6(2),t.Q6J("allowZero",null!==(i=n.quantityOptions.allowZero)&&void 0!==i&&i)("control",n.quantity)("min",n.quantityOptions.allowZero?0:1)}},dependencies:[f.odZ,c.X$D],encapsulation:2,changeDetection:0}),r})(),L=(()=>{class r{constructor(e){this.directionService=e}isRTLDirection(){return this.directionService.getDirection()===f.uEG.RTL}removeSign(e,n){return e?e.replace(n,""):""}addSign(e,n,i){return e?i?n+e:e+n:""}compileFormattedValue(e,n,i){if(e>0)return this.addSign(n,"+",!i);if(i){const a=this.removeSign(n,"-");return this.addSign(a,"-",!1)}return n??""}get price(){return this.formula.priceTotal?this.priceTotal:this.compileFormattedValue(this.formula.price?.value??0,this.formula.price?.formattedValue,this.isRTLDirection())}get priceTotal(){return this.compileFormattedValue(this.formula.priceTotal?.value??0,this.formula.priceTotal?.formattedValue,this.isRTLDirection())}displayQuantityAndPrice(){const e=this.formula.quantity;return!!e&&0!==this.formula.price?.value&&e>=1}displayPriceOnly(){return(0!==(this.formula.price?.value??0)||0!==(this.formula.priceTotal?.value??0))&&!this.displayQuantityAndPrice()}displayFormula(){return(this.formula.quantity&&0!==this.formula.quantity||this.formula.price&&0!==this.formula.price?.value||this.formula.priceTotal&&0!==this.formula.priceTotal?.value)??!1}quantityWithPrice(e){return e+"x("+this.formula.price?.formattedValue+")"}isPriceLightedUp(){return this.formula.isLightedUp??!1}get styleClass(){let e="cx-price";return this.isPriceLightedUp()||(e+=" cx-greyed-out"),e}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.Lh6))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-price"]],inputs:{formula:"formula"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],[1,"cx-quantity-price"],[1,"cx-price-total"]],template:function(e,n){1&e&&t.YNc(0,oi,3,2,"ng-container",0),2&e&&t.Q6J("ngIf",n.displayFormula())},dependencies:[p.mk,p.O5,c.X$D,c.bOD],encapsulation:2,changeDetection:0}),r})(),Se=(()=>{class r extends B{constructor(e,n,i){super(),this.productService=e,this.keyBoardFocus=n,this.translation=i,this.loading$=new mt.X(!0),this.showDeselectionNotPossible=!1,this.handleDeselect=new t.vpe,this.handleQuantity=new t.vpe,this.handleSelect=new t.vpe,this.iconType=f.e1G}ngOnInit(){this.loading$.next(!0),this.product$=this.productService.get(this.productCardOptions.productBoundValue.productSystemId||"",y.ns.CONFIGURATOR_PRODUCT_CARD).pipe((0,v.U)(n=>n||this.transformToProductType(this.productCardOptions.productBoundValue)),(0,D.b)(()=>this.loading$.next(!1)))}get showQuantity(){return(this.productCardOptions.withQuantity&&this.productCardOptions.productBoundValue.selected&&this.productCardOptions.multiSelect)??!1}get attributeName(){return this.productCardOptions.attributeName||this.productCardOptions.attributeId.toString()}get focusConfig(){return{key:this.createFocusId(this.productCardOptions.attributeId.toString(),this.productCardOptions.productBoundValue.valueCode)}}onHandleSelect(){this.loading$.next(!0),this.productCardOptions.hideRemoveButton&&this.productCardOptions.fallbackFocusId&&this.keyBoardFocus.set(this.productCardOptions.fallbackFocusId),this.handleSelect.emit(this.productCardOptions.productBoundValue.valueCode)}onHandleDeselect(){this.productCardOptions.productBoundValue.selected&&this.productCardOptions.hideRemoveButton?this.showDeselectionNotPossibleMessage():(this.loading$.next(!0),this.handleDeselect.emit(this.productCardOptions.productBoundValue.valueCode))}onChangeQuantity(e){e?this.onHandleQuantity(e):this.onHandleDeselect()}isProductCardSelected(){return(this.productCardOptions.productBoundValue&&this.productCardOptions.productBoundValue.selected&&!this.productCardOptions.singleDropdown)??!1}hasPriceDisplay(){return!!(this.productCardOptions.productBoundValue.valuePrice||this.productCardOptions.productBoundValue.quantity||this.productCardOptions.productBoundValue.valuePriceTotal)}extractPriceFormulaParameters(){return this.productCardOptions.multiSelect?{quantity:this.productCardOptions.productBoundValue.quantity,price:this.productCardOptions.productBoundValue.valuePrice,priceTotal:this.productCardOptions.productBoundValue.valuePriceTotal,isLightedUp:this.productCardOptions.productBoundValue.selected}:{price:this.productCardOptions.productBoundValue.valuePrice,isLightedUp:this.productCardOptions.productBoundValue.selected}}extractQuantityParameters(){const e=this.productCardOptions.productBoundValue.quantity,n=this.productCardOptions.loading$?(0,_n.aj)([this.loading$,this.productCardOptions.loading$]).pipe((0,v.U)(i=>i[0]||i[1])):this.loading$;return{allowZero:!this.productCardOptions.hideRemoveButton,initialQuantity:e||0,disableQuantityActions$:n}}isValueCodeDefined(e){return!(!e||e===s.RetractValueCode)}transformToProductType(e){return{code:e?.productSystemId,description:e?.description,images:{},name:e?.valueDisplay}}onHandleQuantity(e){this.loading$.next(!0),this.handleQuantity.emit({quantity:e,valueCode:this.productCardOptions.productBoundValue.valueCode})}showDeselectionNotPossibleMessage(){this.showDeselectionNotPossible=!0}getAriaLabelSingleUnselected(e){let n="";const i=this.productCardOptions.itemIndex+1;return this.isValueCodeDefined(this.productCardOptions?.productBoundValue?.valueCode)?this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,h.q)(1)).subscribe(a=>n=a):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,h.q)(1)).subscribe(a=>n=a):this.translation.translate("configurator.a11y.selectNoItemOfAttribute",{attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,h.q)(1)).subscribe(a=>n=a),n}getAriaLabelSingleSelected(e){let n="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,h.q)(1)).subscribe(a=>n=a):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,h.q)(1)).subscribe(a=>n=a),n}getAriaLabelSingleSelectedNoButton(e){let n="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,h.q)(1)).subscribe(a=>n=a):this.translation.translate("configurator.a11y.itemOfAttributeSelected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,h.q)(1)).subscribe(a=>n=a),n}getAriaLabelMultiSelected(e){let n="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,h.q)(1)).subscribe(a=>n=a):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,h.q)(1)).subscribe(a=>n=a),n}getAriaLabelMultiUnselected(e){let n="";const i=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,h.q)(1)).subscribe(a=>n=a):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:i,itemCount:this.productCardOptions.itemCount}).pipe((0,h.q)(1)).subscribe(a=>n=a),n}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.M52),t.Y36(f.K9x),t.Y36(c.D7D))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-product-card"]],inputs:{productCardOptions:"productCardOptions"},outputs:{handleDeselect:"handleDeselect",handleQuantity:"handleQuantity",handleSelect:"handleSelect"},features:[t.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-product-card",3,"ngClass"],[1,"cx-product-card-rows"],[1,"cx-product-card-imgs"],["format","product","aria-hidden","true",3,"container"],[1,"cx-product-card-info"],[1,"cx-product-card-name"],["class","cx-product-card-code",4,"ngIf"],[3,"text","textSize","productName",4,"ngIf"],["class","cx-product-card-rows column",4,"ngIf"],[1,"cx-product-card-code"],[3,"text","textSize","productName"],[1,"cx-product-card-rows","column"],[1,"cx-product-card-quantity-price"],[1,"cx-product-card-quantity"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[1,"cx-product-card-price"],[3,"formula"],[1,"cx-product-card-action"],["class","cx-product-card-action-btn",4,"ngIf"],[3,"quantityOptions","changeQuantity"],[1,"cx-product-card-action-btn"],[4,"ngIf","ngIfElse"],["single",""],["class","btn btn-secondary",3,"cxFocus","click",4,"ngIf","ngIfElse"],["select",""],[1,"btn","btn-secondary",3,"cxFocus","click"],[1,"btn","btn-primary",3,"disabled","cxFocus","click"],["class","btn btn-primary",3,"disabled","cxFocus","click",4,"ngIf","ngIfElse"],["deselect",""],["class","btn btn-secondary",3,"disabled","cxFocus","click",4,"ngIf"],["class","cx-visually-hidden","tabindex","0",4,"ngIf"],[1,"btn","btn-secondary",3,"disabled","cxFocus","click"],["tabindex","0",1,"cx-visually-hidden"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-product-card-rows","deselection-error-message",3,"id"],["type","ERROR",1,"deselection-error-symbol"]],template:function(e,n){1&e&&(t.YNc(0,Ti,14,15,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.product$))},dependencies:[p.mk,p.O5,_c,tt,f.R7z,L,f.RRe,f.oJW,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),V=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,c.LUR]}),r})(),Cc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,c.LUR]}),r})();const vc={productConfigurator:{updateDebounceTime:{quantity:750,input:500},addRetractOption:!1,enableNavigationToConflict:!1}};let et=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)(vc)],imports:[p.ez,c.LUR,f.Td$,f.oPH]}),r})(),Oe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,Cc,et,c.LUR,K.Bz,c.bhT,_.u5,_.UX,f.cOq,V,f.oPH,f.QX1]}),r})(),ct=(()=>{class r{disableQuantityActions(e){return!e||"0"===e}disableQuantityActionsMultiSelection(e){return!(e.dataType!==s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL||e.values&&e.values.find(n=>n.selected)&&0!==e.quantity)}withQuantityOnAttributeLevel(e){return e.dataType===s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL}withQuantity(e,n){switch(n){case s.UiType.DROPDOWN_PRODUCT:case s.UiType.DROPDOWN:case s.UiType.RADIOBUTTON_PRODUCT:case s.UiType.RADIOBUTTON:return e===s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOXLIST_PRODUCT:return e===s.DataType.USER_SELECTION_QTY_VALUE_LEVEL;default:return!1}}allowZeroValueQuantity(e){const n=e.values?e.values.filter(i=>i.selected).length:0;return!(e.required&&n<2)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ut=(()=>{class r extends B{constructor(e,n,i,a,u){super(),this.quantityService=e,this.translation=n,this.attributeComponentContext=i,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=u,this.loading$=new mt.X(!1),this.showRequiredErrorMessage$=(0,N.of)(!1),this.attribute=i.attribute,this.ownerKey=i.owner.key,this.ownerType=i.owner.type,this.language=i.language,this.expMode=i.expMode,this.configuratorStorefrontUtilsService&&(this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(i.owner,i.group.id).pipe((0,v.U)(l=>l&&this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)||!1)))}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??s.DataType.NOT_IMPLEMENTED,this.attribute.uiType??s.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActions(this.attribute.selectedSingleValue)}onSelect(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,selectedSingleValue:e},s.UpdateType.ATTRIBUTE)}onSelectAdditionalValue(e){const n=e.changedAttribute.userInput;n&&(this.loading$.next(!0),e.changedAttribute.selectedSingleValue=n,this.configuratorCommonsService.updateConfiguration(e.ownerKey,e.changedAttribute,s.UpdateType.ATTRIBUTE))}onHandleQuantity(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,quantity:e},s.UpdateType.ATTRIBUTE_QUANTITY)}onChangeQuantity(e,n){e?this.onHandleQuantity(e):(n&&n.setValue("0"),this.onSelect(""))}getInitialQuantity(e){const n=this.attribute.quantity??0;return e?"0"!==e.value?n:0:this.attribute.selectedSingleValue?n:0}extractQuantityParameters(e){const n=this.getInitialQuantity(e),i=this.loading$.pipe((0,v.U)(a=>a||this.disableQuantityActions));return{allowZero:!this.attribute.required,initialQuantity:n,disableQuantityActions$:i}}extractPriceFormulaParameters(){return{quantity:this.attribute.quantity,price:this.getSelectedValuePrice(),priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(e){return{price:e?.valuePrice,isLightedUp:!!e&&e.selected}}getSelectedValuePrice(){return this.attribute.values?.find(e=>e.selected)?.valuePrice}get isAdditionalValueNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===s.ValidationType.NUMERIC}get isAdditionalValueAlphaNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===s.ValidationType.NONE}getAriaLabel(e,n){const i=this.getAriaLabelWithoutAdditionalValue(e,n);return this.isWithAdditionalValues(this.attribute)?i+" "+this.getAdditionalValueAriaLabel():i}getAdditionalValueAriaLabel(){let e="";return this.translation.translate("configurator.a11y.additionalValue").pipe((0,h.q)(1)).subscribe(n=>e=n),e}getAriaLabelWithoutAdditionalValue(e,n){let i="";return e.valuePrice&&0!==e.valuePrice?.value?e.valuePriceTotal&&0!==e.valuePriceTotal?.value?this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:e.valueDisplay,attribute:n.label,price:e.valuePriceTotal.formattedValue}).pipe((0,h.q)(1)).subscribe(a=>i=a):this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:e.valueDisplay,attribute:n.label,price:e.valuePrice.formattedValue}).pipe((0,h.q)(1)).subscribe(a=>i=a):this.translation.translate("configurator.a11y.selectedValueOfAttributeFull",{value:e.valueDisplay,attribute:n.label}).pipe((0,h.q)(1)).subscribe(a=>i=a),i}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ct),t.Y36(c.D7D),t.Y36(M),t.Y36(O),t.Y36(R,8))},r.\u0275dir=t.lG2({type:r,features:[t.qOj]}),r})(),Qr=(()=>{class r extends B{constructor(e,n,i){super(),this.quantityService=e,this.attributeComponentContext=n,this.configuratorCommonsService=i,this.loading$=new mt.X(!1),this.attribute=n.attribute,this.ownerKey=n.owner.key,this.expMode=n.expMode}get withQuantityOnAttributeLevel(){return this.quantityService.withQuantityOnAttributeLevel(this.attribute)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??s.DataType.NOT_IMPLEMENTED,this.attribute.uiType??s.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActionsMultiSelection(this.attribute)}extractQuantityParameters(e,n){const i=this.loading$.pipe((0,v.U)(a=>a||this.disableQuantityActions));return{allowZero:n??!this.attribute.required,initialQuantity:e,disableQuantityActions$:i}}onHandleAttributeQuantity(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,quantity:e},s.UpdateType.ATTRIBUTE_QUANTITY)}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(e){return{quantity:e.quantity,price:e.valuePrice,priceTotal:e.valuePriceTotal,isLightedUp:e.selected}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ct),t.Y36(M),t.Y36(O))},r.\u0275dir=t.lG2({type:r,features:[t.qOj]}),r})(),hc=(()=>{class r extends Qr{constructor(e,n,i,a){super(n,i,a),this.configUtilsService=e,this.quantityService=n,this.attributeComponentContext=i,this.configuratorCommonsService=a,this.attributeCheckBoxForms=new Array,this.logger=(0,t.f3M)(c.mQy),this.group=i.group.id}ngOnInit(){const e=!this.allowZeroValueQuantity;for(const n of this.attribute.values??[]){let i;i=new _.p4(!!n.selected&&{value:!0,disabled:e}),this.attributeCheckBoxForms.push(i)}}get allowZeroValueQuantity(){return this.quantityService.allowZeroValueQuantity(this.attribute)}onSelect(){const e=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:e},s.UpdateType.ATTRIBUTE)}onChangeValueQuantity(e,n,i){if(0===e)return this.attributeCheckBoxForms[i].setValue(!1),void this.onSelect();const a=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute).find(u=>u.valueCode===n);a?(a.quantity=e,this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:[a]},s.UpdateType.VALUE_QUANTITY)):(0,t.X6Q)()&&this.logger.warn("no value for event:",e)}onChangeQuantity(e){e?this.onHandleAttributeQuantity(e):(this.attributeCheckBoxForms.forEach((n,i)=>this.attributeCheckBoxForms[i].setValue(!1)),this.onSelect())}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(R),t.Y36(ct),t.Y36(M),t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-checkbox-list"]],features:[t.qOj],decls:6,vars:4,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"id","cxFocus","value","formControl","name","change"],["aria-hidden","true",1,"cx-configurator-attribute-value-label","form-check-label",3,"id","for"],[1,"cx-value-price"],[3,"quantityOptions","changeQuantity",4,"ngIf"]],template:function(e,n){1&e&&(t.TgZ(0,"fieldset")(1,"legend",0),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,xi,3,2,"div",2),t.YNc(5,Ii,12,34,"ng-container",3),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.attribute.label),t.xp6(1),t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(1),t.Q6J("ngIf",n.withQuantityOnAttributeLevel),t.xp6(1),t.Q6J("ngForOf",n.attribute.values))},dependencies:[f.RRe,_.Wl,_.JJ,_.oH,p.sg,p.O5,tt,L,c.X$D],encapsulation:2,changeDetection:0}),r})(),mc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_checkBoxList:hc}}})],imports:[f.oPH,_.u5,_.UX,p.ez,c.LUR,et,V]}),r})(),yc=(()=>{class r extends B{constructor(e,n){super(),this.attributeComponentContext=e,this.configuratorCommonsService=n,this.attributeCheckBoxForm=new _.p4(""),this.attribute=e.attribute,this.group=e.group.id,this.ownerKey=e.owner.key,this.expMode=e.expMode}ngOnInit(){this.attributeCheckBoxForm.setValue(this.attribute.selectedSingleValue),this.attributeValue=this.getValueFromAttribute()}onSelect(){const e=this.assembleSingleValue();this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:e},s.UpdateType.ATTRIBUTE)}getValueFromAttribute(){return this.attribute.values?this.attribute.values[0]:{valueCode:""}}assembleSingleValue(){const e=[],n=this.getValueFromAttribute(),i={valueCode:n.valueCode};return i.name=n.name,i.selected=this.attributeCheckBoxForm.value,e.push(i),e}extractValuePriceFormulaParameters(e){return{quantity:e.quantity,price:e.valuePrice,priceTotal:e.valuePriceTotal,isLightedUp:e.selected}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M),t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-checkbox"]],features:[t.qOj],decls:14,vars:28,consts:[[2,"display","none"],[3,"id"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"id","value","cxFocus","formControl","name","change"],["aria-hidden","true",1,"form-check-label",3,"id","for"],[1,"cx-value-price"],[3,"formula"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"fieldset")(2,"legend",0),t._uU(3),t.qZA(),t.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"input",4),t.NdJ("change",function(){return n.onSelect()}),t.ALo(8,"cxTranslate"),t.ALo(9,"cxTranslate"),t.qZA(),t.TgZ(10,"label",5),t._uU(11),t.qZA()(),t.TgZ(12,"div",6),t._UZ(13,"cx-configurator-price",7),t.qZA()()()(),t.BQk()),2&e&&(t.xp6(3),t.Oqu(n.attribute.label),t.xp6(1),t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(3),t.s9C("id",n.createAttributeValueIdForConfigurator(n.attribute,n.attributeValue.valueCode)),t.s9C("name",n.createAttributeIdForConfigurator(n.attribute)),t.Q6J("value",n.attributeValue.valueCode)("cxFocus",t.VKq(19,G,n.attribute.name+"-"+n.attributeValue.name))("formControl",n.attributeCheckBoxForm),t.uIk("aria-label",n.attributeValue.valuePrice&&0!==(null==n.attributeValue.valuePrice?null:n.attributeValue.valuePrice.value)?t.xi3(8,13,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(21,Y,n.attributeValue.valueDisplay,n.attribute.label,n.attributeValue.valuePrice.formattedValue)):t.xi3(9,16,"configurator.a11y.valueOfAttributeFull",t.WLB(25,Z,n.attributeValue.valueDisplay,n.attribute.label)))("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)+" "+n.createAttributeUiKey("attribute-msg",n.attribute.name)),t.xp6(3),t.s9C("id",n.createValueUiKey("label",n.attribute.name,n.attributeValue.valueCode)),t.s9C("for",n.createAttributeValueIdForConfigurator(n.attribute,n.attributeValue.valueCode)),t.xp6(1),t.Oqu(n.getLabel(n.expMode,n.attributeValue.valueDisplay,n.attributeValue.valueCode)),t.xp6(2),t.Q6J("formula",n.extractValuePriceFormulaParameters(n.attributeValue)))},dependencies:[f.RRe,_.Wl,_.JJ,_.oH,L,c.X$D],encapsulation:2,changeDetection:0}),r})(),bc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_checkBox:yc}}})],imports:[f.oPH,_.u5,_.UX,p.ez,c.LUR,V]}),r})(),Ft=(()=>{class r extends B{constructor(e,n,i,a){super(),this.config=e,this.attributeComponentContext=n,this.configuratorCommonsService=i,this.configuratorStorefrontUtilsService=a,this.attributeInputForm=new _.p4(""),this.showRequiredErrorMessage$=(0,N.of)(!1),this.FALLBACK_DEBOUNCE_TIME=500,this.attribute=n.attribute,this.group=n.group.id,this.owner=n.owner,this.ownerKey=n.owner.key,this.ownerType=n.owner.type,this.configuratorStorefrontUtilsService&&(this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(this.owner,this.group).pipe((0,v.U)(u=>!!u&&this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute))))}ngOnInit(){this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===y.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe((0,Vt.D)(()=>(0,Pt.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}onChange(){this.attributeInputForm.invalid||this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,userInput:this.attributeInputForm.value,selectedSingleValue:this.attributeInputForm.value},s.UpdateType.ATTRIBUTE)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}get isUserInputEmpty(){return!this.attribute.userInput||0===this.attribute.userInput.trim().length}get isRequired(){return!!this.isUserInput(this.attribute)&&(this.attribute.required??!1)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(dt),t.Y36(M),t.Y36(O),t.Y36(R,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-input-field"]],features:[t.qOj],decls:3,vars:3,consts:[[1,"form-group",3,"id"],[4,"cxFeatureLevel"],[1,"form-control",3,"formControl","required","maxlength","cxFocus"],[1,"form-control",3,"formControl","ngClass","maxlength","cxFocus"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Si,4,20,"ng-container",1),t.YNc(2,Oi,5,25,"ng-container",1),t.qZA()),2&e&&(t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(1),t.Q6J("cxFeatureLevel","!6.2"),t.xp6(1),t.Q6J("cxFeatureLevel","6.2"))},dependencies:[f.RRe,_.Fj,_.JJ,_.Q7,_.nD,_.oH,p.mk,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Tc=(()=>{class r{performValidationAccordingToMetaData(e,n,i,a,u){const C=new RegExp("\\"+n,"g"),g=e.replace(C,""),d=g.split(i);return d.length>2||(1===d.length?g.length>a-u:d[0].length>a-u||d[1].length>u)}formatIntervalValue(e,n,i){return void 0===n&&(n=0),(0,p.uf)(e,i,"1."+n+"-"+n)}getIntervals(e){const n=[];return e&&e.length>0&&e.forEach(i=>{const a=this.getInterval(i);a&&0!==Object.keys(a).length&&n.push(a)}),n}getInterval(e){const n={minValue:void 0,maxValue:void 0,minValueIncluded:!1,maxValueIncluded:!1};if(!e||!e.name||e.selected)return;let i,a;return e.name.includes(" - ")?({minVal:i,maxVal:a}=this.handleStandardInterval(e.name,n)):({minVal:i,maxVal:a}=this.handleSingleOrInfinite(e.name,n)),i&&i.length>0&&(n.minValue=+i),a&&a.length>0&&(n.maxValue=+a),n}handleSingleOrInfinite(e,n){let i="",a="";return e.includes(">")&&(i=e,n.minValueIncluded=!1,i=i.replace(">","")),e.includes("<")&&(a=e,n.maxValueIncluded=!1,a=a.replace("<","")),e.includes("\u2265")&&(i=e,n.minValueIncluded=!0,i=i.replace("\u2265","")),e.includes("\u2264")&&(a=e,n.maxValueIncluded=!0,a=a.replace("\u2264","")),!e.includes(">")&&!e.includes("<")&&!e.includes("\u2264")&&!e.includes("\u2265")&&(i=e,a=e,n.maxValueIncluded=!0,n.minValueIncluded=!0),{minVal:i,maxVal:a}}handleStandardInterval(e,n){const i=e.indexOf(" - ");let a=e.substring(0,i),u=e.substring(i+3,e.length);return n.minValueIncluded=!0,n.maxValueIncluded=!0,a.includes(">")&&(n.minValueIncluded=!1,a=a.replace(">","")),u.includes("<")&&(n.maxValueIncluded=!1,u=u.replace("<","")),{minVal:a,maxVal:u}}getPatternForValidationMessage(e,n,i,a){let u=(10**n-1).toString();e>0&&(u=u.substring(0,n-e)+"."+u.substring(n-e,n));const l=Number(u);let C=(0,p.uf)(l,a,"1."+e+"-"+e).replace(/9/g,"#");return i&&(C="-"+C),C}getNumberFormatValidator(e,n,i,a){return u=>{const l=u.value?.trim();return l?this.getValidationErrorsNumericFormat(l,e,n,i,a):null}}getValidationErrorsNumericFormat(e,n,i,a,u){const l=(0,p.dv)(n,p.wE.Group),C=(0,p.dv)(n,p.wE.Decimal);return new RegExp((u?"^-?":"^")+"[0123456789"+l+C+"]*$").test(e)?this.createValidationError(this.performValidationAccordingToMetaData(e,l,C,a+(e.includes("-")?1:0),i)):this.createValidationError(!0)}getIntervalValidator(e,n,i,a,u,l){return C=>{const g=C.value?.trim();return g&&g!==l&&0!==u.length&&null==this.getValidationErrorsNumericFormat(g,e,n,i,a)?this.createIntervalValidationError(!this.checkIfPartOfIntervals(g,e,u)):null}}checkIfPartOfIntervals(e,n,i){return void 0!==i.find(a=>this.inputMatchesInterval(e,n,a))}inputMatchesInterval(e,n,i){const a=this.parseInput(e,n);let u=!0;i.minValue&&(u=i.minValueIncluded?i.minValue<=a:i.minValue<a);let l=!0;return i.maxValue&&(l=i.maxValueIncluded?i.maxValue>=a:i.maxValue>a),u&&l}parseInput(e,n){const i=(0,p.dv)(n,p.wE.Group),a=(0,p.dv)(n,p.wE.Decimal);return this.parseInputForSeparators(e,i,a)}parseInputForSeparators(e,n,i){const u=new RegExp("\\"+n,"g"),l=e.replace(u,"").replace(i,".");return parseFloat(l)}createValidationError(e){return e?{wrongFormat:{}}:null}createIntervalValidationError(e){return e?{intervalNotMet:{}}:null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),we=(()=>{class r extends Ft{constructor(e,n,i,a,u,l,C){super(n,a,u,l),this.configAttributeNumericInputFieldService=e,this.config=n,this.translation=i,this.attributeComponentContext=a,this.configuratorCommonsService=u,this.configuratorStorefrontUtilsService=l,this.featureConfigService=C,this.iconType=f.e1G,this.intervals=[],this.logger=(0,t.f3M)(c.mQy),this.language=a.language}mustDisplayValidationMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.wrongFormat}mustDisplayIntervalMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.intervalNotMet}ngOnInit(){this.initializeValidation(),this.attribute.userInput&&this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===y.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe((0,Vt.D)(()=>(0,Pt.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}initializeValidation(){this.locale=this.getInstalledLocale(this.language);let e=this.attribute.numDecimalPlaces,n=this.attribute.numTotalLength,i=this.attribute.negativeAllowed;if(void 0===e||void 0===n||void 0===i){const l=this.getDefaultSettings();e=l.numDecimalPlaces,n=l.numTotalLength,i=l.negativeAllowed,(0,t.X6Q)()&&this.logger.warn("Meta data for numeric attribute not present, falling back to defaults")}this.attribute.intervalInDomain&&(this.intervals=this.configAttributeNumericInputFieldService.getIntervals(this.attribute.values));const a=this.configAttributeNumericInputFieldService.getNumberFormatValidator(this.locale,e,n,i),u=this.featureConfigService?.isLevel("6.2")?[a,this.configAttributeNumericInputFieldService.getIntervalValidator(this.locale,e,n,i,this.intervals,this.attribute.userInput)]:[a];this.attributeInputForm=new _.p4("",u),this.numericFormatPattern=this.configAttributeNumericInputFieldService.getPatternForValidationMessage(e,n,i,this.locale)}ngOnDestroy(){super.ngOnDestroy()}getHelpTextForInterval(){let e="",n="";return this.intervals.forEach((i,a)=>{e=this.getIntervalText(i),a>0?(e=e.charAt(0).toLowerCase()+e.slice(1),this.translation.translate("configurator.a11y.combinedIntervalsText",{combinedInterval:n,newInterval:e}).pipe((0,h.q)(1)).subscribe(u=>n=u)):n=e}),n.trim()}getAriaLabelComplete(){let e="";return 0===this.attribute.userInput?.length?this.translation.translate("configurator.a11y.valueOfAttributeBlank",{attribute:this.attribute.label}).pipe((0,h.q)(1)).subscribe(n=>e=n):this.translation.translate("configurator.a11y.valueOfAttributeFull",{value:this.attribute.userInput,attribute:this.attribute.label}).pipe((0,h.q)(1)).subscribe(n=>e=n),e+=" ",e+=this.getHelpTextForInterval(),e}getIntervalText(e){let n="",i="",a="";if(e.minValue&&(i=this.configAttributeNumericInputFieldService.formatIntervalValue(e.minValue,this.attribute.numDecimalPlaces,this.locale)),e.maxValue&&(a=this.configAttributeNumericInputFieldService.formatIntervalValue(e.maxValue,this.attribute.numDecimalPlaces,this.locale)),e.minValue&&e.maxValue){if(e.minValue===e.maxValue)return this.translation.translate("configurator.a11y.numericIntervalSingleValue",{value:i}).pipe((0,h.q)(1)).subscribe(u=>n=u),n;n=this.getTextForRealInterval(i,a,n,e)}else n=this.getTextForPartialInterval(e,n,i,a);return n}getTextForPartialInterval(e,n,i,a){return e.minValue?n=this.getInfiniteIntervalText(e.minValueIncluded?"configurator.a11y.numericInfiniteIntervalMinValueIncluded":"configurator.a11y.numericInfiniteIntervalMinValue",i):e.maxValue&&(n=this.getInfiniteIntervalText(e.maxValueIncluded?"configurator.a11y.numericInfiniteIntervalMaxValueIncluded":"configurator.a11y.numericInfiniteIntervalMaxValue",a)),n}getTextForRealInterval(e,n,i,a){let u=i;return this.translation.translate("configurator.a11y.numericIntervalStandard",{minValue:e,maxValue:n}).pipe((0,h.q)(1)).subscribe(l=>u=l),(!a.minValueIncluded||!a.maxValueIncluded)&&(a.minValueIncluded||a.maxValueIncluded?(a.minValueIncluded||(u+=" ",u+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardLowerEndpointNotIncluded")),a.maxValueIncluded||(u+=" ",u+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardUpperEndpointNotIncluded"))):(u+=" ",u+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardOpen"))),u}getAdditionalIntervalText(e){let n="";return this.translation.translate(e).pipe((0,h.q)(1)).subscribe(i=>n=i),n}getInfiniteIntervalText(e,n){let i="";return this.translation.translate(e,{value:n}).pipe((0,h.q)(1)).subscribe(a=>i=a),i}getDefaultSettings(){return{numDecimalPlaces:2,numTotalLength:6,negativeAllowed:!1}}getInstalledLocale(e){try{return(0,p.wM)(e),e}catch{return this.reportMissingLocaleData(e),"en"}}reportMissingLocaleData(e){(0,t.X6Q)()&&this.logger.warn(`ConfigAttributeNumericInputFieldComponent: No locale data registered for '${e}' (see https://angular.io/api/common/registerLocaleData).`)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Tc),t.Y36(dt),t.Y36(c.D7D),t.Y36(M),t.Y36(O),t.Y36(R,8),t.Y36(c.Ru9,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-numeric-input-field"]],features:[t.qOj],decls:6,vars:6,consts:[["class","cx-intervalHelpText",4,"ngIf"],[1,"form-group",3,"id"],[4,"cxFeatureLevel"],["class","cx-validation-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],[1,"cx-intervalHelpText"],[1,"form-control",3,"formControl","required","maxlength","cxFocus","change"],[1,"form-control",3,"formControl","ngClass","maxlength","cxFocus","change"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-validation-msg",3,"id"],[3,"type"]],template:function(e,n){1&e&&(t.YNc(0,wi,2,1,"label",0),t.TgZ(1,"div",1),t.YNc(2,Ei,2,10,"ng-container",2),t.YNc(3,Ui,3,16,"ng-container",2),t.qZA(),t.YNc(4,Di,3,3,"div",3),t.YNc(5,Ni,4,5,"div",3)),2&e&&(t.Q6J("ngIf",n.attribute.intervalInDomain),t.xp6(1),t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(1),t.Q6J("cxFeatureLevel","!6.2"),t.xp6(1),t.Q6J("cxFeatureLevel","6.2"),t.xp6(1),t.Q6J("ngIf",n.mustDisplayValidationMessage()),t.xp6(1),t.Q6J("ngIf",n.mustDisplayIntervalMessage()))},dependencies:[f.RRe,_.Fj,_.JJ,_.Q7,_.nD,_.oH,p.mk,p.O5,f.oJW,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Yr=(()=>{class r extends Ut{constructor(e,n,i,a,u){super(e,n,i,a,u),this.quantityService=e,this.translation=n,this.attributeComponentContext=i,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=u,this.attributeDropDownForm=new _.p4(""),this.group=i.group.id}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue)}getSelectedValue(){return this.attribute.values?.find(e=>e?.selected)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ct),t.Y36(c.D7D),t.Y36(M),t.Y36(O),t.Y36(R,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-drop-down"]],features:[t.qOj],decls:4,vars:4,consts:[["class","form-group",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[4,"cxFeatureLevel"],["class","cx-value-price",4,"ngIf"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"selected","label","value",4,"ngFor","ngForOf"],[3,"selected","label","value"],[1,"form-control",3,"id","ngClass","formControl","cxFocus","change"],[1,"cx-value-price"],[3,"formula"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[1,"cx-configurator-attribute-additional-value"]],template:function(e,n){1&e&&(t.YNc(0,qi,7,10,"div",0),t.YNc(1,Zi,3,2,"div",1),t.YNc(2,ki,2,3,"cx-configurator-attribute-numeric-input-field",2),t.YNc(3,Bi,2,3,"cx-configurator-attribute-input-field",2)),2&e&&(t.Q6J("ngIf",n.attribute.values&&0!==n.attribute.values.length),t.xp6(1),t.Q6J("ngIf",n.withQuantity),t.xp6(1),t.Q6J("ngIf",n.isAdditionalValueNumeric),t.xp6(1),t.Q6J("ngIf",n.isAdditionalValueAlphaNumeric))},dependencies:[p.mk,p.sg,p.O5,tt,_.YN,_.Kr,_.EJ,_.JJ,f.RRe,_.oH,L,we,Ft,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Ee=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_numeric:we}}})],imports:[f.oPH,_.u5,_.UX,p.ez,c.LUR,f.QX1,c.GSh]}),r})(),Ue=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_string:Ft}}})],imports:[f.oPH,_.u5,_.UX,p.ez,c.LUR,c.GSh]}),r})(),xc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_dropdown:Yr,AttributeType_dropdown_add:Yr}}})],imports:[p.ez,et,_.u5,c.LUR,f.oPH,j.A0,_.UX,V,Ee,Ue,c.GSh]}),r})(),Ac=(()=>{class r extends Qr{constructor(){super(...arguments),this.preventAction$=new mt.X(!1),this.multipleSelectionValues=[]}ngOnInit(){this.initialize()}initialize(){this.attribute.values&&this.attribute.values.length>0&&(this.multipleSelectionValues=this.attribute.values.map(({name:e,quantity:n,selected:i,valueCode:a})=>({name:e,quantity:n,selected:i,valueCode:a}))),this.attribute.required&&this.multipleSelectionValues.filter(e=>e.selected).length<2&&this.preventAction$.next(!0)}updateMultipleSelectionValues(e,n){const i=this.multipleSelectionValues.findIndex(u=>u.valueCode===e);return this.multipleSelectionValues[i]={...this.multipleSelectionValues[i],selected:n},{changedAttribute:{...this.attribute,values:this.multipleSelectionValues},ownerKey:this.ownerKey,updateType:s.UpdateType.ATTRIBUTE}}updateMultipleSelectionValuesQuantity(e){const n=this.multipleSelectionValues.find(a=>a.valueCode===e.valueCode);return n?(n.quantity=e.quantity,{changedAttribute:{...this.attribute,values:[n]},ownerKey:this.ownerKey,updateType:s.UpdateType.VALUE_QUANTITY}):void 0}onSelect(e){this.loading$.next(!0);const n=this.updateMultipleSelectionValues(e,!0);this.configuratorCommonsService.updateConfiguration(n.ownerKey,n.changedAttribute,n.updateType)}onDeselect(e){this.loading$.next(!0);const n=this.updateMultipleSelectionValues(e,!1);this.configuratorCommonsService.updateConfiguration(n.ownerKey,n.changedAttribute,n.updateType)}onDeselectAll(){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:[]},s.UpdateType.ATTRIBUTE)}onChangeValueQuantity(e){this.loading$.next(!0);const n=this.updateMultipleSelectionValuesQuantity(e);n&&this.configuratorCommonsService.updateConfiguration(n.ownerKey,n.changedAttribute,n.updateType)}onChangeAttributeQuantity(e){this.loading$.next(!0),e?this.onHandleAttributeQuantity(e):this.onDeselectAll()}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractProductCardParameters(e,n,i,a){return{disableAllButtons:e??!1,hideRemoveButton:n??!1,productBoundValue:i,multiSelect:!0,withQuantity:this.withQuantity,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:a}}}return r.\u0275fac=function(){let o;return function(n){return(o||(o=t.n5z(r)))(n||r)}}(),r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-multi-selection-bundle"]],features:[t.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect"]],template:function(e,n){1&e&&t.YNc(0,Ji,3,3,"div",0),2&e&&t.Q6J("ngIf",null==n.attribute||null==n.attribute.values?null:n.attribute.values.length)},dependencies:[p.sg,p.O5,Se,tt,L,p.Ov],encapsulation:2,changeDetection:0}),r})(),Ic=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_checkBoxListProduct:Ac}}})],imports:[p.ez,Oe,_.u5,c.LUR,f.oPH,_.UX,K.Bz,c.bhT,et,V]}),r})(),Sc=(()=>{class r extends B{constructor(e,n,i){super(),this.configUtilsService=e,this.attributeComponentContext=n,this.configuratorCommonsService=i,this.attributeCheckBoxForms=new Array,this.attribute=n.attribute,this.ownerKey=n.owner.key,this.expMode=n.expMode}ngOnInit(){const e=this.attribute.values;if(e)for(const n of e){let i;i=new _.p4(!!n.selected),this.attributeCheckBoxForms.push(i)}}onSelect(e){this.attributeCheckBoxForms[e].setValue(!this.attributeCheckBoxForms[e].value);const n=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,values:n},s.UpdateType.ATTRIBUTE)}extractValuePriceFormulaParameters(e){return{quantity:e.quantity,price:e.valuePrice,priceTotal:e.valuePriceTotal,isLightedUp:e.selected}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(R),t.Y36(M),t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-multi-selection-image"]],features:[t.qOj],decls:2,vars:2,consts:[[1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","checkbox",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Hi,10,30,"div",1),t.qZA()),2&e&&(t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(1),t.Q6J("ngForOf",n.attribute.values))},dependencies:[f.RRe,_.Wl,_.JJ,_.oH,p.sg,p.O5,L,c.X$D],encapsulation:2,changeDetection:0}),r})(),Oc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_multi_selection_image:Sc}}})],imports:[f.oPH,_.u5,_.UX,p.ez,c.LUR,V]}),r})(),wc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-not-supported"]],decls:3,vars:3,template:function(e,n){1&e&&(t.TgZ(0,"em"),t._uU(1),t.ALo(2,"cxTranslate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"configurator.attribute.notSupported")))},dependencies:[c.X$D],encapsulation:2,changeDetection:0}),r})(),Ec=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_not_implemented:wc}}})],imports:[p.ez,c.LUR]}),r})(),Jr=(()=>{class r extends Ut{constructor(e,n,i,a,u){super(e,n,i,a,u),this.quantityService=e,this.translation=n,this.attributeComponentContext=i,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=u,this.attributeRadioButtonForm=new _.p4("")}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ct),t.Y36(c.D7D),t.Y36(M),t.Y36(O),t.Y36(R,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-radio-button"]],features:[t.qOj],decls:8,vars:6,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","form-check",4,"ngFor","ngForOf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","radio","formcontrolname","attributeRadioButtonForm",1,"form-check-input",3,"id","formControl","value","name","cxFocus","change"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],[1,"cx-value-price"],[1,"cx-configurator-attribute-additional-value"]],template:function(e,n){1&e&&(t.TgZ(0,"fieldset")(1,"legend",0),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,Wi,3,2,"div",2),t.YNc(5,zi,7,16,"div",3),t.YNc(6,ji,1,0,"cx-configurator-attribute-numeric-input-field",4),t.YNc(7,Xi,1,0,"cx-configurator-attribute-input-field",4),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.attribute.label),t.xp6(1),t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(1),t.Q6J("ngIf",n.withQuantity),t.xp6(1),t.Q6J("ngForOf",n.attribute.values),t.xp6(1),t.Q6J("ngIf",n.isAdditionalValueNumeric),t.xp6(1),t.Q6J("ngIf",n.isAdditionalValueAlphaNumeric))},dependencies:[p.sg,p.O5,tt,_.Fj,_._,_.JJ,_.Q7,f.RRe,_.oH,L,we,Ft],encapsulation:2,changeDetection:0}),r})(),Uc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_radioGroup:Jr,AttributeType_radioGroup_add:Jr}}})],imports:[p.ez,et,_.u5,c.LUR,f.oPH,_.UX,V,Ee,Ue]}),r})(),Fc=(()=>{class r extends B{constructor(e,n){super(),this.translationService=e,this.attributeComponentContext=n,this.attribute=n.attribute,this.group=n.group.id,this.expMode=n.expMode}getCurrentValueName(e,n){let i="";return e.selectedSingleValue&&!n?i=e.selectedSingleValue:e.userInput&&!n?i=e.userInput:n&&n.valueDisplay&&(i=n?.valueDisplay),i}getAriaLabel(e,n){let i="";if(n){const a=this.getCurrentValueName(e,n);i=n.valuePrice&&0!==n.valuePrice?.value?this.translate("configurator.a11y.readOnlyValueOfAttributeFullWithPrice",a,e,n.valuePriceTotal&&0!==n.valuePriceTotal?.value?n.valuePriceTotal?.formattedValue:n.valuePrice?.formattedValue):this.translate("configurator.a11y.readOnlyValueOfAttributeFull",a,e)}else{const a=this.getCurrentValueName(e);i=this.translate("configurator.a11y.readOnlyValueOfAttributeFull",a,e)}return i}translate(e,n,i,a){let u="";return this.translationService.translate(e,a?{value:n,attribute:i.label,price:a}:{value:n,attribute:i.label}).pipe((0,h.q)(1)).subscribe(C=>u=C),u}extractValuePriceFormulaParameters(e){return{quantity:e.quantity,price:e.valuePrice,priceTotal:e.valuePriceTotal,isLightedUp:e.selected}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.D7D),t.Y36(M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-read-only"]],features:[t.qOj],decls:5,vars:3,consts:[[3,"id"],[4,"ngIf","ngIfElse"],["noStaticDomain",""],[4,"ngFor","ngForOf"],["class","form-check",4,"ngIf"],[1,"form-check"],["tabindex","0",1,"cx-visually-hidden",3,"id"],[1,"cx-value-label-pair"],["aria-hidden","true",1,"cx-read-only-attribute-label",3,"id"],[1,"cx-value-price"],[3,"formula"],[4,"ngIf"],["aria-hidden","true",1,"cx-read-only-attribute-label"],["aria-hidden","true"]],template:function(e,n){if(1&e&&(t.TgZ(0,"fieldset")(1,"div",0),t.YNc(2,ro,2,1,"ng-container",1),t.YNc(3,oo,2,2,"ng-template",null,2,t.W1O),t.qZA()()),2&e){const i=t.MAs(4);t.xp6(1),t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(1),t.Q6J("ngIf",n.attribute.values&&n.attribute.values.length>0)("ngIfElse",i)}},dependencies:[L,p.sg,p.O5],encapsulation:2,changeDetection:0}),r})(),Rc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_readonly:Fc}}})],imports:[f.oPH,_.u5,_.UX,V,p.ez,c.LUR]}),r})(),Dc=(()=>{class r extends Ut{constructor(e,n,i,a,u){super(e,n,i,a,u),this.quantityService=e,this.translation=n,this.attributeComponentContext=i,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=u,this.RETRACT_VALUE_CODE=s.RetractValueCode,this.attributeDropDownForm=new _.p4(""),this.group=i.group.id}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue);const e=this.attribute.values;if(e&&e.length>0){const n=e.find(i=>i.selected);n&&(this.selectionValue=n)}}get selectedValue(){let e;if(!this.selectionValue)throw new Error("selectedValue called without a defined selectionValue");return e=this.selectionValue,e}extractProductCardParameters(){return{hideRemoveButton:!0,productBoundValue:this.selectedValue,singleDropdown:!0,withQuantity:!1,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeName:this.attribute.name,itemCount:0,itemIndex:0}}isNotRetractValue(){return(this.selectionValue&&this.selectionValue?.valueCode!==s.RetractValueCode)??!1}isRetractValue(e){return e===s.RetractValueCode}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ct),t.Y36(c.D7D),t.Y36(M),t.Y36(O),t.Y36(R,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-single-selection-bundle-dropdown"]],features:[t.qOj],decls:3,vars:3,consts:[["class","form-group",4,"ngIf"],[3,"id","productCardOptions","handleDeselect",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[4,"cxFeatureLevel"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"label","selected","value",4,"ngFor","ngForOf"],[3,"label","selected","value"],[1,"form-control",3,"id","ngClass","formControl","cxFocus","change"],[3,"id","productCardOptions","handleDeselect"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"]],template:function(e,n){1&e&&(t.YNc(0,lo,6,9,"div",0),t.YNc(1,po,1,2,"cx-configurator-attribute-product-card",1),t.YNc(2,go,3,2,"div",2)),2&e&&(t.Q6J("ngIf",null==n.attribute||null==n.attribute.values?null:n.attribute.values.length),t.xp6(1),t.Q6J("ngIf",n.isNotRetractValue()),t.xp6(1),t.Q6J("ngIf",n.withQuantity))},dependencies:[p.mk,p.sg,p.O5,Se,_.YN,_.Kr,_.EJ,_.JJ,f.RRe,_.oH,tt,L,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Nc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_dropdownProduct:Dc}}})],imports:[p.ez,Oe,_.u5,c.LUR,f.oPH,j.A0,_.UX,et,V,c.GSh]}),r})(),Mc=(()=>{class r extends Ut{extractProductCardParameters(e,n){return{hideRemoveButton:this.attribute.required,fallbackFocusId:this.getFocusIdOfNearestValue(e),productBoundValue:e,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:n}}getFocusIdOfNearestValue(e){if(!this.attribute.values)return"n/a";let n=this.attribute.values.findIndex(i=>i.valueCode===e.valueCode);return n--,n<0&&(n=this.attribute.values.length>1?1:0),this.createFocusId(this.getAttributeCode(this.attribute).toString(),this.attribute.values[n].valueCode)}}return r.\u0275fac=function(){let o;return function(n){return(o||(o=t.n5z(r)))(n||r)}}(),r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-single-selection-bundle"]],features:[t.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleSelect"]],template:function(e,n){1&e&&t.YNc(0,Co,3,3,"div",0),2&e&&t.Q6J("ngIf",null==n.attribute||null==n.attribute.values?null:n.attribute.values.length)},dependencies:[p.sg,p.O5,Se,tt,L],encapsulation:2,changeDetection:0}),r})(),Gc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_radioGroupProduct:Mc}}})],imports:[p.ez,Oe,et,_.u5,c.LUR,f.Td$,f.oPH,_.UX,K.Bz,c.bhT,V]}),r})(),Pc=(()=>{class r extends B{constructor(e,n){super(),this.attributeComponentContext=e,this.configuratorCommonsService=n,this.attributeRadioButtonForm=new _.p4(""),this.attribute=e.attribute,this.ownerKey=e.owner.key,this.expMode=e.expMode}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}onClick(e){this.configuratorCommonsService.updateConfiguration(this.ownerKey,{...this.attribute,selectedSingleValue:e},s.UpdateType.ATTRIBUTE)}extractValuePriceFormulaParameters(e){return{price:e?.valuePrice,isLightedUp:!!e&&e.selected}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M),t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-attribute-single-selection-image"]],features:[t.qOj],decls:2,vars:2,consts:[["role","radiogroup",1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","radio","formcontrolname","attributeRadioButtonForm","role","radio",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,mo,10,34,"div",1),t.qZA()),2&e&&(t.s9C("id",n.createAttributeIdForConfigurator(n.attribute)),t.xp6(1),t.Q6J("ngForOf",n.attribute.values))},dependencies:[f.RRe,_.Fj,_._,_.JJ,_.Q7,_.oH,p.sg,p.O5,L,c.X$D],encapsulation:2,changeDetection:0}),r})(),Lc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({productConfigurator:{assignment:{AttributeType_single_selection_image:Pc}}})],imports:[f.oPH,_.u5,_.UX,p.ez,c.LUR,V]}),r})(),Vc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:function(e){let n=null;return n=e?new(e||r):t.LFG(c.DeH),n},providedIn:"root"}),r})(),qc=(()=>{class r{constructor(e,n){this.vcr=e,this.configuratorAttributeCompositionConfig=n,this.logger=(0,t.f3M)(c.mQy)}ngOnInit(){const e=this.context.componentKey,n=this.configuratorAttributeCompositionConfig.productConfigurator?.assignment;n&&this.renderComponent(n[e],e)}renderComponent(e,n){e?this.vcr.createComponent(e,{injector:this.getComponentInjector()}):(0,t.X6Q)()&&this.logger.warn("No attribute type component available for: "+n)}getComponentInjector(){return t.zs3.create({providers:[{provide:M,useValue:this.context}],parent:this.vcr.injector})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.s_b),t.Y36(Vc))},r.\u0275dir=t.lG2({type:r,selectors:[["","cxConfiguratorAttributeComponent",""]],inputs:{context:["cxConfiguratorAttributeComponent","context"]}}),r})(),$r=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez]}),r})();class Kr{}let Zc=(()=>{class r{toggleWarnings(){this.showWarnings=!this.showWarnings}toggleErrors(){this.showErrors=!this.showErrors}constructor(e,n){this.configuratorCommonsService=e,this.configRouterExtractorService=n,this.iconTypes=f.e1G,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(i=>this.configuratorCommonsService.getConfiguration(i.owner))),this.showWarnings=!1,this.showErrors=!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(y.u6))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configuration-conflict-and-error-messages"]],decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","aria-atomic","true",1,"alert-message","alert-message-invalid-warning"],[1,"alert-icon"],["type","WARNING"],["class","cx-warning-text",4,"ngIf"],["class","cx-warning-toggle",3,"click",4,"ngIf"],[1,"cx-warning-messages"],["class","cx-warning-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-warning-text"],[1,"cx-warning-toggle",3,"click"],["type","CARET_DOWN"],["type","CARET_UP"],[1,"cx-warning-message"],["aria-live","assertive","aria-atomic","true","role","alert",1,"alert-message","alert-message-error"],["type","ERROR"],["class","cx-error-text",4,"ngIf"],["class","cx-error-toggle",3,"click",4,"ngIf"],[1,"cx-error-messages"],["class","cx-error-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-error-text"],[1,"cx-error-toggle",3,"click"],[1,"cx-error-message"]],template:function(e,n){1&e&&(t.YNc(0,Ro,3,2,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.configuration$))},dependencies:[p.sg,p.O5,f.oJW,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),kc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{CpqConfiguratorConflictAndErrorMessagesComponent:{component:Zc}}})],imports:[p.ez,K.Bz,c.bhT,c.LUR,f.QX1]}),r})(),Bc=(()=>{class r{constructor(){this.groupType=s.GroupType,this.iconTypes=f.e1G,this.tabindex="0"}displayConflictDescription(e){return e.groupType===s.GroupType.CONFLICT_GROUP}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-conflict-description"]],hostVars:1,hostBindings:function(e,n){2&e&&t.Ikx("tabindex",n.tabindex)},inputs:{currentGroup:"currentGroup"},decls:1,vars:1,consts:[[4,"ngIf"],["aria-hidden","true",3,"type"]],template:function(e,n){1&e&&t.YNc(0,Do,3,2,"ng-container",0),2&e&&t.Q6J("ngIf",n.displayConflictDescription(n.currentGroup))},dependencies:[p.O5,f.oJW],encapsulation:2,changeDetection:0}),r})(),Qc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,f.QX1]}),r})(),Yc=(()=>{class r{constructor(){this.groupType=s.GroupType,this.tabindex="0"}displayConflictSuggestion(e){return!(e.groupType!==s.GroupType.CONFLICT_GROUP||!e.attributes)&&e.attributes.length>0}createSuggestionUiKey(){return"suggestion--"+this.suggestionNumber}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-conflict-suggestion"]],hostVars:1,hostBindings:function(e,n){2&e&&t.Ikx("tabindex",n.tabindex)},inputs:{currentGroup:"currentGroup",attribute:"attribute",suggestionNumber:"suggestionNumber"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cx-title"],["aria-hidden","true"]],template:function(e,n){1&e&&t.YNc(0,No,10,23,"ng-container",0),2&e&&t.Q6J("ngIf",n.displayConflictSuggestion(n.currentGroup))},dependencies:[p.O5,c.X$D],encapsulation:2,changeDetection:0}),r})(),Jc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,c.LUR]}),r})(),$c=(()=>{class r{constructor(e,n,i,a,u,l,C){this.productService=e,this.routingService=n,this.configRouterExtractorService=i,this.configuratorCommonsService=a,this.breakpointService=u,this.windowRef=l,this.location=C,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(g=>this.configuratorCommonsService.getConfiguration(g.owner).pipe((0,v.U)(d=>({routerData:g,configuration:d}))).pipe((0,m.w)(d=>this.productService.get(d.configuration.productCode).pipe((0,v.U)(T=>({routerData:d.routerData,configuration:d.configuration,product:T})))))))}navigateToCart(){this.routingService.go("cart")}exitConfiguration(){this.container$.pipe((0,h.q)(1)).subscribe(e=>{e.routerData.owner.type===y.$g.OwnerType.CART_ENTRY?this.navigateToCart():this.routingService.go({cxRoute:"product",params:e.product})})}isDesktop(){return this.breakpointService.isUp(f.Bst.md)}isMobile(){return this.breakpointService.isDown(f.Bst.sm)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.M52),t.Y36(c.Znh),t.Y36(y.u6),t.Y36(O),t.Y36(f.r),t.Y36(c.X9E),t.Y36(p.Ye))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-exit-button"]],decls:2,vars:3,consts:[[4,"ngIf"],["tabindex","0",1,"btn","btn-tertiary",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,Zo,6,7,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.container$))},dependencies:[p.O5,p.Ov,c.X$D],encapsulation:2}),r})(),Kc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorExitButton:{component:$c}}}),c.X9E],imports:[p.ez,c.LUR]}),r})(),rt=(()=>{class r{constructor(){this._expModeRequested=new Gt.t(1),this._expModeActive=new Gt.t(1)}setExpModeRequested(e){this._expModeRequested.next(e)}getExpModeRequested(){return this._expModeRequested}setExpModeActive(e){this._expModeActive.next(e)}getExpModeActive(){return this._expModeActive}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Fe=(()=>{class r{constructor(e,n,i,a,u){this.configuratorCommonsService=e,this.configuratorGroupsService=n,this.languageService=i,this.configUtils=a,this.configExpertModeService=u,this.typePrefix="AttributeType_",this.activeLanguage$=this.languageService.getActive(),this.uiType=s.UiType}updateConfiguration(e){this.configuratorCommonsService.updateConfiguration(e.ownerKey,e.changedAttribute,e.updateType)}isConflictGroupType(e){return!!e&&this.configuratorGroupsService.isConflictGroupType(e)}displayConflictDescription(e){return void 0!==e.groupType&&this.configuratorGroupsService.isConflictGroupType(e.groupType)&&""!==e.name}createGroupId(e){return this.configUtils.createGroupId(e)}get expMode(){return this.configExpertModeService.getExpModeActive()}getComponentKey(e){return e.uiTypeVariation?.includes(s.CustomUiTypeIndicator)?this.typePrefix+e.uiTypeVariation:this.typePrefix+e.uiType}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(J),t.Y36(c.TSl),t.Y36(R),t.Y36(rt))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-group"]],inputs:{group:"group",owner:"owner",isNavigationToGroupEnabled:"isNavigationToGroupEnabled"},decls:3,vars:3,consts:[["role","tabpanel",3,"id"],[4,"ngIf"],["class","cx-group-attribute",3,"cx-hidden",4,"ngFor","ngForOf"],[3,"currentGroup"],[1,"cx-group-attribute"],[3,"currentGroup","attribute","suggestionNumber"],[3,"cxConfiguratorAttributeComponent"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,ko,2,1,"ng-container",1),t.YNc(2,Ko,4,6,"div",2),t.qZA()),2&e&&(t.s9C("id",n.createGroupId(n.group.id)),t.xp6(1),t.Q6J("ngIf",n.displayConflictDescription(n.group)),t.xp6(1),t.Q6J("ngForOf",n.group.attributes))},dependencies:[p.sg,p.O5,Bc,Yc,qc,p.Ov],encapsulation:2,changeDetection:0}),r})(),Hc=(()=>{class r{constructor(e,n,i,a){this.configuratorStorefrontUtilsService=e,this.configuratorCommonsService=n,this.launchDialogService=i,this.focusService=a,this.iconTypes=f.e1G,this.uiType=s.UiType,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.subscription=new Q.w}init(e,n){this.focusService.clear(),this.conflictGroup$=e,this.routerData$=n}ngOnInit(){this.subscription.add(this.launchDialogService.data$.subscribe(e=>{this.init(e.conflictGroup,e.routerData)}))}ngOnDestroy(){this.subscription?.unsubscribe()}dismissModal(e){this.routerData$.pipe((0,h.q)(1)).subscribe(n=>this.configuratorCommonsService.dismissConflictSolverDialog(n.owner)),this.launchDialogService.closeDialog(e),this.configuratorStorefrontUtilsService.scrollToConfigurationElement(".VariantConfigurationTemplate"),this.configuratorStorefrontUtilsService.focusFirstAttribute()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(R),t.Y36(O),t.Y36(f.Q3W),t.Y36(f.K9x))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-conflict-solver-dialog"]],decls:20,vars:18,consts:[[1,"cx-modal-container"],["aria-atomic","true","aria-live","assertive","role","alert","aria-relevant","additions",1,"cx-visually-hidden"],[1,"cx-modal-content",3,"cxFocus"],[1,"cx-dialog-header","modal-header"],["tabindex","0",1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],[1,"cx-msg-warning"],[4,"ngIf"],[3,"group","owner","isNavigationToGroupEnabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4),t._uU(7),t.ALo(8,"cxTranslate"),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return n.dismissModal("Close conflict solver dialog")}),t.ALo(10,"cxTranslate"),t.TgZ(11,"span",6),t._UZ(12,"cx-icon",7),t.qZA()()(),t.TgZ(13,"div",8)(14,"div",9),t._UZ(15,"cx-icon",7),t._uU(16),t.ALo(17,"cxTranslate"),t.qZA(),t.YNc(18,Wo,3,3,"ng-container",10),t.ALo(19,"async"),t.qZA()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,8,"configurator.header.conflictWarning")," "),t.xp6(2),t.Q6J("cxFocus",n.focusConfig),t.xp6(3),t.hij(" ",t.lcZ(8,10,"configurator.header.resolveIssue")," "),t.xp6(2),t.uIk("aria-label",t.lcZ(10,12,"configurator.a11y.closeConflictSolverModal")),t.xp6(3),t.Q6J("type",n.iconTypes.CLOSE),t.xp6(3),t.Q6J("type",n.iconTypes.ERROR),t.xp6(1),t.hij(" ",t.lcZ(17,14,"configurator.header.conflictWarning")," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(19,16,n.routerData$)))},dependencies:[p.O5,f.oJW,Fe,f.RRe,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Wc=(()=>{class r{constructor(e,n,i){this.launchDialogService=e,this.configRouterExtractorService=n,this.configuratorGroupsService=i,this.subscription=new Q.w,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.conflictGroupAndRouterData$=this.routerData$.pipe((0,m.w)(a=>this.configuratorGroupsService.getConflictGroupForImmediateConflictResolution(a.owner).pipe((0,v.U)(u=>({conflictGroup:u,routerData:a})))),(0,z.g)(0)),this.controlDialog()}controlDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe((0,S.h)(e=>!!e.conflictGroup),(0,yt.x)((e,n)=>e.conflictGroup===n.conflictGroup&&e.routerData.navigationId===n.routerData.navigationId)).subscribe(()=>{this.openModal(),this.subscribeToCloseDialog()}))}subscribeToCloseDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe((0,bn.P)(e=>!e.conflictGroup)).subscribe(()=>this.closeModal("CLOSE_NO_CONFLICTS_EXIST")))}openModal(){this.launchDialogService.openDialogAndSubscribe("CONFLICT_SOLVER",void 0,{conflictGroup:this.conflictGroupAndRouterData$.pipe((0,v.U)(e=>e.conflictGroup)),routerData:this.routerData$})}closeModal(e){this.launchDialogService.closeDialog(e)}ngOnDestroy(){this.subscription?.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(f.Q3W),t.LFG(y.u6),t.LFG(J))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Re=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorForm:{component:Fe}}})],imports:[_.u5,_.UX,p.ez,c.LUR,j.A0,Ec,Ue,gc,Ee,fc,Uc,Gc,Ic,Rc,Lc,Nc,bc,mc,xc,Oc,Qc,Jc,$r]}),r})();const zc={launch:{CONFLICT_SOLVER:{inlineRoot:!0,component:Hc,dialogType:f.Myk.DIALOG}}};let jc=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(Wc))},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)(zc)],imports:[p.ez,f.QX1,c.LUR,Re,f.oPH]}),r})(),Xc=(()=>{class r{constructor(e,n,i,a,u,l,C){this.configuratorCommonsService=e,this.configuratorGroupsService=n,this.configRouterExtractorService=i,this.configExpertModeService=a,this.launchDialogService=u,this.featureConfigservice=l,this.globalMessageService=C,this.subscription=new Q.w,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,S.h)(g=>g.pageType===y.iB.PageType.CONFIGURATION),(0,m.w)(g=>this.configuratorCommonsService.getOrCreateConfiguration(g.owner,g.configIdTemplate))),this.currentGroup$=this.routerData$.pipe((0,m.w)(g=>this.configuratorGroupsService.getCurrentGroup(g.owner)))}ngOnDestroy(){this.subscription.unsubscribe()}listenForConflictResolution(){this.subscription.add(this.routerData$.pipe((0,m.w)(e=>this.configuratorCommonsService.hasConflicts(e.owner)),(0,yt.x)(),(0,Tn.T)(1),(0,S.h)(e=>!e)).subscribe(()=>this.displayConflictResolvedMessage()))}displayConflictResolvedMessage(){this.globalMessageService&&this.featureConfigservice?.isLevel("6.1")&&this.globalMessageService.add({key:"configurator.header.conflictsResolved"},c.xUg.MSG_TYPE_CONFIRMATION)}ngOnInit(){this.listenForConflictResolution(),this.routerData$.pipe((0,m.w)(e=>this.configuratorCommonsService.getConfiguration(e.owner)),(0,h.q)(1)).subscribe(e=>{this.configuratorCommonsService.checkConflictSolverDialog(e.owner)}),this.routerData$.pipe((0,S.h)(e=>!0===e.displayRestartDialog),(0,m.w)(e=>this.configuratorCommonsService.getConfiguration(e.owner)),(0,h.q)(1),(0,S.h)(e=>!1===e.interactionState.newConfiguration),(0,z.g)(0)).subscribe(e=>{this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_RESTART_DIALOG",void 0,{owner:e.owner})}),this.routerData$.pipe((0,h.q)(1)).subscribe(e=>{e.resolveIssues&&this.configuratorCommonsService.hasConflicts(e.owner).pipe((0,h.q)(1)).subscribe(n=>{n&&!e.skipConflicts?this.configuratorGroupsService.navigateToConflictSolver(e.owner):this.configuratorGroupsService.navigateToFirstIncompleteGroup(e.owner)}),e.expMode&&this.configExpertModeService?.setExpModeRequested(e.expMode)})}isNavigationToGroupEnabled(e){return!e.immediateConflictResolution}isDialogActive(e){return e.interactionState.showConflictSolverDialog??!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(J),t.Y36(y.u6),t.Y36(rt),t.Y36(f.Q3W),t.Y36(c.Ru9,8),t.Y36(c.IWp,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-form"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostForm",""],[4,"ngIf"],[3,"group","owner","isNavigationToGroupEnabled"],[4,"ngFor","ngForOf"],[1,"cx-ghost-attribute"],[1,"cx-ghost-header"],[1,"cx-ghost-title","ghost"],[1,"cx-ghost-icon","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-text","ghost"],[1,"cx-ghost-price","ghost"],[1,"cx-ghost-description-box"],[1,"cx-ghost-description","ghost"],["class","cx-ghost-radiobutton-value",4,"ngFor","ngForOf"],[1,"cx-ghost-radiobutton-value"],[1,"cx-ghost-value-label-pair"],[1,"cx-ghost-value-icon","ghost"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-value-price","ghost"],[1,"cx-ghost-price"]],template:function(e,n){if(1&e&&(t.YNc(0,Xo,2,2,"ng-container",0),t.ALo(1,"async"),t.YNc(2,na,1,2,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.configuration$))("ngIfElse",i)}},dependencies:[p.sg,p.O5,Fe,p.Ov],encapsulation:2,changeDetection:0}),r})(),ts=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorForm:{component:Xc}}})],imports:[p.ez,c.LUR,j.A0,Re]}),r})(),es=(()=>{class r{constructor(e){this.windowRef=e}getFocusedGroupIndex(e){if(e){const n=e.find(i=>i.nativeElement?.id===this.windowRef?.document?.activeElement?.id);if(n)return e.toArray().indexOf(n)}}updateCurrentGroupIndex(e,n){return n&&n!==e?n:e}focusNextGroup(e,n){const i=this.getFocusedGroupIndex(n);e=this.updateCurrentGroupIndex(e,i),n&&(e===n.length-1?n.first?.nativeElement?.focus():n.toArray()[e+1]?.nativeElement.focus())}focusPreviousGroup(e,n){const i=this.getFocusedGroupIndex(n);e=this.updateCurrentGroupIndex(e,i),n&&(0===e?n.last?.nativeElement?.focus():n.toArray()[e-1]?.nativeElement?.focus())}switchGroupOnArrowPress(e,n,i){e.preventDefault(),"ArrowUp"===e.code?this.focusPreviousGroup(n,i):"ArrowDown"===e.code&&this.focusNextGroup(n,i)}isBackBtnFocused(e){if(e)return-1!==e.first?.nativeElement?.classList?.value?.indexOf("cx-menu-back")&&this.windowRef?.document?.activeElement===e.first?.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.X9E))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),rs=(()=>{class r{constructor(e,n,i,a,u,l,C,g,d){this.configCommonsService=e,this.configuratorGroupsService=n,this.hamburgerMenuService=i,this.configRouterExtractorService=a,this.configUtils=u,this.configGroupMenuService=l,this.directionService=C,this.translation=g,this.configExpertModeService=d,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,m.w)(T=>this.configCommonsService.getConfiguration(T.owner).pipe((0,v.U)(E=>({routerData:T,configuration:E})),(0,S.h)(E=>E.configuration.complete&&E.configuration.consistent||E.configuration.interactionState.issueNavigationDone||!E.routerData.resolveIssues)).pipe((0,v.U)(E=>E.configuration)))),this.currentGroup$=this.routerData$.pipe((0,m.w)(T=>this.configuratorGroupsService.getCurrentGroup(T.owner))),this.displayedParentGroup$=this.configuration$.pipe((0,m.w)(T=>this.configuratorGroupsService.getMenuParentGroup(T.owner)),(0,m.w)(T=>T?this.getCondensedParentGroup(T):(0,N.of)(T))),this.displayedGroups$=this.displayedParentGroup$.pipe((0,m.w)(T=>this.configuration$.pipe((0,v.U)(E=>this.condenseGroups(T?T.subGroups:E.groups))))),this.iconTypes=f.e1G,this.ERROR=" ERROR",this.COMPLETE=" COMPLETE",this.WARNING=" WARNING",this.ICON="ICON"}click(e){this.configuration$.pipe((0,h.q)(1)).subscribe(n=>{n.interactionState.currentGroup!==e.id&&(this.configuratorGroupsService.hasSubGroups(e)?this.configuratorGroupsService.setMenuParentGroup(n.owner,e.id):(this.configuratorGroupsService.navigateToGroup(n,e.id),this.hamburgerMenuService.toggle(!0),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")))})}navigateUp(){this.displayedParentGroup$.pipe((0,h.q)(1)).subscribe(e=>{if(e){const n=this.getParentGroup(e);this.configuration$.pipe((0,h.q)(1)).subscribe(i=>{n.pipe((0,h.q)(1)).subscribe(a=>{this.configuratorGroupsService.setMenuParentGroup(i.owner,a?a.id:void 0)})})}})}getConflictNumber(e){return e&&e.groupType===s.GroupType.CONFLICT_HEADER_GROUP?"("+e.subGroups.length+")":""}hasSubGroups(e){return this.configuratorGroupsService.hasSubGroups(e)}getParentGroup(e){return this.configuration$.pipe((0,v.U)(n=>this.configuratorGroupsService.getParentGroup(n.groups,e)))}getCondensedParentGroup(e){return e&&e.subGroups&&1===e.subGroups.length&&e.groupType!==s.GroupType.CONFLICT_HEADER_GROUP?this.getParentGroup(e).pipe((0,m.w)(n=>n?this.getCondensedParentGroup(n):(0,N.of)(n))):(0,N.of)(e)}condenseGroups(e){return e.flatMap(n=>1===n.subGroups.length&&n.groupType!==s.GroupType.CONFLICT_HEADER_GROUP?this.condenseGroups(n.subGroups):n)}isGroupVisited(e,n){return this.configuratorGroupsService.isGroupVisited(n.owner,e.id).pipe((0,v.U)(i=>i&&!this.isConflictGroupType(e.groupType??s.GroupType.ATTRIBUTE_GROUP)),(0,h.q)(1))}isConflictGroupType(e){return this.configuratorGroupsService.isConflictGroupType(e)}isConflictGroupTypeAllowingUndefined(e){return!!e&&this.configuratorGroupsService.isConflictGroupType(e)}isConflictHeader(e){return e&&e.groupType===s.GroupType.CONFLICT_HEADER_GROUP}isConflictGroup(e){return e&&e.groupType===s.GroupType.CONFLICT_GROUP}getGroupStatusStyles(e,n){return this.isGroupVisited(e,n).pipe((0,v.U)(i=>{const a="CLOUDCPQCONFIGURATOR";let u="cx-menu-item";return n.owner.configuratorType!==a&&!e.consistent&&(u+=this.WARNING),n.owner.configuratorType!==a&&e.complete&&e.consistent&&i&&(u+=this.COMPLETE),!e.complete&&i&&(u+=this.ERROR),u}))}isLTRDirection(){return this.directionService.getDirection()===f.uEG.LTR}isRTLDirection(){return this.directionService.getDirection()===f.uEG.RTL}isForwardsNavigation(e){return"ArrowRight"===e.code&&this.isLTRDirection()||"ArrowLeft"===e.code&&this.isRTLDirection()}isBackNavigation(e){return"ArrowLeft"===e.code&&this.isLTRDirection()||"ArrowRight"===e.code&&this.isRTLDirection()}switchGroupOnArrowPress(e,n,i,a){"ArrowUp"===e.code||"ArrowDown"===e.code?this.configGroupMenuService.switchGroupOnArrowPress(e,n,this.groups):this.isForwardsNavigation(e)?i&&this.hasSubGroups(i)&&(this.click(i),this.setFocusForSubGroup(i,a.id)):this.isBackNavigation(e)&&this.configGroupMenuService.isBackBtnFocused(this.groups)&&(this.navigateUp(),this.setFocusForMainMenu(a.id))}setFocusForMainMenu(e){let n=e;this.configuration$.pipe((0,h.q)(1)).subscribe(i=>{i.groups?.forEach(a=>{1!==a.subGroups?.length&&(this.isGroupSelected(a.id,e)||this.containsSelectedGroup(a,e))&&(n=a.id)})}),this.configUtils.setFocus(n)}setFocusForSubGroup(e,n){let i="cx-menu-back";this.containsSelectedGroup(e,n)&&(i=n),this.configUtils.setFocus(i)}containsSelectedGroup(e,n){let i=!1;return e.subGroups?.forEach(a=>{this.isGroupSelected(a.id,n)&&(i=!0)}),i}getTabIndex(e,n){return this.isGroupSelected(e.id,n)||this.containsSelectedGroup(e,n)?0:-1}isGroupSelected(e,n){return e===n}createAriaControls(e){return this.configUtils.createGroupId(e)}getAriaLabel(e){let n="";return e&&e.groupType&&this.isConflictGroupType(e.groupType)?this.isConflictHeader(e)?this.translation.translate("configurator.a11y.conflictsInConfiguration",{numberOfConflicts:this.getConflictNumber(e)}).pipe((0,h.q)(1)).subscribe(i=>n=i):n=e.description?e.description:"":this.translation.translate("configurator.a11y.groupName",{group:e.description}).pipe((0,h.q)(1)).subscribe(i=>n=i),n}createIconId(e,n){return this.ICON+e+n}getAriaDescribedby(e,n){return this.isGroupVisited(e,n).pipe((0,v.U)(i=>{const a="CLOUDCPQCONFIGURATOR";let u="";return n.owner.configuratorType!==a&&!e.consistent&&e.groupType&&!this.isConflictGroupType(e.groupType)&&(u+=this.createIconId(f.e1G.WARNING,e.id)),n.owner.configuratorType!==a&&e.complete&&e.consistent&&i&&(u=u+" "+this.createIconId(f.e1G.SUCCESS,e.id)),!e.complete&&i&&(u=u+" "+this.createIconId(f.e1G.ERROR,e.id)),this.hasSubGroups(e)&&(u=u+" "+this.createIconId(f.e1G.CARET_RIGHT,e.id)),u+=" inListOfGroups",u}))}getGroupMenuTitle(e){let n=e.description;return!this.isConflictHeader(e)&&!this.isConflictGroup(e)&&this.configExpertModeService.getExpModeActive().pipe((0,h.q)(1)).subscribe(i=>{i&&(n+=` / [${e.name}]`)}),n}displayMenuItem(e){return this.configuration$.pipe((0,v.U)(n=>{let i=!0;return n.immediateConflictResolution&&e.groupType===s.GroupType.CONFLICT_HEADER_GROUP&&(i=!1),i}))}isDialogActive(e){return e.interactionState.showConflictSolverDialog??!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(J),t.Y36(f.O2g),t.Y36(y.u6),t.Y36(R),t.Y36(es),t.Y36(f.Lh6),t.Y36(c.D7D),t.Y36(rt))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-group-menu"]],viewQuery:function(e,n){if(1&e&&t.Gf(ia,5),2&e){let i;t.iGM(i=t.CRH())&&(n.groups=i)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroups",""],["role","tablist",1,"cx-group-menu"],["id","listOfGroups",1,"cx-visually-hidden"],["id","inListOfGroups","aria-hidden","true",1,"cx-visually-hidden"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","cx-menu-back","role","tab","aria-describedby","listOfGroups",3,"cxFocus","click","keydown",4,"ngIf"],["role","tab","aria-describedby","listOfGroups",1,"cx-menu-back",3,"cxFocus","click","keydown"],["groupItem",""],[3,"type"],["role","tab",3,"id","ngClass","cxFocus","tabindex","click","keydown"],[3,"title"],[1,"groupIndicators"],[1,"conflictNumberIndicator"],[1,"groupStatusIndicator"],[1,"WARNING",3,"type","id","title"],[1,"ERROR",3,"type","id","title"],[1,"COMPLETE",3,"type","id","title"],[1,"subGroupIndicator"],[3,"type","id","title",4,"ngIf"],[3,"type","id","title"],[1,"cx-ghost-group-menu"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-item-title","ghost"]],template:function(e,n){if(1&e&&(t.YNc(0,fa,2,2,"ng-container",0),t.ALo(1,"async"),t.YNc(2,va,2,2,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.configuration$))("ngIfElse",i)}},dependencies:[p.mk,p.sg,p.O5,f.oJW,f.RRe,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),ns=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorMenu:{component:rs}}})],imports:[p.ez,c.LUR,f.QX1,f.oPH]}),r})(),is=(()=>{class r{constructor(e,n,i,a,u,l,C){this.configuratorCommonsService=e,this.configuratorGroupsService=n,this.configRouterExtractorService=i,this.configExpertModeService=a,this.breakpointService=u,this.configuratorStorefrontUtilsService=l,this.hamburgerMenuService=C,this.ghostStyle=!0,this.subscription=new Q.w,this.PRE_HEADER=".PreHeader",this.displayedGroup$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(g=>this.configuratorGroupsService.getCurrentGroup(g.owner).pipe((0,D.b)(()=>{this.ghostStyle=!1})))),this.iconTypes=f.e1G}ngOnInit(){this.subscription.add(this.hamburgerMenuService.isExpanded.subscribe(e=>{this.configuratorStorefrontUtilsService.changeStyling(this.PRE_HEADER,"display",e?"block":"none")}))}ngOnDestroy(){this.subscription.unsubscribe(),this.configuratorStorefrontUtilsService.removeStyling(this.PRE_HEADER,"display")}getGroupTitle(e){let n=e.description;return e.groupType!==s.GroupType.CONFLICT_GROUP&&this.configExpertModeService.getExpModeActive().pipe((0,h.q)(1)).subscribe(i=>{i&&(n+=` / [${e.name}]`)}),n}isMobile(){return this.breakpointService.isDown(f.Bst.md)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(J),t.Y36(y.u6),t.Y36(rt),t.Y36(f.r),t.Y36(R),t.Y36(f.O2g))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-group-title"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("ghost",n.ghostStyle)},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroup",""],[1,"cx-group-title"],[4,"ngIf"],[1,"cx-ghost-group-title"]],template:function(e,n){if(1&e&&(t.YNc(0,ma,5,4,"ng-container",0),t.ALo(1,"async"),t.YNc(2,ya,1,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.displayedGroup$))("ngIfElse",i)}},dependencies:[p.O5,f.Mzi,p.Ov],encapsulation:2,changeDetection:0}),r})(),os=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorGroupTitle:{component:is}}})],imports:[p.ez,f.iqf]}),r})(),as=(()=>{class r{constructor(e){this.breakpointService=e}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}isDesktop(){return this.breakpointService.isUp(f.Bst.md)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.r))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:11,vars:26,consts:[[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-attribute-value"],[4,"ngIf","ngIfElse"],["mobile",""],["aria-hidden","true",1,"cx-attribute-label"],["aria-hidden","true",1,"cx-attribute-price"],[3,"formula"]],template:function(e,n){if(1&e&&(t.TgZ(0,"span",0),t._uU(1),t.ALo(2,"cxTranslate"),t.ALo(3,"cxTranslate"),t.ALo(4,"cxTranslate"),t.qZA(),t.TgZ(5,"div",1),t._uU(6),t.qZA(),t.YNc(7,ba,5,2,"ng-container",2),t.ALo(8,"async"),t.YNc(9,Ta,4,2,"ng-template",null,3,t.W1O)),2&e){const i=t.MAs(10);t.xp6(1),t.hij(" ",n.attributeOverview.valuePrice&&0!==(null==n.attributeOverview.valuePrice?null:n.attributeOverview.valuePrice.value)?n.attributeOverview.valuePriceTotal&&0!==(null==n.attributeOverview.valuePriceTotal?null:n.attributeOverview.valuePriceTotal.value)?t.xi3(2,4,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(15,Y,n.attributeOverview.value,n.attributeOverview.attribute,n.attributeOverview.valuePriceTotal.formattedValue)):t.xi3(3,7,"configurator.a11y.valueOfAttributeFullWithPrice",t.kEZ(19,Y,n.attributeOverview.value,n.attributeOverview.attribute,n.attributeOverview.valuePrice.formattedValue)):t.xi3(4,10,"configurator.a11y.valueOfAttributeFull",t.WLB(23,Z,n.attributeOverview.value,n.attributeOverview.attribute)),"\n"),t.xp6(5),t.hij(" ",n.attributeOverview.value,"\n"),t.xp6(1),t.Q6J("ngIf",t.lcZ(8,13,n.isDesktop()))("ngIfElse",i)}},dependencies:[p.O5,L,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Hr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,c.LUR,V]}),r})(),us=(()=>{class r{constructor(e,n){this.productService=e,this.translation=n}ngOnInit(){const e={images:{}};this.product$=this.attributeOverview.productCode?this.productService.get(this.attributeOverview.productCode,"list").pipe((0,v.U)(n=>n||e)):(0,N.of)(e)}getProductPrimaryImage(e){return e?.images?.PRIMARY}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}displayQuantity(){const e=this.attributeOverview.quantity;return void 0!==e&&e>0}displayPrice(){return void 0!==this.attributeOverview.valuePrice?.value&&this.attributeOverview.valuePrice?.value>0}getAriaLabel(){let e="";return this.displayQuantity()?void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPriceAndQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue,quantity:this.attributeOverview.quantity}).pipe((0,h.q)(1)).subscribe(n=>e=n):this.translation.translate("configurator.a11y.itemOfAttributeFullWithQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,quantity:this.attributeOverview.quantity}).pipe((0,h.q)(1)).subscribe(n=>e=n):void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPrice",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue}).pipe((0,h.q)(1)).subscribe(n=>e=n):this.translation.translate("configurator.a11y.itemOfAttributeFull",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute}).pipe((0,h.q)(1)).subscribe(n=>e=n),e}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.M52),t.Y36(c.D7D))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-cpq-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-value-container"],[1,"cx-thumbnail"],["format","product","aria-hidden","true",3,"container"],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-value-info"],["class","cx-code",4,"ngIf"],["class","cx-quantity",4,"ngIf"],["class","cx-price",4,"ngIf"],["aria-hidden","true",1,"cx-attribute-price-container"],[1,"cx-attribute-label"],[3,"formula"],[1,"cx-code"],[1,"cx-quantity"],[1,"cx-identifier"],[1,"cx-item"],[1,"cx-price"]],template:function(e,n){1&e&&(t.YNc(0,Sa,16,8,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.product$))},dependencies:[p.O5,f.R7z,L,p.Ov,c.X$D,c.bOD],encapsulation:2,changeDetection:0}),r})(),cs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,f.cOq,c.LUR,V]}),r})(),Wr=(()=>{class r{constructor(e){this.configuratorCommonsService=e,this.iconTypes=f.e1G,this.attributeFilterTypes=s.OverviewFilter}getGroupFilterDescription(e,n){return e.possibleGroups?.find(i=>i.id===n)?.groupDescription??""}onAttrFilterRemove(e,n){let[i,a]=this.getInputFilters(e.overview);i=i.filter(u=>n!==u),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,i,a))}onGroupFilterRemove(e,n){let[i,a]=this.getInputFilters(e.overview);a=a.filter(u=>n!==u),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,i,a))}isShowRemoveAll(e){return(e.attributeFilters?.length??0)+(e.groupFilters?.length??0)>1}onRemoveAll(e){this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,[],[]))}getInputFilters(e){return[e.attributeFilters??[],e.groupFilters??[]]}createInputConfig(e,n,i){return{...e,overview:{configId:e.configId,productCode:e.productCode,attributeFilters:n,groupFilters:i,possibleGroups:e.overview?.possibleGroups}}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-filter-bar"]],inputs:{config:"config"},decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-overview-filter-applied",3,"title","click"],["aria-hidden","true"],[3,"type"]],template:function(e,n){1&e&&(t.YNc(0,Oa,7,7,"ng-container",0),t.YNc(1,wa,6,8,"ng-container",0),t.YNc(2,Ea,7,7,"ng-container",1)),2&e&&(t.Q6J("ngForOf",n.config.overview.attributeFilters),t.xp6(1),t.Q6J("ngForOf",n.config.overview.groupFilters),t.xp6(1),t.Q6J("ngIf",n.isShowRemoveAll(n.config.overview)))},dependencies:[p.sg,p.O5,f.oJW,c.X$D],encapsulation:2}),r})(),zr=(()=>{class r{constructor(e){this.configuratorCommonsService=e,this.showFilterBar=!0,this.priceFilter=new _.p4(""),this.mySelectionsFilter=new _.p4(""),this.groupFilters=new Array}ngOnChanges(){this.extractAttrFilterState(this.config),this.extractGroupFilterState(this.config)}onFilter(e){const n=this.createInputConfig(e,this.collectAttrFilters(),this.collectGroupFilters(e.overview));this.configuratorCommonsService.updateConfigurationOverview(n)}extractGroupFilterState(e){this.groupFilters=[],e.overview.possibleGroups?.forEach(n=>{let i=!1;e.overview.groupFilters&&(i=e.overview.groupFilters.indexOf(n.id)>=0),this.groupFilters.push(new _.p4(i))})}extractAttrFilterState(e){if(e.overview.attributeFilters){const n=e.overview.attributeFilters.indexOf(s.OverviewFilter.PRICE_RELEVANT)>=0;this.priceFilter.setValue(n);const i=e.overview.attributeFilters.indexOf(s.OverviewFilter.USER_INPUT)>=0;this.mySelectionsFilter.setValue(i)}}collectGroupFilters(e){const n=[];let i=0;return this.groupFilters.forEach(a=>{a.value&&e?.possibleGroups&&n.push(e.possibleGroups[i].id),i++}),n}collectAttrFilters(){const e=[];return this.priceFilter.value&&e.push(s.OverviewFilter.PRICE_RELEVANT),this.mySelectionsFilter.value&&e.push(s.OverviewFilter.USER_INPUT),e}createInputConfig(e,n,i){return{...e,overview:{configId:e.configId,productCode:e.productCode,attributeFilters:n,groupFilters:i,possibleGroups:e.overview?.possibleGroups}}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-filter"]],inputs:{showFilterBar:"showFilterBar",config:"config"},features:[t.TTD],decls:19,vars:19,consts:[[4,"ngIf"],[1,"cx-overview-filter-header"],[1,"cx-overview-filter-option"],[1,"form-check"],["id","cx-configurator-overview-filter-option-price","type","checkbox","name","config-overview-price-filter",1,"form-check-input",3,"formControl","change"],["for","cx-configurator-overview-filter-option-price",1,"form-check-label"],["id","cx-configurator-overview-filter-option-mySelections","type","checkbox","name","config-overview-my-selection-filter",1,"form-check-input",3,"formControl","change"],["for","cx-configurator-overview-filter-option-mySelections",1,"form-check-label"],[3,"config"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"id","formControl","name","change"],[1,"form-check-label",3,"for"]],template:function(e,n){1&e&&(t.YNc(0,Ua,2,1,"ng-container",0),t.TgZ(1,"div",1),t._uU(2),t.ALo(3,"cxTranslate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"input",4),t.NdJ("change",function(){return n.onFilter(n.config)}),t.ALo(7,"cxTranslate"),t.qZA(),t.TgZ(8,"label",5),t._uU(9),t.ALo(10,"cxTranslate"),t.qZA()()(),t.TgZ(11,"div",2)(12,"div",3)(13,"input",6),t.NdJ("change",function(){return n.onFilter(n.config)}),t.ALo(14,"cxTranslate"),t.qZA(),t.TgZ(15,"label",7),t._uU(16),t.ALo(17,"cxTranslate"),t.qZA()()(),t.YNc(18,Da,5,4,"ng-container",0)),2&e&&(t.Q6J("ngIf",n.showFilterBar),t.xp6(2),t.hij(" ",t.lcZ(3,9,"configurator.overviewFilter.byOption"),"\n"),t.xp6(4),t.Q6J("formControl",n.priceFilter),t.uIk("aria-label",t.lcZ(7,11,"configurator.a11y.filterOverviewByPrice")),t.xp6(3),t.hij(" ",t.lcZ(10,13,"configurator.overviewFilter.byPrice"),""),t.xp6(4),t.Q6J("formControl",n.mySelectionsFilter),t.uIk("aria-label",t.lcZ(14,15,"configurator.a11y.filterOverviewByMySelections")),t.xp6(3),t.hij(" ",t.lcZ(17,17,"configurator.overviewFilter.mySelections"),""),t.xp6(2),t.Q6J("ngIf",n.config.overview.possibleGroups))},dependencies:[p.sg,p.O5,_.Wl,_.JJ,_.oH,Wr,c.X$D],encapsulation:2}),r})(),jr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,c.LUR,f.QX1,_.u5,_.UX]}),r})(),De=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,c.LUR,_.u5,_.UX,jr]}),r})(),ss=(()=>{class r{constructor(e,n,i){this.launchDialogService=e,this.configuratorCommonsService=n,this.configRouterExtractorService=i,this.ghostStyle=!0,this.config$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(a=>this.configuratorCommonsService.getConfiguration(a.owner)),(0,S.h)(a=>null!=a.overview),(0,D.b)(()=>{this.ghostStyle=!1})),this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(a=>this.configuratorCommonsService.getConfiguration(a.owner)),(0,S.h)(a=>null!=a.overview),(0,D.b)(()=>{this.ghostStyle=!1}))}getNumFilters(e){return(e.attributeFilters?.length??0)+(e.groupFilters?.length??0)}openFilterModal(e){this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_OV_FILTER",this.filterButton,e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.Q3W),t.Y36(O),t.Y36(y.u6))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-filter-button"]],viewQuery:function(e,n){if(1&e&&t.Gf(Na,5),2&e){let i;t.iGM(i=t.CRH())&&(n.filterButton=i.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("ghost",n.ghostStyle)},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostFilterButton",""],["tabindex","0",1,"btn","btn-secondary","cx-config-filter-button",3,"title","click"],["filterButton",""],[3,"config"],[1,"cx-ghost-filter-button","ghost"]],template:function(e,n){if(1&e&&(t.YNc(0,Ma,7,13,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Ga,1,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.configurationWithOv$))("ngIfElse",i)}},dependencies:[p.O5,Wr,p.Ov,c.X$D],encapsulation:2}),r})(),ls=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorOverviewFilterButton:{component:ss}}})],imports:[p.ez,c.LUR,jr]}),r})();const ps={launch:{CONFIGURATOR_OV_FILTER:{inlineRoot:!0,component:(()=>{class r{constructor(e){this.launchDialogService=e,this.config$=this.launchDialogService.data$,this.iconTypes=f.e1G,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}closeFilterModal(){this.launchDialogService.closeDialog("Close Filtering")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.Q3W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-filter-dialog"]],decls:12,vars:11,consts:[[1,"cx-configurator-overview-filter-dialog","cx-modal-container",3,"click"],[1,"cx-modal-content",3,"cxFocus","click","esc"],[1,"cx-dialog-header","modal-header"],[1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"title","click"],["aria-hidden","true"],[3,"type"],[4,"ngIf"],[1,"cx-dialog-body","modal-body"],[3,"config","showFilterBar"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.closeFilterModal()}),t.TgZ(1,"div",1),t.NdJ("click",function(a){return a.stopPropagation()})("esc",function(){return n.closeFilterModal()}),t.TgZ(2,"div",2)(3,"div",3),t._uU(4),t.ALo(5,"cxTranslate"),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.closeFilterModal()}),t.ALo(7,"cxTranslate"),t.TgZ(8,"span",5),t._UZ(9,"cx-icon",6),t.qZA()()(),t.YNc(10,Pa,3,2,"ng-container",7),t.ALo(11,"async"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("cxFocus",n.focusConfig),t.xp6(3),t.hij(" ",t.lcZ(5,5,"configurator.overviewFilter.title")," "),t.xp6(2),t.s9C("title",t.lcZ(7,7,"configurator.a11y.closeFilterMenu")),t.xp6(3),t.Q6J("type",n.iconTypes.CLOSE),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,9,n.config$)))},dependencies:[p.O5,f.oJW,zr,f.RRe,p.Ov,c.X$D],encapsulation:2}),r})(),dialogType:f.Myk.DIALOG}}};let gs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)(ps)],imports:[p.ez,c.LUR,f.QX1,De,f.oPH]}),r})(),ds=(()=>{class r{constructor(e,n,i){this.configuratorCommonsService=e,this.configRouterExtractorService=n,this.configuratorStorefrontUtilsService=i,this.ghostStyle=!0,this.attributeOverviewType=s.AttributeOverviewType,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(a=>this.configuratorCommonsService.getOrCreateConfiguration(a.owner)),(0,xn.g)("configId"),(0,m.w)(a=>this.configuratorCommonsService.getConfigurationWithOverview(a)),(0,S.h)(a=>null!=a.overview),(0,D.b)(()=>{this.ghostStyle=!1}))}hasAttributes(e){return this.hasGroupWithAttributes(e.overview?.groups)}hasGroupWithAttributes(e){if(e){let n=void 0!==e.find(i=>(i.attributes?i.attributes.length:0)>0);return n||(n=void 0!==e.find(i=>this.hasGroupWithAttributes(i.subGroups))),n}return!1}isSameAttribute(e,n){return e.length>1&&(0===n?e[n]?.attribute===e[n+1]?.attribute:e[n]?.attribute===e[n-1]?.attribute)}getStyleClasses(e,n){let i="";switch(e[n]?.type){case this.attributeOverviewType.BUNDLE:i+="bundle";break;case this.attributeOverviewType.GENERAL:i+="general"}return(0===n||!this.isSameAttribute(e,n))&&(i+=" margin"),!this.isSameAttribute(e,n+1)&&!i.includes("bundle")&&(i+=" last-value-pair"),i}getGroupLevelStyleClasses(e,n){let i="cx-group";return 1===e?(i+=" topLevel",n&&n.length>0&&(i+=" subgroupTopLevel")):(i+=" subgroup",i+=" subgroupLevel"+e),i}getPrefixId(e,n){return this.configuratorStorefrontUtilsService.getPrefixId(e,n)}getGroupId(e,n){return this.configuratorStorefrontUtilsService.createOvGroupId(e,n)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(y.u6),t.Y36(R))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-form"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("ghost",n.ghostStyle)},decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["noAttributes",""],["groups",""],["ghostForm",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-no-attribute-value-pairs"],[1,"cx-visually-hidden"],[4,"ngFor","ngForOf"],[3,"id","ngClass"],["aria-hidden","true"],["class","cx-attribute-value-pair",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-attribute-value-pair",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"attributeOverview"],[1,"cx-ghost-group"],[1,"cx-ghost-header","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-attribute-value"],[1,"cx-ghost-value","ghost"],[1,"cx-ghost-attribute-label"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-attribute-price","ghost"]],template:function(e,n){if(1&e&&(t.YNc(0,qa,2,2,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Za,7,6,"ng-template",null,1,t.W1O),t.YNc(4,Ha,4,4,"ng-template",null,2,t.W1O),t.YNc(6,Xa,1,2,"ng-template",null,3,t.W1O)),2&e){const i=t.MAs(7);t.Q6J("ngIf",t.lcZ(1,2,n.configuration$))("ngIfElse",i)}},dependencies:[p.mk,p.sg,p.O5,p.tP,p.RF,p.n9,p.ED,as,us,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),fs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorOverviewForm:{component:ds}}})],imports:[p.ez,Hr,cs,c.LUR]}),r})(),_s=(()=>{class r{constructor(e){this.configuratorStorefrontUtilsService=e,this.height=this.getHeight(),this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT="cx-page-slot.VariantConfigOverviewNavigation",this.CX_CONFIGURATOR_OVERVIEW_MENU="cx-configurator-overview-menu",this.CX_MENU_ITEM_BUTTONS="button.cx-menu-item",this.CX_GROUPS="div.cx-group",this.CX_MENU_GROUP="cx-menu-group",this.OV_MENU_ITEM="-ovMenuItem",this.OV_GROUP="-ovGroup",this.ACTIVE_CLASS="active",this.MENU_ITEM_HEIGHT=39.5,this.iconTypes=f.e1G,this.styles=[["margin-block-end","268px"],["position","-webkit-sticky"],["position","sticky"],["top","0"]]}ngAfterViewInit(){this.amount=this.getAmount(this.config),this.menuItemsHeight=this.getMenuItemsHeight(),this.adjustStyling(),this.onScroll()}onScroll(){this.menuItem=this.getMenuItemToHighlight(),this.highlight(this.menuItem),this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}onResize(){this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}getAmount(e){return e.overview?.groups?this.getAmountOfGroups(0,e.overview.groups):0}getAmountOfGroups(e,n){return n&&(e+=n.length,n.forEach(i=>{i.subGroups&&(e=this.getAmountOfGroups(e,i.subGroups))})),e}getMenuItemsHeight(){return this.amount*this.MENU_ITEM_HEIGHT}adjustStyling(){this.amount>=1?this.changeStyling():this.removeStyling()}getHeight(){const e=this.configuratorStorefrontUtilsService.getSpareViewportHeight();return this.menuItemsHeight>e?e+"px":""}changeStyling(){this.styles.forEach(e=>{this.configuratorStorefrontUtilsService.changeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,e[0],e[1])})}removeStyling(){this.styles.forEach(e=>{this.configuratorStorefrontUtilsService.removeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,e[0])})}getMenuItemToHighlight(){let e;const n=this.configuratorStorefrontUtilsService.getElements(this.CX_GROUPS),i=this.configuratorStorefrontUtilsService.getVerticallyScrolledPixels();return n?.forEach(a=>{if(i&&i>=a.offsetTop){const u=a.id.replace(this.OV_GROUP,this.OV_MENU_ITEM);u&&(e=this.configuratorStorefrontUtilsService.getElement("#"+u))}}),e}highlight(e){e&&this.configuratorStorefrontUtilsService.getElements(this.CX_MENU_ITEM_BUTTONS)?.forEach(i=>{i.classList.remove(this.ACTIVE_CLASS),i.id===e.id&&e.classList.add(this.ACTIVE_CLASS)})}ensureElementVisible(e){e&&this.configuratorStorefrontUtilsService.hasScrollbar(this.CX_CONFIGURATOR_OVERVIEW_MENU)&&this.configuratorStorefrontUtilsService.ensureElementVisible(this.CX_CONFIGURATOR_OVERVIEW_MENU,e)}getGroupLevelStyleClasses(e){return this.CX_MENU_GROUP+" groupLevel"+e}navigateToGroup(e,n){const i=this.configuratorStorefrontUtilsService.createOvGroupId(e,n);this.configuratorStorefrontUtilsService.scrollToConfigurationElement("#"+i+" h2")}getPrefixId(e,n){return this.configuratorStorefrontUtilsService.getPrefixId(e,n)}getGroupId(e,n){return this.configuratorStorefrontUtilsService.createOvGroupId(e,n)}getMenuItemId(e,n){return this.configuratorStorefrontUtilsService.createOvMenuItemId(e,n)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(R))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-menu"]],hostVars:2,hostBindings:function(e,n){1&e&&t.NdJ("scroll",function(a){return n.onScroll(a)},!1,t.Jf7)("resize",function(a){return n.onResize(a)},!1,t.Jf7),2&e&&t.Udp("height",n.height)},inputs:{config:"config"},decls:3,vars:1,consts:[[4,"ngIf"],["groups",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"cx-menu-item",3,"id","click"],["aria-hidden","true"],["aria-hidden","true",3,"type"]],template:function(e,n){1&e&&(t.YNc(0,eu,2,4,"ng-container",0),t.YNc(1,ou,2,1,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",n.config)},dependencies:[p.mk,p.sg,p.O5,p.tP,f.oJW,c.X$D],encapsulation:2,changeDetection:0}),r})(),Xr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,c.LUR,f.QX1]}),r})(),Cs=(()=>{class r{constructor(e,n,i){this.configuratorCommonsService=e,this.configRouterExtractorService=n,this.commonConfigUtilsService=i,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,S.h)(a=>a.owner.type===y.$g.OwnerType.PRODUCT||a.owner.type===y.$g.OwnerType.CART_ENTRY),(0,m.w)(a=>this.configuratorCommonsService.getConfiguration(a.owner))),this.configurationOverview$=this.configuration$.pipe((0,v.U)(a=>a.overview)),this.numberOfIssues$=this.configuration$.pipe((0,v.U)(a=>{const u=a.overview;return u?.totalNumberOfIssues?void 0!==u.numberOfIncompleteCharacteristics?u.numberOfIncompleteCharacteristics:u.totalNumberOfIssues:a.totalNumberOfIssues?a.totalNumberOfIssues:0})),this.numberOfConflicts$=this.configuration$.pipe((0,v.U)(a=>a.overview?.numberOfConflicts??0)),this.skipConflictsOnIssueNavigation$=this.configuration$.pipe((0,v.U)(a=>(a.overview?.numberOfConflicts??0)>0)),this.iconTypes=f.e1G}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(y.u6),t.Y36(y.NU))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-notification-banner"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","cx-error-notification-banner",4,"ngIf"],["class","cx-conflict-notification-banner",4,"ngIf"],[1,"cx-error-notification-banner"],[3,"type"],["id","cx-configurator-overview-error-msg",1,"cx-error-msg"],["aria-describedby","cx-configurator-overview-error-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"],[1,"cx-conflict-notification-banner"],["id","cx-configurator-overview-conflict-msg",1,"cx-conflict-msg"],["aria-describedby","cx-configurator-overview-conflict-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"]],template:function(e,n){1&e&&(t.YNc(0,pu,3,3,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.routerData$))},dependencies:[p.O5,f.oJW,K.rH,p.Ov,c.X$D,c.l2T],encapsulation:2,changeDetection:0}),r})(),vs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorOverviewBanner:{component:Cs}}})],imports:[p.ez,c.LUR,c.bhT,f.QX1,K.Bz]}),r})(),hs=(()=>{class r{constructor(e,n,i){this.configuratorCommonsService=e,this.configRouterExtractorService=n,this.configuratorStorefrontUtilsService=i,this.ghostStyle=!0,this.showFilter=!1,this.config$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(a=>this.configuratorCommonsService.getConfiguration(a.owner)),(0,S.h)(a=>null!=a.overview),(0,D.b)(a=>{a&&(this.ghostStyle=!1)})),this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(a=>this.configuratorCommonsService.getConfiguration(a.owner)),(0,S.h)(a=>null!=a.overview),(0,D.b)(a=>{a&&(this.ghostStyle=!1)}))}onFilter(){this.showFilter=!0}onMenu(){this.showFilter=!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(y.u6),t.Y36(R))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-overview-sidebar"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("ghost",n.ghostStyle)},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostSidebar",""],["role","tablist",1,"cx-menu-bar"],["role","tab",3,"click"],[3,"config",4,"ngIf"],[3,"config"],[1,"cx-ghost-menu"],[1,"cx-ghost-menu-bar","ghost"],[4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level1"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-menu-item-title","ghost"],[4,"ngIf"],[1,"cx-ghost-menu-level2"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level3"]],template:function(e,n){if(1&e&&(t.YNc(0,fu,10,14,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Iu,3,2,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.configurationWithOv$))("ngIfElse",i)}},dependencies:[p.sg,p.O5,zr,_s,p.Ov,c.X$D],encapsulation:2}),r})(),ms=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorOverviewSidebar:{component:hs}}})],imports:[p.ez,c.LUR,De,Xr]}),r})(),ys=(()=>{class r{constructor(e,n,i,a){this.configuratorGroupsService=e,this.configuratorCommonsService=n,this.configRouterExtractorService=i,this.configUtils=a,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(u=>this.configuratorCommonsService.getConfiguration(u.owner)))}onPrevious(e){this.configuratorGroupsService.getPreviousGroupId(e.owner).pipe((0,h.q)(1)).subscribe(n=>{n&&(this.configuratorGroupsService.navigateToGroup(e,n),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}onNext(e){this.configuratorGroupsService.getNextGroupId(e.owner).pipe((0,h.q)(1)).subscribe(n=>{n&&(this.configuratorGroupsService.navigateToGroup(e,n),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}isFirstGroup(e){return this.configuratorGroupsService.getPreviousGroupId(e).pipe((0,v.U)(n=>!n))}isLastGroup(e){return this.configuratorGroupsService.getNextGroupId(e).pipe((0,v.U)(n=>!n))}focusFirstAttribute(){this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(e=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe((0,S.h)(n=>n),(0,h.q)(1),(0,m.w)(()=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe((0,S.h)(n=>!n),(0,h.q)(1),(0,z.g)(0)))))).subscribe(()=>this.configUtils.focusFirstAttribute())}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(J),t.Y36(O),t.Y36(y.u6),t.Y36(R))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-previous-next-buttons"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-block","btn-secondary","cx-previous",3,"disabled","click"],[1,"btn","btn-block","btn-secondary","cx-next",3,"disabled","click"]],template:function(e,n){1&e&&(t.YNc(0,Ou,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.configuration$))},dependencies:[p.O5,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),bs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorPrevNext:{component:ys}}})],imports:[p.ez,c.LUR,f.oPH]}),r})(),Ts=(()=>{class r{constructor(e,n){this.configuratorCommonsService=e,this.configRouterExtractorService=n,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(i=>this.configuratorCommonsService.getConfiguration(i.owner)))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(y.u6))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-price-summary"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-price-summary-container"],[1,"cx-total-summary"],[1,"cx-summary-row","cx-total-price"],[1,"cx-label"],[4,"cxFeatureLevel"],[1,"cx-amount"],[1,"cx-summary-row","cx-base-price"],[1,"cx-summary-row","cx-selected-options"]],template:function(e,n){1&e&&(t.YNc(0,Ru,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.configuration$))},dependencies:[p.O5,c.EJv,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),xs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorPriceSummary:{component:Ts}}})],imports:[_.u5,_.UX,p.ez,c.LUR,c.GSh]}),r})(),As=(()=>{class r{constructor(e,n,i,a){this.configuratorCommonsService=e,this.configRouterExtractorService=n,this.productService=i,this.configExpertModeService=a,this.ghostStyle=!0,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(u=>this.configuratorCommonsService.getConfiguration(u.owner))),this.product$=this.configuration$.pipe((0,v.U)(u=>{switch(u.owner.type){case y.$g.OwnerType.PRODUCT:case y.$g.OwnerType.CART_ENTRY:return u.productCode;case y.$g.OwnerType.ORDER_ENTRY:return u.overview?.productCode}}),(0,m.w)(u=>u?this.productService.get(u,"list"):Cn.E)).pipe((0,D.b)(()=>{this.ghostStyle=!1})),this.showMore=!1,this.iconTypes=f.e1G}triggerDetails(){this.showMore=!this.showMore}get expMode(){return this.configExpertModeService.getExpModeActive()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(y.u6),t.Y36(c.M52),t.Y36(rt))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-product-title"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("ghost",n.ghostStyle)},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostProductTitle",""],[1,"cx-general-product-info"],[1,"cx-title"],[3,"click"],[4,"ngIf"],[1,"cx-details"],["aria-hidden","true",1,"cx-details-image"],["format","product",3,"container"],[1,"cx-details-content"],[1,"cx-detail-title"],[1,"cx-code"],[1,"cx-description"],[1,"cx-toggle-details-link-text"],["aria-hidden","true"],[3,"type"],[1,"cx-kb-key-details"],[1,"cx-kb-pair"],[1,"cx-label"],[1,"cx-value"],[1,"cx-ghost-general-product-info"]],template:function(e,n){if(1&e&&(t.YNc(0,Ku,20,14,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Hu,1,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.product$))("ngIfElse",i)}},dependencies:[p.O5,f.oJW,f.R7z,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Is=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorProductTitle:{component:As}}})],imports:[_.u5,_.UX,j.A0,p.ez,c.LUR,f.QX1,f.cOq]}),r})();const Ss={launch:{CONFIGURATOR_RESTART_DIALOG:{inlineRoot:!0,component:(()=>{class r{constructor(e,n,i,a){this.launchDialogService=e,this.configuratorCommonsService=n,this.routingService=i,this.productService=a,this.dialogData$=this.launchDialogService.data$.pipe((0,S.h)(u=>u&&u.owner)),this.product$=this.dialogData$.pipe((0,m.w)(u=>this.productService.get(u.owner.id))),this.iconTypes=f.e1G,this.focusConfig={trap:!0,block:!0,autofocus:".btn-primary",focusOnEscape:!0}}close(){this.launchDialogService.closeDialog("Close restart configuration dialog")}resume(e){this.close(),this.routingService.go({cxRoute:"configure"+e.configuratorType,params:{ownerType:y.$g.OwnerType.PRODUCT,entityKey:e.code}})}restart(e){this.configuratorCommonsService.forceNewConfiguration(e),this.close()}backToPDP(e){this.close(),this.routingService.go({cxRoute:"product",params:e})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.Q3W),t.Y36(O),t.Y36(c.Znh),t.Y36(c.M52))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-restart-dialog"]],decls:3,vars:3,consts:[[1,"cx-modal-container"],[4,"ngIf"],[1,"cx-modal-content",3,"cxFocus","esc"],[1,"cx-dialog-header","modal-header"],[1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"title","click"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],["id","cx-configurator-restart-dialog-description"],["aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-primary","btn-block",3,"click"],["type","button","aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-secondary","btn-block",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,zu,3,3,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.dialogData$)))},dependencies:[p.O5,f.oJW,f.RRe,p.Ov,c.X$D],encapsulation:2}),r})(),dialogType:f.Myk.DIALOG}}};let Os=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)(Ss)],imports:[p.ez,c.LUR,f.QX1,f.oPH]}),r})(),ws=(()=>{class r{getTabIndexConfigTab(){let e=0;return this.isOverviewPage$.pipe((0,h.q)(1)).subscribe(n=>{n&&(e=-1)}),e}getTabIndexOverviewTab(){let e=0;return this.isOverviewPage$.pipe((0,h.q)(1)).subscribe(n=>{n||(e=-1)}),e}switchTabOnArrowPress(e,n){("ArrowLeft"===e.code||"ArrowRight"===e.code)&&(e.preventDefault(),"#configTab"===n?this.overviewTab.nativeElement?.focus():this.configTab.nativeElement?.focus())}constructor(e,n){this.configRouterExtractorService=e,this.configuratorCommonsService=n,this.ghostStyle=!0,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,m.w)(i=>this.configuratorCommonsService.getConfiguration(i.owner).pipe((0,D.b)(()=>{this.ghostStyle=!1})))),this.isOverviewPage$=this.routerData$.pipe((0,v.U)(i=>i.pageType===y.iB.PageType.OVERVIEW))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y.u6),t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-tab-bar"]],viewQuery:function(e,n){if(1&e&&(t.Gf(ju,5),t.Gf(Xu,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.configTab=i.first),t.iGM(i=t.CRH())&&(n.overviewTab=i.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("ghost",n.ghostStyle)},decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["ghostTabBar",""],["role","tablist",1,"cx-tab-bar"],["role","tab",3,"tabindex","routerLink","keydown"],["configTab",""],["overviewTab",""],[1,"cx-ghost-tab-bar"]],template:function(e,n){1&e&&(t.YNc(0,nc,5,4,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.routerData$))},dependencies:[p.O5,K.rH,p.Ov,c.X$D,c.l2T],encapsulation:2,changeDetection:0}),r})(),Es=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorTabBar:{component:ws}}})],imports:[_.u5,_.UX,j.A0,p.ez,c.LUR,c.bhT,K.Bz]}),r})();const Us={productConfigurator:{updateConfigurationMessage:{waitingTime:1e3}}};let Fs=(()=>{class r{constructor(e,n,i){this.configuratorCommonsService=e,this.configRouterExtractorService=n,this.config=i,this.hasPendingChanges$=this.configRouterExtractorService.extractRouterData().pipe((0,m.w)(a=>this.configuratorCommonsService.hasPendingChanges(a.owner)),(0,yt.x)(),(0,m.w)(a=>a?(0,N.of)(a).pipe((0,z.g)(this.config.productConfigurator?.updateConfigurationMessage?.waitingTime||1e3)):(0,N.of)(a)))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O),t.Y36(y.u6),t.Y36(Kr))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-update-message"]],decls:7,vars:7,consts:[["aria-live","polite","aria-atomic","false"],[1,"cx-update-msg"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.ALo(2,"async"),t._UZ(3,"cx-spinner"),t.TgZ(4,"strong"),t._uU(5),t.ALo(6,"cxTranslate"),t.qZA()()()),2&e&&(t.xp6(1),t.ekj("visible",t.lcZ(2,3,n.hasPendingChanges$)),t.xp6(4),t.Oqu(t.lcZ(6,5,"configurator.header.updateMessage")))},dependencies:[f.ORR,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Rs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorUpdateMessage:{component:Fs}}}),(0,c.i51)(Us),{provide:Kr,useExisting:c.DeH}],imports:[p.ez,f.Fme,c.LUR]}),r})(),Ds=(()=>{class r{constructor(e,n,i,a){this.productService=e,this.translationService=n,this.configuratorRouterExtractorService=i,this.configuratorCommonsService=a,this.configuration$=this.configuratorRouterExtractorService.extractRouterData().pipe((0,m.w)(u=>this.configuratorCommonsService.getConfiguration(u.owner))),this.title$=this.translationService.translate("configurator.variantCarousel.title"),this.items$=this.configuration$.pipe((0,v.U)(u=>u.variants?u.variants:[]),(0,v.U)(u=>u.map(l=>this.productService.get(l.productCode))))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.M52),t.Y36(c.D7D),t.Y36(y.u6),t.Y36(O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cx-configurator-variant-carousel"]],decls:3,vars:5,consts:[[4,"ngIf"],[1,"cx-variant-carousel-container"],["role","region","itemWidth","285px",3,"items","title","template"],["carouselItem",""],[3,"item"]],template:function(e,n){if(1&e&&(t.YNc(0,ac,8,13,"ng-container",0),t.ALo(1,"async"),t.ALo(2,"async")),2&e){let i;t.Q6J("ngIf",(null!==(i=null==(i=t.lcZ(1,1,n.items$))?null:i.length)&&void 0!==i?i:0)>0&&t.lcZ(2,3,n.items$))}},dependencies:[p.O5,f.Fy4,f.mEt,p.Ov,c.X$D],encapsulation:2,changeDetection:0}),r})(),Ns=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.i51)({cmsComponents:{ConfiguratorVariantCarousel:{component:Ds}}})],imports:[_.u5,_.UX,p.ez,c.LUR,f.bBg,f.pvk]}),r})(),Ms=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[xs,lc,ns,Is,Es,Re,ts,os,Rs,bs,Hr,fs,Xr,vs,kc,Kc,$r,Ns,De,ls,gs,ms,jc,Os]}),r})(),tn=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:function(e){let n=null;return n=e?new(e||r):t.LFG(c.DeH),n},providedIn:"root"}),r})();class P{constructor(o,e,n){this.adapters=o,this.configUtilsService=e,this.config=n}createConfiguration(o,e,n=!1){return this.getAdapter(o.configuratorType).createConfiguration(o,e,n)}readConfiguration(o,e,n){return this.getAdapter(n.configuratorType).readConfiguration(o,e,n)}updateConfiguration(o){return this.getAdapter(o.owner.configuratorType).updateConfiguration(o)}addToCart(o){return this.getAdapter(o.owner.configuratorType).addToCart(o)}readConfigurationForCartEntry(o){return this.getAdapter(o.owner.configuratorType).readConfigurationForCartEntry(o)}updateConfigurationForCartEntry(o){return this.getAdapter(o.configuration.owner.configuratorType).updateConfigurationForCartEntry(o)}readConfigurationForOrderEntry(o){return this.getAdapter(o.owner.configuratorType).readConfigurationForOrderEntry(o)}readPriceSummary(o){return this.getAdapter(o.owner.configuratorType).readPriceSummary(o)}getConfigurationOverview(o){return this.getAdapter(o.owner.configuratorType).getConfigurationOverview(o.configId)}updateConfigurationOverview(o){const e=o.overview;return e?this.getAdapter(o.owner.configuratorType).updateConfigurationOverview(e):this.getAdapter(o.owner.configuratorType).getConfigurationOverview(o.configId)}searchVariants(o){return this.getAdapter(o.owner.configuratorType).searchVariants(o.configId)}getAdapter(o){const e=this.adapters.find(n=>this.isAdapterMatching(n,o));if(e)return e;throw new Error("No adapter found for configurator type: "+o)}isAdapterMatching(o,e){let n=o.getConfiguratorType()===e;return n&&"CLOUDCPQCONFIGURATOR"===e&&(n=(this.config?.productConfigurator?.cpqOverOcc??!1)===(!!o.supportsCpqOverOcc&&o.supportsCpqOverOcc())),n}}P.CONFIGURATOR_ADAPTER_LIST=new t.OlP("ConfiguratorAdapterList"),P.\u0275fac=function(o){return new(o||P)(t.LFG(P.CONFIGURATOR_ADAPTER_LIST),t.LFG(y.NU),t.LFG(tn,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac});let Gs=(()=>{class r{constructor(e,n,i){this.configuratorCartService=e,this.routingService=n,this.configuratorQuantityService=i,this.subscription=new Q.w,this.observeRouterChanges()}observeRouterChanges(){this.subscription.add(this.routingService.getRouterState().subscribe(e=>{this.isConfiguratorRelatedRoute(e.state.semanticRoute)||(this.configuratorCartService.removeCartBoundConfigurations(),this.configuratorQuantityService&&this.configuratorQuantityService.setQuantity(1))}))}isConfiguratorRelatedRoute(e){return!!e&&e.includes("configure")}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(Ie),t.LFG(c.Znh),t.LFG(kr,8))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ps=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(Gs))},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({}),r})();const Ls={productConfigurator:{enableVariantSearch:!1,cpqOverOcc:!1}};let en=(()=>{class r{getFirstGroupWithAttributes(e,n=!1){const i=this.getFirstGroupWithAttributesForList(e.groups,n);if(i)return i;throw new Error("Configuration does not have any attributes")}getFirstGroupWithAttributesForList(e,n){let i,a;return n&&e.length>0&&e[0].groupType===s.GroupType.CONFLICT_HEADER_GROUP&&(i=e[0].subGroups.filter(u=>u.attributes&&u.attributes.length>0).shift()),void 0===i&&(i=e.filter(u=>u.attributes&&u.attributes.length>0&&u.groupType!==s.GroupType.CONFLICT_GROUP).shift()),a=i?i.id:e.filter(u=>u.subGroups&&u.subGroups.length>0).flatMap(u=>this.getFirstGroupWithAttributesForList(u.subGroups,n)).filter(u=>u).shift(),a}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Zs=[(()=>{class r{constructor(e,n,i,a,u,l,C){this.actions$=e,this.configuratorCommonsConnector=n,this.commonConfigUtilsService=i,this.configuratorGroupUtilsService=a,this.configuratorGroupStatusService=u,this.store=l,this.configuratorBasicEffectService=C,this.logger=(0,t.f3M)(c.mQy),this.createConfiguration$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(jt),(0,$.zg)(g=>this.configuratorCommonsConnector.createConfiguration(g.payload.owner,g.payload.configIdTemplate,g.payload.forceReset).pipe((0,m.w)(d=>{const T=this.configuratorBasicEffectService.getFirstGroupWithAttributes(d);return this.store.dispatch(new lt({...d,interactionState:{currentGroup:T}})),[new vr(d),new St(d)]}),(0,q.K)(d=>[new Cr({ownerKey:g.payload.owner.key,error:(0,c.cxH)(d,this.logger)})]))))),this.readConfiguration$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(te),(0,$.zg)(g=>this.configuratorCommonsConnector.readConfiguration(g.payload.configuration.configId,g.payload.groupId,g.payload.configuration.owner).pipe((0,m.w)(d=>[new be(d)]),(0,q.K)(d=>[new ye({ownerKey:g.payload.configuration.owner.key,error:(0,c.cxH)(d,this.logger)})]))))),this.updateConfiguration$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(re),(0,v.U)(g=>g.payload),(0,$.zg)(g=>this.configuratorCommonsConnector.updateConfiguration(g).pipe((0,v.U)(d=>new br({...d,interactionState:{isConflictResolutionMode:g.interactionState.isConflictResolutionMode}})),(0,q.K)(d=>{const T=(0,c.cxH)(d,this.logger);return[new yr({configuration:g,error:T})]}))))),this.updatePriceSummary$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(ue),(0,v.U)(g=>g.payload),(0,S.h)(g=>!0===g.pricingEnabled),(0,$.zg)(g=>this.configuratorCommonsConnector.readPriceSummary(g).pipe((0,v.U)(d=>new Ir(d)),(0,q.K)(d=>{const T=(0,c.cxH)(d,this.logger);return[new Ar({ownerKey:g.owner.key,error:T})]}))))),this.getOverview$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(se),(0,v.U)(g=>g.payload),(0,$.zg)(g=>this.configuratorCommonsConnector.getConfigurationOverview(g).pipe((0,v.U)(d=>new wr({ownerKey:g.owner.key,overview:d})),(0,q.K)(d=>{const T=(0,c.cxH)(d,this.logger);return[new Or({ownerKey:g.owner.key,error:T})]}))))),this.updateOverview$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(pe),(0,v.U)(g=>g.payload),(0,$.zg)(g=>this.configuratorCommonsConnector.updateConfigurationOverview(g).pipe((0,v.U)(d=>new Fr({ownerKey:g.owner.key,overview:d})),(0,q.K)(d=>{const T=(0,c.cxH)(d,this.logger);return[new Ur({ownerKey:g.owner.key,error:T})]}))))),this.updateConfigurationSuccess$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(ie),(0,v.U)(g=>g.payload),(0,$.zg)(g=>this.store.pipe((0,w.Ys)(gt(g.owner.key)),(0,h.q)(1),(0,S.h)(d=>!1===d),(0,m.w)(()=>this.store.pipe((0,w.Ys)((r=>(0,w.P1)(W(r),o=>o?.interactionState?.currentGroup))(g.owner.key)),(0,h.q)(1),(0,v.U)(d=>{const T=this.configuratorBasicEffectService.getFirstGroupWithAttributes(g,g.interactionState.isConflictResolutionMode);return{currentGroupId:d,groupIdFromPayload:T,parentGroupFromPayload:this.configuratorGroupUtilsService.getParentGroup(g.groups,this.configuratorGroupUtilsService.getGroupById(g.groups,T),void 0)}}),(0,m.w)(d=>{const T=new Tr(g),E=new lt({...g,interactionState:{currentGroup:d.groupIdFromPayload}}),st=new St(g);return d.currentGroupId===d.groupIdFromPayload?[T,E,st]:[T,E,st,new Te({configuration:g,groupId:d.groupIdFromPayload,parentGroupId:d.parentGroupFromPayload?.id})]}))))))),this.updateConfigurationFail$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(ne),(0,v.U)(g=>g.payload),(0,$.zg)(g=>this.store.pipe((0,w.Ys)(gt(g.configuration.owner.key)),(0,h.q)(1),(0,S.h)(d=>!1===d),(0,v.U)(()=>new xr(g.configuration)))))),this.handleErrorOnUpdate$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(ae),(0,v.U)(g=>g.payload),(0,v.U)(g=>new hr({configuration:g,groupId:this.configuratorBasicEffectService.getFirstGroupWithAttributes(g)})))),this.groupChange$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Ot),(0,m.w)(g=>this.store.pipe((0,w.Ys)(gt(g.payload.configuration.owner.key)),(0,h.q)(1),(0,S.h)(d=>!1===d),(0,m.w)(()=>this.configuratorCommonsConnector.readConfiguration(g.payload.configuration.configId,g.payload.groupId,g.payload.configuration.owner).pipe((0,m.w)(d=>[new Dr({entityKey:g.payload.configuration.owner.key,currentGroup:g.payload.groupId}),new xe({entityKey:g.payload.configuration.owner.key,menuParentGroup:g.payload.parentGroupId}),new be(d),new lt({...d,interactionState:{currentGroup:g.payload.groupId}})]),(0,q.K)(d=>[new ye({ownerKey:g.payload.configuration.owner.key,error:(0,c.cxH)(d,this.logger)})]))))))),this.removeProductBoundConfigurations$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(ve),(0,m.w)(()=>this.store.pipe((0,w.Ys)(Et),(0,h.q)(1),(0,v.U)(g=>{const d=g.configurations.entities,T=[];for(const E in d)E.includes(y.$g.OwnerType.PRODUCT)&&T.push(E);return new pt({ownerKey:T})})))))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(x.eX),t.LFG(P),t.LFG(y.NU),t.LFG(ut),t.LFG(Zr),t.LFG(w.yh),t.LFG(en))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),(()=>{class r{constructor(e,n,i,a,u,l){this.actions$=e,this.configuratorCommonsConnector=n,this.commonConfigUtilsService=i,this.configuratorGroupUtilsService=a,this.store=u,this.configuratorBasicEffectService=l,this.logger=(0,t.f3M)(c.mQy),this.addToCart$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Jt),(0,v.U)(C=>C.payload),(0,m.w)(C=>this.configuratorCommonsConnector.addToCart(C).pipe((0,m.w)(g=>{const d=g.entry?.entryNumber;if(void 0===d)throw Error("Entry number is required in addToCart response");return[new nr({ownerKey:C.owner.key,cartEntryNo:d.toString()}),new nt.$.CartAddEntrySuccess({...g,userId:C.userId,cartId:C.cartId,productCode:C.productCode,quantity:C.quantity,deliveryModeChanged:g.deliveryModeChanged,entry:g.entry,quantityAdded:g.quantityAdded,statusCode:g.statusCode,statusMessage:g.statusMessage})]}),(0,q.K)(g=>(0,N.of)(new nt.$.CartAddEntryFail({userId:C.userId,cartId:C.cartId,productCode:C.productCode,quantity:C.quantity,error:g instanceof H.UA?(0,c.cxH)(g,this.logger):g}))))))),this.updateCartEntry$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(It),(0,v.U)(C=>C.payload),(0,m.w)(C=>this.configuratorCommonsConnector.updateConfigurationForCartEntry(C).pipe((0,m.w)(g=>[new nt.$.CartUpdateEntrySuccess({userId:C.userId,cartId:C.cartId,entryNumber:C.cartEntryNumber,quantity:g.quantity})]),(0,q.K)(g=>(0,N.of)(new nt.$.CartUpdateEntryFail({userId:C.userId,cartId:C.cartId,entryNumber:C.cartEntryNumber,error:(0,c.cxH)(g,this.logger)}))))))),this.readConfigurationForCartEntry$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(kt),(0,m.w)(C=>this.configuratorCommonsConnector.readConfigurationForCartEntry(C.payload).pipe((0,m.w)(d=>{const T=new lt({...d,interactionState:{currentGroup:this.configuratorBasicEffectService.getFirstGroupWithAttributes(d,!d.immediateConflictResolution)}});return[new We(d),T,new St(d)]}),(0,q.K)(d=>[new ze({ownerKey:C.payload.owner.key,error:(0,c.cxH)(d,this.logger)})]))))),this.readConfigurationForOrderEntry$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Qt),(0,m.w)(C=>this.configuratorCommonsConnector.readConfigurationForOrderEntry(C.payload).pipe((0,m.w)(d=>[new Xe(d)]),(0,q.K)(d=>[new tr({ownerKey:C.payload.owner.key,error:(0,c.cxH)(d,this.logger)})]))))),this.removeCartBoundConfigurations$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Ht),(0,m.w)(()=>this.store.pipe((0,w.Ys)(Et),(0,h.q)(1),(0,v.U)(C=>{const g=C.configurations.entities,d=[],T=[];for(const E in g)E.includes(y.$g.OwnerType.CART_ENTRY)?d.push(E):E.includes(y.$g.OwnerType.PRODUCT)&&T.push(E);return T.forEach(E=>{void 0!==g[E].value?.nextOwner&&d.push(E)}),new pt({ownerKey:d})}))))),this.addOwner$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)($t),(0,m.w)(C=>this.store.pipe((0,w.Ys)(W(C.payload.ownerKey)),(0,h.q)(1),(0,m.w)(g=>{const d=y.mR.createOwner(y.$g.OwnerType.CART_ENTRY,C.payload.cartEntryNo);return this.commonConfigUtilsService.setOwnerKey(d),[new or({configuration:g,cartEntryNo:C.payload.cartEntryNo}),new Rr({entityKey:d.key,interactionState:g.interactionState})]})))))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(x.eX),t.LFG(P),t.LFG(y.NU),t.LFG(ut),t.LFG(w.yh),t.LFG(en))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),(()=>{class r{constructor(e,n,i){this.actions$=e,this.configuratorCommonsConnector=n,this.configuratorCoreConfig=i,this.logger=(0,t.f3M)(c.mQy),this.searchVariants$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Wt),(0,S.h)(()=>!0===this.configuratorCoreConfig.productConfigurator?.enableVariantSearch),(0,S.h)(a=>"CPQCONFIGURATOR"===a.payload.owner.configuratorType),(0,m.w)(a=>this.configuratorCommonsConnector.searchVariants(a.payload).pipe((0,m.w)(u=>[new cr({ownerKey:a.payload.owner.key,variants:u})]),(0,q.K)(u=>[new ur({ownerKey:a.payload.owner.key,error:(0,c.cxH)(u,this.logger)})])))))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(x.eX),t.LFG(P),t.LFG(tn))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})()];class ft{static mergeGroupsWithSupplements(o,e){const n=[];return o.forEach(i=>n.push(this.mergeGroupWithSupplements(i,e))),n}static mergeGroupWithSupplements(o,e){return this.isTargetGroup(o,e)?this.mergeTargetGroupWithSupplements(o,e):{...o,subGroups:this.mergeGroupsWithSupplements(o.subGroups,e)}}static mergeTargetGroupWithSupplements(o,e){let n=o.attributes;return e.forEach(i=>{const a=ft.getAttributeName(i.attributeUiKey);n=this.updateArrayElement(n,u=>u.name===a,u=>({...u,values:this.mergeValuesWithSupplement(u.values,i)}))}),{...o,attributes:n}}static mergeValuesWithSupplement(o,e){let n=o;return e.valueSupplements.forEach(i=>{n=this.updateArrayElement(n,a=>a.valueCode===i.attributeValueKey,a=>({...a,valuePrice:i.priceValue}))}),n}static isTargetGroup(o,e){const n=e[0];if(n){const i=ft.getAttributeName(n.attributeUiKey),a=ft.getKey(n.attributeUiKey,i);return o.id.indexOf(a)>=0}throw new Error("We expect at least one attribute supplement")}static updateArrayElement(o,e,n){if(o){const i=o.findIndex(e);if(-1===i)return o;const u=n(o[i],i),l=[...o];return l[i]=u,l}}static getAttributeName(o){const e=o.lastIndexOf("@");return o.slice(e+1)}static getKey(o,e){return o.replace("@"+e,"")}}const ks={configId:"",productCode:"",groups:[],flatGroups:[],interactionState:{currentGroup:void 0,groupsVisited:{},menuParentGroup:void 0},owner:y.mR.createInitialOwner()};let F;function Bs(r=ks,o){return function Qs(){void 0===F&&(F=new Map,F.set(oe,Ys),F.set(It,Ks),F.set(Xt,Hs),F.set(ee,Ws),F.set(Bt,zs),F.set(ce,js),F.set(le,Xs),F.set(ge,tl),F.set(zt,el),F.set(Yt,rl),F.set(Kt,nl),F.set(de,il),F.set(fe,ol),F.set(_e,al),F.set(Ce,ul),F.set(wt,Js),F.set(he,$s),F.set(Ot,cl))}(),F.has(o.type)?F.get(o.type)(r,o):r}function Ys(r,o){const e=Dt(o,r);return _t(e),e.isCartEntryUpdateRequired=!0,e.overview=void 0,void 0!==r.interactionState.newConfiguration&&(e.interactionState.newConfiguration=!1),e}function _t(r){r.interactionState.showConflictSolverDialog=r.immediateConflictResolution&&!r.consistent,r.interactionState.showConflictSolverDialog&&(r.interactionState.issueNavigationDone=!0)}function Js(r,o){if(o.type===wt)return{...r,interactionState:{...r.interactionState,showConflictSolverDialog:!1}}}function $s(r){const o={...r,interactionState:{...r.interactionState}};return _t(o),o}function Ks(r){const o={...r};return o.isCartEntryUpdateRequired=!1,o}function Hs(r,o){const e=Rt(Dt(o,r));return _t(e),e.interactionState.newConfiguration=e.newConfiguration,e}function Ws(r,o){const e=Rt(Dt(o,r));return _t(e),e}function zs(r,o){return Rt(Dt(o,r))}function js(r,o){return Rt(function sl(r,o){const e={...r.payload},n=e.priceSupplements,i=n&&n.length>0?ft.mergeGroupsWithSupplements(o.groups,n):o.groups;return{...o,...e,groups:i,interactionState:{...o.interactionState,...e.interactionState,issueNavigationDone:!0}}}(o,r))}function Xs(r,o){const e={...o.payload.overview,possibleGroups:o.payload.overview.groups};return{...r,overview:e,priceSummary:e.priceSummary,interactionState:{...r.interactionState,issueNavigationDone:!1}}}function tl(r,o){const e={...o.payload.overview};return{...r,overview:e,priceSummary:e.priceSummary,interactionState:{...r.interactionState,issueNavigationDone:!1}}}function el(r,o){return{...r,variants:o.payload.variants}}function rl(r,o){const e={...o.payload};return{...r,...e,priceSummary:e.overview?.priceSummary}}function nl(r,o){const e={...o.payload.configuration};return e.nextOwner=y.mR.createOwner(y.$g.OwnerType.CART_ENTRY,o.payload.cartEntryNo),{...r,...e}}function il(r,o){return{...r,interactionState:o.payload.interactionState}}function ol(r,o){const e=o.payload.currentGroup,n={...r,interactionState:{...r.interactionState,currentGroup:e}};return _t(n),n}function al(r,o){const e=o.payload.menuParentGroup;return{...r,interactionState:{...r.interactionState,menuParentGroup:e}}}function ul(r,o){const e=o.payload.visitedGroups,n={groupsVisited:{}};return r.interactionState.groupsVisited&&Object.keys(r.interactionState.groupsVisited).forEach(i=>rn(n,i)),e.forEach(i=>rn(n,i)),{...r,interactionState:{...r.interactionState,groupsVisited:n.groupsVisited}}}function cl(r,o){const e=o.payload.conflictResolutionMode;return{...r,interactionState:{...r.interactionState,isConflictResolutionMode:e}}}function rn(r,o){const e=r.groupsVisited;e&&(e[o]=!0)}function Rt(r){if(r.interactionState.currentGroup)return r;let o;const e=r.flatGroups;e&&e.length>0&&(o=r.immediateConflictResolution?e.find(i=>!i.id.startsWith(s.ConflictIdPrefix))?.id:e[0].id);const n=o?.startsWith(s.ConflictIdPrefix)?s.ConflictHeaderId:void 0;return{...r,interactionState:{...r.interactionState,currentGroup:o,menuParentGroup:n}}}function Dt(r,o){const e={...r.payload},n=e.groups.length>0?e.groups:o.groups;return{...o,...e,groups:n,interactionState:{...o.interactionState,...e.interactionState,showConflictSolverDialog:o.interactionState.showConflictSolverDialog,issueNavigationDone:!0}}}const nn=new t.OlP("ConfiguratorReducers"),pl={provide:nn,useFactory:function ll(){return{configurations:c.kPG.entityProcessesLoaderReducer(A,Bs)}}};let gl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[pl],imports:[p.ez,c.vUS,w.Aw.forFeature(Je,nn),x.sQ.forFeature(Zs)]}),r})(),dl=(()=>{class r{constructor(e,n,i){this.eventService=e,this.configExpertModeService=n,this.configuratorCommonsService=i,this.subscription=new Q.w,this.onLogout()}onLogout(){this.subscription.add((0,vn.T)(this.eventService.get(c.rX_)).subscribe(()=>{this.configExpertModeService.setExpModeActive(!1),this.configExpertModeService.setExpModeRequested(!1),this.configuratorCommonsService.removeProductBoundConfigurations()}))}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.POd),t.LFG(rt),t.LFG(O))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),fl=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(dl))},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[P,(0,c.i51)(Ls)],imports:[gl,Ps]}),r})(),_l=(()=>{class r{constructor(){}convert(e,n){return{...n,userId:e.userId,cartId:e.cartId,product:{code:e.productCode},quantity:e.quantity,configId:e.configId}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var I;!function(r){let o;var l;let e,n,i,a,u;(l=o=r.GroupType||(r.GroupType={})).CSTIC_GROUP="CSTIC_GROUP",l.INSTANCE="INSTANCE",l.CONFLICT_HEADER="CONFLICT_HEADER",l.CONFLICT="CONFLICT",function(l){l.STRING="STRING",l.NUMERIC="NUMERIC",l.CHECK_BOX="CHECK_BOX",l.CHECK_BOX_LIST="CHECK_BOX_LIST",l.RADIO_BUTTON="RADIO_BUTTON",l.RADIO_BUTTON_ADDITIONAL_INPUT="RADIO_BUTTON_ADDITIONAL_INPUT",l.DROPDOWN="DROPDOWN",l.DROPDOWN_ADDITIONAL_INPUT="DROPDOWN_ADDITIONAL_INPUT",l.READ_ONLY="READ_ONLY",l.NOT_IMPLEMENTED="NOT_IMPLEMENTED",l.SINGLE_SELECTION_IMAGE="SINGLE_SELECTION_IMAGE",l.MULTI_SELECTION_IMAGE="MULTI_SELECTION_IMAGE"}(e=r.UiType||(r.UiType={})),function(l){l.BUY="BUY"}(n=r.PriceType||(r.PriceType={})),function(l){l.VALUE_IMAGE="VALUE_IMAGE",l.CSTIC_IMAGE="CSTIC_IMAGE"}(i=r.ImageFormatType||(r.ImageFormatType={})),function(l){l.PRIMARY="PRIMARY",l.GALLERY="GALLERY"}(a=r.ImageType||(r.ImageType={})),function(l){l.VISIBLE="PRIMARY",l.USER_INPUT="USER_INPUT",l.PRICE_RELEVANT="PRICE_RELEVANT"}(u=r.OverviewFilterEnum||(r.OverviewFilterEnum={}))}(I||(I={}));let Cl=(()=>{class r{constructor(e,n,i){this.config=e,this.translation=n,this.uiSettingsConfig=i}convert(e,n){const i={...n,owner:n?.owner??y.mR.createInitialOwner(),interactionState:n?.interactionState??{},configId:e.configId,complete:e.complete,consistent:e.consistent,totalNumberOfIssues:e.totalNumberOfIssues,productCode:e.rootProduct,groups:[],flatGroups:[],kbKey:e.kbKey??void 0,pricingEnabled:e.pricingEnabled??!0,hideBasePriceAndSelectedOptions:e.hideBasePriceAndSelectedOptions,immediateConflictResolution:e.immediateConflictResolution??!1,newConfiguration:e.newConfiguration},a=[];return e.groups?.forEach(u=>this.convertGroup(u,i.groups,a)),i.flatGroups=a,i}convertGroup(e,n,i){const a=[];e.attributes&&e.attributes.forEach(l=>this.convertAttribute(l,a));const u={description:e.description,configurable:e.configurable,complete:e.complete,consistent:e.consistent,groupType:this.convertGroupType(e.groupType),name:e.name,id:e.id,attributes:a,subGroups:[]};this.setGroupDescription(u),e.subGroups&&e.subGroups.forEach(l=>this.convertGroup(l,u.subGroups,i)),(u.groupType===s.GroupType.ATTRIBUTE_GROUP||u.groupType===s.GroupType.CONFLICT_GROUP)&&i.push(u),n.push(u)}getGroupId(e,n){return e.replace("@"+n,"")}convertAttribute(e,n){const i=e.conflicts?e.conflicts.length:0,a=[],u=[];e.images&&e.images.forEach(g=>this.convertImage(g,a)),this.addRetractValue(e,u),e.domainValues&&e.domainValues.forEach(g=>this.convertValue(g,u));const l=this.convertAttributeType(e),C={name:e.name,label:e.langDepName,required:e.required,uiType:l,uiTypeVariation:e.type,groupId:this.getGroupId(e.key,e.name),userInput:l===s.UiType.NUMERIC||l===s.UiType.STRING?e.formattedValue?e.formattedValue:"":void 0,maxlength:(e.maxlength??0)+(e.negativeAllowed?1:0),numDecimalPlaces:e.numberScale,negativeAllowed:e.negativeAllowed,numTotalLength:e.typeLength,selectedSingleValue:void 0,hasConflicts:i>0,images:a,values:u,intervalInDomain:e.intervalInDomain,key:e.key,validationType:e.validationType,visible:e.visible};this.setSelectedSingleValue(C),this.compileAttributeIncomplete(C),n.push(C)}setSelectedSingleValue(e){if(e.values){const n=e.values.map(i=>i).filter(i=>i.selected);n&&1===n.length&&(e.selectedSingleValue=n[0].valueCode)}}isRetractValueSelected(e){return!(e.domainValues&&e.domainValues.filter(n=>n.selected).length)}setRetractValueDisplay(e,n){(e===s.UiType.DROPDOWN||e===s.UiType.RADIOBUTTON)&&(e===s.UiType.DROPDOWN&&n.selected?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,h.q)(1)).subscribe(i=>n.valueDisplay=i):this.translation.translate("configurator.attribute.noOptionSelectedMsg").pipe((0,h.q)(1)).subscribe(i=>n.valueDisplay=i))}hasSourceAttributeConflicts(e){return!!e.conflicts&&e.conflicts.length>0}isSourceAttributeTypeReadOnly(e){return e.type===I.UiType.READ_ONLY}isRetractBlocked(e){return!!e.retractBlocked&&e.retractBlocked}addRetractValue(e,n){const i=this.isRetractBlocked(e),a=this.hasSourceAttributeConflicts(e);if(!i&&(this.uiSettingsConfig?.productConfigurator?.addRetractOption||this.isSourceAttributeTypeReadOnly(e)&&a)){const u=this.convertAttributeType(e);if(u===s.UiType.RADIOBUTTON||u===s.UiType.DROPDOWN){const l={valueCode:s.RetractValueCode,selected:this.isRetractValueSelected(e)};this.setRetractValueDisplay(u,l),n.push(l)}}}convertValue(e,n){const i=[];e.images&&e.images.forEach(u=>this.convertImage(u,i)),n.push({valueCode:e.key,valueDisplay:e.langDepName,name:e.name,selected:e.selected,images:i})}convertImage(e,n){const i={url:(this.config?.backend?.media?.baseUrl||this.config?.backend?.occ?.baseUrl||"")+e.url,altText:e.altText,galleryIndex:e.galleryIndex,type:this.convertImageType(e.imageType),format:this.convertImageFormatType(e.format)};n.push(i)}convertAttributeType(e){let n;const i=e.type?.toString()??"";switch(this.determineCoreUiType(i)){case I.UiType.RADIO_BUTTON:n=s.UiType.RADIOBUTTON;break;case I.UiType.RADIO_BUTTON_ADDITIONAL_INPUT:n=s.UiType.RADIOBUTTON_ADDITIONAL_INPUT;break;case I.UiType.DROPDOWN:n=s.UiType.DROPDOWN;break;case I.UiType.DROPDOWN_ADDITIONAL_INPUT:n=s.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case I.UiType.STRING:n=s.UiType.STRING;break;case I.UiType.NUMERIC:n=s.UiType.NUMERIC;break;case I.UiType.READ_ONLY:n=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?s.UiType.RADIOBUTTON:s.UiType.READ_ONLY;break;case I.UiType.CHECK_BOX_LIST:n=s.UiType.CHECKBOXLIST;break;case I.UiType.CHECK_BOX:n=s.UiType.CHECKBOX;break;case I.UiType.MULTI_SELECTION_IMAGE:n=s.UiType.MULTI_SELECTION_IMAGE;break;case I.UiType.SINGLE_SELECTION_IMAGE:n=s.UiType.SINGLE_SELECTION_IMAGE;break;default:n=s.UiType.NOT_IMPLEMENTED}return n}determineCoreUiType(e){const n=e.indexOf(s.CustomUiTypeIndicator);return n>0?e.substring(0,n):e}convertGroupType(e){switch(e){case I.GroupType.CSTIC_GROUP:return s.GroupType.ATTRIBUTE_GROUP;case I.GroupType.INSTANCE:return s.GroupType.SUB_ITEM_GROUP;case I.GroupType.CONFLICT_HEADER:return s.GroupType.CONFLICT_HEADER_GROUP;case I.GroupType.CONFLICT:return s.GroupType.CONFLICT_GROUP}}setGroupDescription(e){switch(e.groupType){case s.GroupType.CONFLICT_HEADER_GROUP:this.translation.translate("configurator.group.conflictHeader").pipe((0,h.q)(1)).subscribe(i=>e.description=i);break;case s.GroupType.CONFLICT_GROUP:const n=e.description;this.translation.translate("configurator.group.conflictGroup",{attribute:e.name}).pipe((0,h.q)(1)).subscribe(i=>e.description=i),e.name=n;break;default:if("_GEN"!==e.name)return;this.translation.translate("configurator.group.general").pipe((0,h.q)(1)).subscribe(i=>e.description=i)}}convertImageType(e){switch(e){case I.ImageType.GALLERY:return s.ImageType.GALLERY;case I.ImageType.PRIMARY:return s.ImageType.PRIMARY}}convertImageFormatType(e){switch(e){case I.ImageFormatType.VALUE_IMAGE:return s.ImageFormatType.VALUE_IMAGE;case I.ImageFormatType.CSTIC_IMAGE:return s.ImageFormatType.ATTRIBUTE_IMAGE}}compileAttributeIncomplete(e){switch(e.incomplete=!1,e.uiType){case s.UiType.RADIOBUTTON:case s.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case s.UiType.DROPDOWN_ADDITIONAL_INPUT:case s.UiType.DROPDOWN:(!e.selectedSingleValue||e.selectedSingleValue===s.RetractValueCode)&&(e.incomplete=!0);break;case s.UiType.SINGLE_SELECTION_IMAGE:e.selectedSingleValue||(e.incomplete=!0);break;case s.UiType.NUMERIC:case s.UiType.STRING:e.userInput||(e.incomplete=!0);break;case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOX:case s.UiType.MULTI_SELECTION_IMAGE:{const n=void 0!==e.values?.find(i=>i.selected);e.incomplete=!n;break}}}}return r.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",r.\u0275fac=function(e){return new(e||r)(t.LFG(c.Vri),t.LFG(c.D7D),t.LFG(dt))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Ct=new t.OlP("VariantConfiguratorNormalizer"),on=new t.OlP("VariantConfiguratorSerializer"),an=new t.OlP("VariantConfiguratorPriceSummaryNormalizer"),un=new t.OlP("VariantConfiguratorPriceNormalizer"),cn=new t.OlP("VariantConfiguratorAddToCartSerializer"),sn=new t.OlP("VariantConfiguratorUpdateCartEntrySerializer"),Nt=new t.OlP("VariantConfiguratorOverviewNormalizer"),ln=new t.OlP("VariantConfiguratorOverviewSerializer");let vl=(()=>{class r{constructor(e,n){this.translation=e,this.converterService=n}convert(e,n){const i={priceSummary:e.pricing,configId:e.id},a={...n,configId:e.id,groups:e.groups?.flatMap(u=>this.convertGroup(u)),priceSummary:this.converterService.convert(i,an),productCode:e.productCode};return this.setIssueCounters(a,e),a}convertGroup(e){const n=[],i=e.characteristicValues,a=e.subGroups,u={id:e.id,groupDescription:e.groupDescription,attributes:i?i.map(l=>({attribute:l.characteristic,attributeId:l.characteristicId,value:l.value,valueId:l.valueId,valuePrice:l.price})):[]};if(this.setGeneralDescription(u),a){const l=[];a.forEach(C=>this.convertGroup(C).forEach(g=>l.push(g))),u.subGroups=l}return n.push(u),n}setGeneralDescription(e){"_GEN"===e.id&&this.translation.translate("configurator.group.general").pipe((0,h.q)(1)).subscribe(n=>e.groupDescription=n)}setIssueCounters(e,n){e.totalNumberOfIssues=n.totalNumberOfIssues,e.numberOfConflicts=n.numberOfConflicts,e.numberOfIncompleteCharacteristics=n.numberOfIncompleteCharacteristics}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.D7D),t.LFG(c.IXI))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),hl=(()=>{class r{constructor(e){this.converterService=e}convert(e,n){return{...n,id:e.configId,productCode:e.productCode,appliedCsticFilter:this.convertAttributeFilters(e.attributeFilters),groupFilterList:this.convertGroupFilters(e.groupFilters)}}convertAttributeFilters(e){const n=[];return e?.forEach(i=>{n.push({key:i,selected:!0})}),n}convertGroupFilters(e){const n=[];return e?.forEach(i=>{n.push({key:i,selected:!0})}),n}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.IXI))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ml=(()=>{class r{convert(e,n){return{...n,...e.priceSummary}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),yl=(()=>{class r{convert(e,n){const i=[];return e.groups.forEach(u=>this.convertGroup(u,i)),{...n,configId:e.configId,rootProduct:e.productCode,complete:e.complete,groups:i}}convertGroup(e,n){const i=[],a=[];e.attributes&&e.attributes.forEach(l=>this.convertAttribute(l,a)),e.subGroups&&e.subGroups.forEach(l=>this.convertGroup(l,i));const u={name:e.name,id:e.id,configurable:e.configurable,groupType:this.convertGroupType(e.groupType??s.GroupType.ATTRIBUTE_GROUP),description:e.description,attributes:a,subGroups:i};n.push(u)}isRetractValue(e){return e.selectedSingleValue===s.RetractValueCode}getRetractedValue(e){return e.values?.find(n=>n.selected)?.valueCode}retractValue(e,n){this.isRetractValue(e)?(n.value=this.getRetractedValue(e),n.retractTriggered=!0):n.value=e.selectedSingleValue}convertAttribute(e,n){const i={key:e.name,name:e.name,langDepName:e.label,required:e.required,retractTriggered:e.retractTriggered,type:this.convertCharacteristicType(e.uiType??s.UiType.NOT_IMPLEMENTED)};if(e.uiType===s.UiType.DROPDOWN||e.uiType===s.UiType.DROPDOWN_ADDITIONAL_INPUT||e.uiType===s.UiType.RADIOBUTTON||e.uiType===s.UiType.RADIOBUTTON_ADDITIONAL_INPUT||e.uiType===s.UiType.SINGLE_SELECTION_IMAGE)this.retractValue(e,i);else if(e.uiType===s.UiType.STRING)i.value=e.userInput;else if(e.uiType===s.UiType.NUMERIC)i.formattedValue=e.userInput;else if(e.uiType===s.UiType.CHECKBOXLIST||e.uiType===s.UiType.CHECKBOX||e.uiType===s.UiType.MULTI_SELECTION_IMAGE){const a=[];e.values&&e.values.forEach(u=>{this.convertValue(u,a)}),i.domainValues=a}n.push(i)}convertValue(e,n){n.push({key:e.valueCode,langDepName:e.valueDisplay,name:e.name,selected:e.selected})}convertCharacteristicType(e){let n;switch(e){case s.UiType.RADIOBUTTON:n=I.UiType.RADIO_BUTTON;break;case s.UiType.RADIOBUTTON_ADDITIONAL_INPUT:n=I.UiType.RADIO_BUTTON_ADDITIONAL_INPUT;break;case s.UiType.DROPDOWN:n=I.UiType.DROPDOWN;break;case s.UiType.DROPDOWN_ADDITIONAL_INPUT:n=I.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case s.UiType.STRING:n=I.UiType.STRING;break;case s.UiType.NUMERIC:n=I.UiType.NUMERIC;break;case s.UiType.CHECKBOX:n=I.UiType.CHECK_BOX;break;case s.UiType.CHECKBOXLIST:n=I.UiType.CHECK_BOX_LIST;break;case s.UiType.MULTI_SELECTION_IMAGE:n=I.UiType.MULTI_SELECTION_IMAGE;break;case s.UiType.SINGLE_SELECTION_IMAGE:n=I.UiType.SINGLE_SELECTION_IMAGE;break;default:n=I.UiType.NOT_IMPLEMENTED}return n}convertGroupType(e){switch(e){case s.GroupType.ATTRIBUTE_GROUP:return I.GroupType.CSTIC_GROUP;case s.GroupType.SUB_ITEM_GROUP:return I.GroupType.INSTANCE;case s.GroupType.CONFLICT_GROUP:return I.GroupType.CONFLICT;case s.GroupType.CONFLICT_HEADER_GROUP:return I.GroupType.CONFLICT_HEADER}}}return r.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),bl=(()=>{class r{convert(e,n){return{...n,userId:e.userId,cartId:e.cartId,product:{code:e.configuration.productCode},entryNumber:e.cartEntryNumber,configId:e.configuration.configId,configurationInfos:[{configuratorType:"CPQCONFIGURATOR"}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Tl=(()=>{class r{constructor(e,n,i,a){this.http=e,this.occEndpointsService=n,this.converterService=i,this.configExpertModeService=a}getConfiguratorType(){return"CPQCONFIGURATOR"}getExpModeRequested(){let e=!1;return this.configExpertModeService.getExpModeRequested().pipe((0,h.q)(1)).subscribe(n=>e=n),e}setExpModeActive(e){this.configExpertModeService.setExpModeActive(e)}createConfiguration(e,n,i=!1){const a=e.id,u=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("createVariantConfiguration",{urlParams:{productCode:a},queryParams:n?{configIdTemplate:n,expMode:u,forceReset:i}:{expMode:u,forceReset:i}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Ct),(0,D.b)(l=>{this.setExpModeActive(void 0!==l.kbKey)}),(0,v.U)(l=>({...l,owner:e})))}readConfiguration(e,n,i){const a=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("readVariantConfiguration",{urlParams:{configId:e},queryParams:{groupId:n,expMode:a}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Ct),(0,D.b)(u=>{this.setExpModeActive(void 0!==u.kbKey)}),(0,v.U)(u=>({...u,owner:i,newConfiguration:!1})))}updateConfiguration(e){const n=e.configId,i=this.getExpModeRequested(),a=this.occEndpointsService.buildUrl("updateVariantConfiguration",{urlParams:{configId:n},queryParams:{expMode:i}}),u=this.converterService.convert(e,on);return this.http.patch(a,u,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Ct),(0,D.b)(l=>{this.setExpModeActive(void 0!==l.kbKey)}),(0,v.U)(l=>({...l,owner:e.owner})))}addToCart(e){const n=this.occEndpointsService.buildUrl("addVariantConfigurationToCart",{urlParams:{userId:e.userId,cartId:e.cartId}}),i=this.converterService.convert(e,cn),a=new H.WM({"Content-Type":"application/json"});return this.http.post(n,i,{headers:a}).pipe(this.converterService.pipeable(it.Ke))}readConfigurationForCartEntry(e){const n=this.getExpModeRequested(),i=this.occEndpointsService.buildUrl("readVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber},queryParams:{expMode:n}});return this.http.get(i).pipe(this.converterService.pipeable(Ct),(0,D.b)(a=>{this.setExpModeActive(void 0!==a.kbKey)}),(0,v.U)(a=>({...a,owner:e.owner})))}updateConfigurationForCartEntry(e){const n=this.occEndpointsService.buildUrl("updateVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}}),i=new H.WM({"Content-Type":"application/json"}),a=this.converterService.convert(e,sn);return this.http.put(n,a,{headers:i}).pipe(this.converterService.pipeable(it.Ke))}readConfigurationForOrderEntry(e){const n=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForOrderEntry",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}});return this.http.get(n).pipe(this.converterService.pipeable(Nt),(0,v.U)(i=>({configId:i.configId,productCode:i.productCode,groups:[],flatGroups:[],interactionState:{},overview:i,owner:y.mR.createInitialOwner()})),(0,v.U)(i=>({...i,owner:e.owner})))}readPriceSummary(e){const n=this.occEndpointsService.buildUrl("readVariantConfigurationPriceSummary",{urlParams:{configId:e.configId},queryParams:{groupId:e.interactionState.currentGroup}});return this.http.get(n,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(un),(0,v.U)(i=>({...e,priceSummary:i.priceSummary,priceSupplements:i.priceSupplements})))}getConfigurationOverview(e){const n=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:e}});return this.http.get(n,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Nt))}updateConfigurationOverview(e){const n=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:e.configId}}),i=this.converterService.convert(e,ln);return this.http.patch(n,i,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Nt),(0,v.U)(a=>({...a,attributeFilters:e.attributeFilters,groupFilters:e.groupFilters,possibleGroups:e.possibleGroups})))}searchVariants(e){const n=this.occEndpointsService.buildUrl("searchConfiguratorVariants",{urlParams:{configId:e}});return this.http.get(n,{context:this.indicateSendUserForAsm()})}indicateSendUserForAsm(){return(new H.qT).set(c.oT0,{sendUserIdAsHeader:!0})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(H.eN),t.LFG(c.Lz0),t.LFG(c.IXI),t.LFG(rt))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),xl=(()=>{class r{convert(e,n){const i=[];return e.attributes?.forEach(u=>{this.convertAttributeSupplements(u,i)}),{...n,configId:e.configId,productCode:"",groups:[],flatGroups:[],owner:y.mR.createInitialOwner(),interactionState:{},priceSummary:e?.priceSummary,priceSupplements:i}}convertAttributeSupplements(e,n){const i={attributeUiKey:e?.csticUiKey,valueSupplements:[]};e?.priceSupplements?.forEach(a=>{this.convertValueSupplement(a,i?.valueSupplements)}),n.push(i)}convertValueSupplement(e,n){n.push({attributeValueKey:e?.attributeValueKey,priceValue:e?.priceValue,obsoletePriceValue:e?.obsoletePriceValue})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Al(){return{backend:{occ:{endpoints:{createVariantConfiguration:"products/${productCode}/configurators/ccpconfigurator",readVariantConfiguration:"ccpconfigurator/${configId}",updateVariantConfiguration:"ccpconfigurator/${configId}",addVariantConfigurationToCart:"users/${userId}/carts/${cartId}/entries/ccpconfigurator",readVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",updateVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",readVariantConfigurationOverviewForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationPriceSummary:"ccpconfigurator/${configId}/pricing",getVariantConfigurationOverview:"ccpconfigurator/${configId}/configurationOverview",searchConfiguratorVariants:"ccpconfigurator/${configId}/variants"}}}}}let Il=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[{provide:P.CONFIGURATOR_ADAPTER_LIST,useClass:Tl,multi:!0},{provide:Ct,useExisting:Cl,multi:!0},{provide:on,useExisting:yl,multi:!0},{provide:an,useExisting:ml,multi:!0},{provide:un,useExisting:xl,multi:!0},{provide:cn,useExisting:_l,multi:!0},{provide:sn,useExisting:bl,multi:!0},{provide:Nt,useExisting:vl,multi:!0},{provide:ln,useExisting:hl,multi:!0}],imports:[p.ez,c.pEA.withConfigFactory(Al)]}),r})(),Sl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Il,fl,Ms]}),r})();var U,Ol=b(5758),wl=b(7289);!function(r){let o;var n;let e;(n=o=r.DisplayAs||(r.DisplayAs={}))[n.RADIO_BUTTON=1]="RADIO_BUTTON",n[n.CHECK_BOX=2]="CHECK_BOX",n[n.DROPDOWN=3]="DROPDOWN",n[n.LIST_BOX=4]="LIST_BOX",n[n.LIST_BOX_MULTI=5]="LIST_BOX_MULTI",n[n.READ_ONLY=71]="READ_ONLY",n[n.INPUT=95]="INPUT",n[n.AUTO_COMPLETE_CUSTOM=102]="AUTO_COMPLETE_CUSTOM",function(n){n.INPUT_STRING="String",n.INPUT_NUMBER="Number",n.QTY_ATTRIBUTE_LEVEL="Quantity",n.QTY_VALUE_LEVEL="Attr.Quantity",n.N_A="N/A"}(e=r.DataType||(r.DataType={}))}(U||(U={}));let pn=(()=>{class r{constructor(e){this.languageService=e,this.logger=(0,t.f3M)(c.mQy)}convertQuantity(e,n){if(!e.selected)return;let a;switch(this.convertDataType(n)){case s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL:a=Number(n.quantity);break;case s.DataType.USER_SELECTION_QTY_VALUE_LEVEL:a=Number(e.quantity);break;default:a=void 0}return a}convertValuePrice(e,n){let i;return e.price&&(i={currencyIso:n,value:parseFloat(e.price)},this.formatPriceForLocale(i,this.getLanguage())),i}calculateValuePriceTotal(e,n){let i;return n&&(i={currencyIso:n.currencyIso,value:(e||1)*n.value},this.formatPriceForLocale(i,this.getLanguage())),i}calculateAttributePriceTotal(e,n){const i=e.values?.filter(u=>u.selected&&u.valuePriceTotal).reduce((u,l)=>u+(l.valuePriceTotal?.value??0),0),a={currencyIso:n,value:i??0};return this.formatPriceForLocale(a,this.getLanguage()),a}formatPriceForLocale(e,n){const i=(0,p.jK)(e.currencyIso,"narrow",n);e.formattedValue=(0,p.xG)(e.value,n,i,e.currencyIso)}convertDataType(e){let n;switch(e.dataType){case U.DataType.INPUT_STRING:n=s.DataType.INPUT_STRING;break;case U.DataType.INPUT_NUMBER:n=s.DataType.INPUT_NUMBER;break;case U.DataType.N_A:n=s.DataType.USER_SELECTION_NO_QTY;break;case U.DataType.QTY_ATTRIBUTE_LEVEL:n=s.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;break;case U.DataType.QTY_VALUE_LEVEL:n=e.displayAs===U.DisplayAs.RADIO_BUTTON||e.displayAs===U.DisplayAs.DROPDOWN||e.displayAs===U.DisplayAs.CHECK_BOX&&!e.isLineItem?s.DataType.USER_SELECTION_NO_QTY:s.DataType.USER_SELECTION_QTY_VALUE_LEVEL;break;default:n=s.DataType.NOT_IMPLEMENTED}return n}convertPriceSummary(e){const n={};if(e.currencyISOCode){const i=e.currencyISOCode;if(e?.responder?.totalPrice&&e?.currencySign){const a=e?.currencySign,u=e.responder.totalPrice.replace(a,""),l={currencyIso:i,value:parseFloat(u)};this.formatPriceForLocale(l,this.getLanguage()),n.currentTotal=l}if(e?.responder?.baseProductPrice){const u={currencyIso:i,value:parseFloat(e.responder.baseProductPrice)};this.formatPriceForLocale(u,this.getLanguage()),n.basePrice=u}if(n.currentTotal&&n.basePrice){const a={currencyIso:i,value:n.currentTotal.value-n.basePrice.value};this.formatPriceForLocale(a,this.getLanguage()),n.selectedOptions=a}}return n}hasAnyProducts(e){return e.some(n=>n?.productSystemId)}convertAttributeLabel(e){return e.label?e.label:e.name?e.name:""}getLanguage(){const e=this.getActiveLanguage();try{return(0,p.wM)(e),e}catch{return this.reportMissingLocaleData(e),"en"}}getActiveLanguage(){let e;return this.languageService.getActive().subscribe(n=>e=n).unsubscribe(),e??"en"}reportMissingLocaleData(e){(0,t.X6Q)()&&this.logger.warn(`CpqConfiguratorNormalizerUtilsService: No locale data registered for '${e}' (see https://angular.io/api/common/registerLocaleData).`)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.TSl))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),El=(()=>{class r{constructor(e,n){this.cpqConfiguratorNormalizerUtilsService=e,this.translation=n}convert(e,n){const i={...n,configId:e.configurationId?e.configurationId:"",complete:!e.incompleteAttributes?.length,consistent:!(e.invalidMessages?.length||e.failedValidations?.length||e.incompleteMessages?.length||e.errorMessages?.length),totalNumberOfIssues:this.generateTotalNumberOfIssues(e),productCode:e.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(e),groups:[],flatGroups:[],owner:y.mR.createInitialOwner(),interactionState:{},errorMessages:this.generateErrorMessages(e),warningMessages:this.generateWarningMessages(e),pricingEnabled:!0};return e.tabs?.forEach(a=>this.convertGroup(a,e.attributes??[],e.currencyISOCode,i.groups,i.flatGroups)),(!i.groups||0===i.groups.length)&&this.convertGenericGroup(e.attributes??[],e.incompleteAttributes??[],e.currencyISOCode,i.groups,i.flatGroups),i}generateTotalNumberOfIssues(e){return(e.incompleteAttributes?.length??0)+(e.incompleteMessages?.length??0)+(e.invalidMessages?.length??0)+(e.failedValidations?.length??0)+(e.errorMessages?.length??0)}generateWarningMessages(e){let n=[];return n=n.concat(e.failedValidations??[]),n=n.concat(e.incompleteMessages??[]),n}generateErrorMessages(e){let n=[];return n=n.concat(e.errorMessages??[]),n=n.concat(e.invalidMessages??[]),n}convertGroup(e,n,i,a,u){const l=[];e.isSelected&&n.forEach(g=>this.convertAttribute(g,e.id,i,l));const C={id:e.id.toString(),name:e.name,description:e.displayName,configurable:!0,complete:!e.isIncomplete,consistent:!0,groupType:s.GroupType.ATTRIBUTE_GROUP,attributes:l,subGroups:[]};u.push(C),a.push(C)}convertGenericGroup(e,n,i,a,u){const l=[];e.forEach(g=>this.convertAttribute(g,1,i,l));const C={id:"1",name:"_GEN",configurable:!0,complete:0===n.length,consistent:!0,groupType:s.GroupType.ATTRIBUTE_GROUP,attributes:l,subGroups:[]};this.translation.translate("configurator.group.general").pipe((0,h.q)(1)).subscribe(g=>C.description=g),a.push(C),u.push(C)}convertAttribute(e,n,i,a){const u={attrCode:e.stdAttrCode,name:this.mapPAId(e),description:e.description,label:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(e),required:e.required,isLineItem:e.isLineItem,uiType:this.convertAttributeType(e),dataType:this.cpqConfiguratorNormalizerUtilsService.convertDataType(e),quantity:Number(e.quantity),groupId:n.toString(),userInput:e.userInput,hasConflicts:e.hasConflict,selectedSingleValue:void 0,images:[],visible:!0};if(e.values&&e.displayAs!==U.DisplayAs.INPUT){const l=[];e.values.forEach(C=>this.convertValue(C,e,i,l)),u.values=l,this.setSelectedSingleValue(u)}u.attributePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateAttributePriceTotal(u,i),this.compileAttributeIncomplete(u),a.push(u)}mapPAId(e){return e.pA_ID?e.pA_ID.toString():e.PA_ID.toString()}setSelectedSingleValue(e){const n=e.values;if(n){const i=n.map(a=>a).filter(a=>a.selected);i&&1===i.length&&(e.selectedSingleValue=i[0].valueCode)}}convertValueDisplay(e,n,i){n.displayAs===U.DisplayAs.DROPDOWN&&e.selected&&0===e.paV_ID?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,h.q)(1)).subscribe(a=>i.valueDisplay=a):i.valueDisplay=e.valueDisplay}convertValueCode(e){return 0===e?s.RetractValueCode:e.toString()}convertValue(e,n,i,a){if(this.hasValueToBeIgnored(n,e))return;const u={valueCode:this.convertValueCode(e.paV_ID),name:e.valueCode,description:e.description,productSystemId:e.productSystemId,selected:e.selected,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(e,n),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(e,i),images:[]};this.convertValueDisplay(e,n,u),u.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(u.quantity??1,u.valuePrice),a.push(u)}convertAttributeType(e){const n=e.displayAs,i=!(!e.values||!this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(e.values));return e.isEnabled||n!==U.DisplayAs.RADIO_BUTTON&&n!==U.DisplayAs.DROPDOWN&&n!==U.DisplayAs.CHECK_BOX&&n!==U.DisplayAs.INPUT?this.findUiTypeFromDisplayType(n,i,e):s.UiType.READ_ONLY}findUiTypeFromDisplayType(e,n,i){let a;switch(e){case U.DisplayAs.RADIO_BUTTON:a=n?s.UiType.RADIOBUTTON_PRODUCT:s.UiType.RADIOBUTTON;break;case U.DisplayAs.DROPDOWN:a=n?s.UiType.DROPDOWN_PRODUCT:s.UiType.DROPDOWN;break;case U.DisplayAs.CHECK_BOX:a=n?s.UiType.CHECKBOXLIST_PRODUCT:s.UiType.CHECKBOXLIST;break;case U.DisplayAs.INPUT:a=i.dataType===U.DataType.INPUT_STRING?s.UiType.STRING:s.UiType.NOT_IMPLEMENTED;break;default:a=s.UiType.NOT_IMPLEMENTED}return a}compileAttributeIncomplete(e){switch(e.incomplete=!1,e.uiType){case s.UiType.RADIOBUTTON:case s.UiType.RADIOBUTTON_PRODUCT:case s.UiType.DROPDOWN:case s.UiType.DROPDOWN_PRODUCT:case s.UiType.SINGLE_SELECTION_IMAGE:(!e.selectedSingleValue||e.selectedSingleValue===s.RetractValueCode)&&(e.incomplete=!0);break;case s.UiType.NUMERIC:case s.UiType.STRING:e.userInput||(e.incomplete=!0);break;case s.UiType.CHECKBOXLIST:case s.UiType.CHECKBOXLIST_PRODUCT:case s.UiType.CHECKBOX:case s.UiType.MULTI_SELECTION_IMAGE:void 0!==e.values?.find(i=>i.selected)||(e.incomplete=!0)}}hasValueToBeIgnored(e,n){const i=e.values?.map(a=>a).filter(a=>a.selected&&0!==a.paV_ID);return(e.displayAs===U.DisplayAs.DROPDOWN&&e.required&&i&&i.length>0&&0===n.paV_ID)??!1}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(pn),t.LFG(c.D7D))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),Ul=(()=>{class r{constructor(e,n){this.cpqConfiguratorNormalizerUtilsService=e,this.translation=n,this.NO_OPTION_SELECTED=0}convert(e,n){return{...n,configId:e.configurationId?e.configurationId:"",productCode:e.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(e),groups:e.tabs?.flatMap(a=>this.convertTab(a,e.currencyISOCode)).filter(a=>a.attributes&&a.attributes.length>0),totalNumberOfIssues:this.calculateTotalNumberOfIssues(e)}}convertTab(e,n){let i=[];e.attributes?.forEach(u=>{i=i.concat(this.convertAttribute(u,n))});const a={id:e.id.toString(),groupDescription:e.displayName,attributes:i};return"0"===a.id&&this.translation.translate("configurator.group.general").pipe((0,h.q)(1)).subscribe(u=>a.groupDescription=u),a}convertAttribute(e,n){const i=e?.values&&this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(e?.values)?s.AttributeOverviewType.BUNDLE:s.AttributeOverviewType.GENERAL,a=[];return this.convertAttributeValue(e,n).forEach(u=>{a.push({...u,type:i,attribute:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(e),attributeId:e.stdAttrCode.toString()})}),a}convertAttributeValue(e,n){const i=[];switch(e.displayAs){case U.DisplayAs.INPUT:e?.dataType===U.DataType.INPUT_STRING?e.userInput&&e.userInput.length>0&&i.push(this.extractValueUserInput(e,n)):i.push({attribute:"",value:"NOT_IMPLEMENTED"});break;case U.DisplayAs.RADIO_BUTTON:case U.DisplayAs.DROPDOWN:const a=e.values?.find(u=>u.selected&&u.paV_ID!==this.NO_OPTION_SELECTED);a&&i.push(this.extractValue(a,e,n));break;case U.DisplayAs.CHECK_BOX:e.values?.filter(u=>u.selected)?.forEach(u=>{i.push(this.extractValue(u,e,n))});break;default:i.push({attribute:"",value:"NOT_IMPLEMENTED"})}return i}extractValue(e,n,i){const a={attribute:"",value:e.valueDisplay??e.paV_ID.toString(),valueId:e.paV_ID.toString(),productCode:e.productSystemId,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(e,n),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(e,i)};return a.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(a.quantity??1,a.valuePrice),a}extractValueUserInput(e,n){const i=e.values?e.values[0]:void 0,a={attribute:"",value:e.userInput??e.stdAttrCode.toString(),valueId:i?.paV_ID.toString(),quantity:1};return i&&(a.valuePrice=this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(i,n),a.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(a.quantity??1,a.valuePrice)),a}calculateTotalNumberOfIssues(e){return(e.incompleteAttributes?.length??0)+(e.incompleteMessages?.length??0)+(e.invalidMessages?.length??0)+(e.failedValidations?.length??0)+(e.errorMessages?.length??0)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(pn),t.LFG(c.D7D))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();class vt{static getUpdateInformation(o){const e=o.attrCode,n=o.groupId;if(e&&n)return{standardAttributeCode:e.toString(),tabId:n};throw new Error("Attribute code of group id not present: "+JSON.stringify(o))}static findFirstChangedAttribute(o){const e=o.groups[0];if(e.attributes)return e.attributes[0];throw new Error("No changed attributes found")}}let Fl=(()=>{class r{convert(e){const n=vt.findFirstChangedAttribute(e);let i;return i=e.updateType===s.UpdateType.ATTRIBUTE_QUANTITY?this.convertQuantity(n,e.configId):this.convertAttribute(n,e.configId),i}convertQuantity(e,n){const i=vt.getUpdateInformation(e);return{configurationId:n,standardAttributeCode:i.standardAttributeCode,changeAttributeValue:{quantity:e.quantity},tabId:i.tabId}}convertAttribute(e,n){const i=vt.getUpdateInformation(e),a={configurationId:n,standardAttributeCode:i.standardAttributeCode,changeAttributeValue:{},tabId:i.tabId};return e.uiType===s.UiType.DROPDOWN||e.uiType===s.UiType.DROPDOWN_PRODUCT||e.uiType===s.UiType.RADIOBUTTON||e.uiType===s.UiType.RADIOBUTTON_PRODUCT||e.uiType===s.UiType.SINGLE_SELECTION_IMAGE?a.changeAttributeValue.attributeValueIds=this.processSelectedSingleValue(e.selectedSingleValue):e.uiType===s.UiType.CHECKBOXLIST||e.uiType===s.UiType.CHECKBOXLIST_PRODUCT||e.uiType===s.UiType.CHECKBOX||e.uiType===s.UiType.MULTI_SELECTION_IMAGE?a.changeAttributeValue.attributeValueIds=this.prepareValueIds(e):(e.uiType===s.UiType.STRING||e.uiType===s.UiType.NUMERIC)&&(a.changeAttributeValue.userInput=e.userInput,a.changeAttributeValue?.userInput||(a.changeAttributeValue.userInput=" ")),a}processValueCode(e){return e&&e===s.RetractValueCode?"0":e}processSelectedSingleValue(e){let n=this.processValueCode(e);return n||(n=","),n}prepareValueIds(e){let n="";const i=e.values?.filter(a=>a.selected);return i&&i.length>0?i.forEach(a=>{n+=a.valueCode+","}):n=",",n}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),Rl=(()=>{class r{convert(e){const n=vt.findFirstChangedAttribute(e);return this.convertAttribute(n,e.configId)}convertAttribute(e,n){const i=vt.getUpdateInformation(e),a=this.findFirstChangedValue(e);return{configurationId:n,standardAttributeCode:i.standardAttributeCode,attributeValueId:a.valueCode,quantity:a.quantity??1,tabId:i.tabId}}findFirstChangedValue(e){if(e.values&&e.values.length>0)return e.values[0];throw new Error("No values present")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();const k=new t.OlP("CpqConfiguratorNormalizer"),Me=new t.OlP("CpqConfiguratorSerializer"),Ge=new t.OlP("CpqConfiguratorValueSerializer"),Pe=new t.OlP("CpqConfiguratorOverviewNormalizer");let Dl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez]}),r})();const gn=new t.OlP("CpqConfiguratorAddToCartSerializer"),dn=new t.OlP("CpqConfiguratorUpdateCartEntrySerializer");let Nl=(()=>{class r{convert(e,n){return{...n,userId:e.userId,cartId:e.cartId,product:{code:e.productCode},quantity:e.quantity,configId:e.configId}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ml=(()=>{class r{convert(e,n){return{...n,userId:e.userId,cartId:e.cartId,entryNumber:e.cartEntryNumber,configId:e.configuration.configId}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Gl(){return{backend:{occ:{endpoints:{getCpqAccessData:"users/${userId}/access/cpqconfigurator",addCpqConfigurationToCart:"users/${userId}/carts/${cartId}/entries/cpqconfigurator",readCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",readCpqConfigurationForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator",updateCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",createCpqConfiguration:"products/${productCode}/configurators/cpqconfigurator",readCpqConfiguration:"cpqconfigurator/${configurationId}/configuration?tabId=${tabId}",readCpqConfigurationOverview:"cpqconfigurator/${configurationId}/configurationOverview",updateCpqAttribute:"cpqconfigurator/${configurationId}/attributes/${attributeCode}?tabId=${tabId}",updateCpqAttributeValueQuantity:"cpqconfigurator/${configurationId}/attributes/${attributeCode}/values/${attributeValueId}?tabId=${tabId}",readCpqConfigurationForCartEntryFull:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator/configuration",readCpqConfigurationForOrderEntryFull:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator/configuration"}}}}}let fn=(()=>{class r{constructor(e,n,i){this.http=e,this.occEndpointsService=n,this.converterService=i}addToCart(e){const n=this.occEndpointsService.buildUrl("addCpqConfigurationToCart",{urlParams:{userId:e.userId,cartId:e.cartId}}),i=this.converterService.convert(e,gn);return this.http.post(n,i).pipe(this.converterService.pipeable(it.Ke))}updateCartEntry(e){const n=this.occEndpointsService.buildUrl("updateCpqConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}}),i=this.converterService.convert(e,dn);return this.http.put(n,i).pipe(this.converterService.pipeable(it.Ke))}getConfigIdForCartEntry(e){const n=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}});return this.http.get(n).pipe((0,v.U)(i=>i.configId))}getConfigIdForOrderEntry(e){const n=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntry",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}});return this.http.get(n).pipe((0,v.U)(i=>i.configId))}createConfiguration(e){return this.callCreateConfiguration(e).pipe(this.converterService.pipeable(k))}readConfiguration(e,n){return this.callReadConfiguration(e,n).pipe(this.converterService.pipeable(k))}readConfigurationOverview(e){return this.callReadConfigurationOverview(e).pipe(this.converterService.pipeable(Pe))}updateAttribute(e){const n=this.converterService.convert(e,Me);return this.callUpdateAttribute(n).pipe(this.converterService.pipeable(k))}updateValueQuantity(e){const n=this.converterService.convert(e,Ge);return this.callUpdateValue(n).pipe(this.converterService.pipeable(k))}readConfigurationForCartEntry(e){return this.callReadConfigurationForCartEntry(e).pipe(this.converterService.pipeable(k))}readConfigurationForOrderEntry(e){return this.callReadConfigurationForOrderEntry(e).pipe(this.converterService.pipeable(k))}callCreateConfiguration(e){const n=this.occEndpointsService.buildUrl("createCpqConfiguration",{urlParams:{productCode:e}});return this.http.get(n)}callReadConfiguration(e,n){const i=this.occEndpointsService.buildUrl("readCpqConfiguration",{urlParams:{configurationId:e},queryParams:n?{tabId:n}:void 0});return this.http.get(i)}callReadConfigurationOverview(e){const n=this.occEndpointsService.buildUrl("readCpqConfigurationOverview",{urlParams:{configurationId:e}});return this.http.get(n)}callUpdateAttribute(e){const n=this.occEndpointsService.buildUrl("updateCpqAttribute",{urlParams:{configurationId:e.configurationId,attributeCode:e.standardAttributeCode},queryParams:{tabId:e.tabId}});return this.http.patch(n,e.changeAttributeValue)}callUpdateValue(e){const n=this.occEndpointsService.buildUrl("updateCpqAttributeValueQuantity",{urlParams:{configurationId:e.configurationId,attributeCode:e.standardAttributeCode,attributeValueId:e.attributeValueId},queryParams:{tabId:e.tabId}});return this.http.patch(n,{quantity:e.quantity})}callReadConfigurationForCartEntry(e){const n=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntryFull",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}});return this.http.get(n)}callReadConfigurationForOrderEntry(e){const n=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntryFull",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}});return this.http.get(n)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(H.eN),t.LFG(c.Lz0),t.LFG(c.IXI))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Pl=(()=>{class r{constructor(e){this.cpqOccService=e}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}supportsCpqOverOcc(){return!0}createConfiguration(e){return this.cpqOccService.createConfiguration(e.id).pipe((0,v.U)(n=>(n.owner=e,n)))}readConfiguration(e,n,i){return this.cpqOccService.readConfiguration(e,n).pipe((0,v.U)(a=>(a.owner=i,a)))}updateConfiguration(e){return(e.updateType===s.UpdateType.VALUE_QUANTITY?this.cpqOccService.updateValueQuantity:this.cpqOccService.updateAttribute).call(this.cpqOccService,e).pipe((0,v.U)(i=>(i.owner=e.owner,i)))}updateConfigurationOverview(){throw new Error("Update the configuration overview is not supported for the CPQ configurator")}addToCart(e){return this.cpqOccService.addToCart(e)}readConfigurationForCartEntry(e){return this.cpqOccService.readConfigurationForCartEntry(e).pipe((0,v.U)(n=>(n.owner=e.owner,n)))}updateConfigurationForCartEntry(e){return this.cpqOccService.updateCartEntry(e)}readConfigurationForOrderEntry(e){return this.cpqOccService.readConfigurationForOrderEntry(e).pipe((0,v.U)(n=>(n.owner=e.owner,n)))}readPriceSummary(e){return(0,N.of)(e)}getConfigurationOverview(e){return this.cpqOccService.readConfigurationOverview(e)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(fn))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),Ll=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[(0,c.x2j)(Gl),{provide:gn,useExisting:Nl,multi:!0},{provide:dn,useExisting:Ml,multi:!0},{provide:P.CONFIGURATOR_ADAPTER_LIST,useClass:Pl,multi:!0}],imports:[p.ez]}),r})(),Vl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:function(e){let n=null;return n=e?new(e||r):t.LFG(c.DeH),n},providedIn:"root"}),r})(),ql=(()=>{class r{constructor(e){this.config=e,this.logger=(0,t.f3M)(c.mQy),this.CPQ_MARKER_HEADER={headers:new H.WM({[wl.O4]:"x"})}}buildUrl(e,n,i){const a=this.config.backend?.cpq?.endpoints;let u;switch(e){case"configurationInit":u=a?.configurationInit;break;case"configurationDisplay":u=a?.configurationDisplay;break;case"attributeUpdate":u=a?.attributeUpdate;break;case"valueUpdate":u=a?.valueUpdate}u||(u="configurations",this.logger.warn(`${e} endpoint configuration missing for cpq backend, please provide it via key: "backend.cpq.endpoints.${e}"`));let l=this.config.backend?.cpq?.prefix+u;return l=n?c.leO.resolve(l,n):l,l=i?this.appendQueryParameters(l,i):l,l}appendQueryParameters(e,n){let i=e+"?";return n.forEach((a,u)=>{i=u>0?i+"&":i,i=`${i}${a.name}=${a.value}`}),i}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(Vl))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Zl=(()=>{class r{constructor(e,n,i){this.http=e,this.converterService=n,this.endpointService=i}createConfiguration(e){return this.callConfigurationInit(e).pipe((0,m.w)(n=>this.callConfigurationDisplay(n.configurationId).pipe(this.converterService.pipeable(k),(0,v.U)(i=>({...i,configId:n.configurationId})))))}readConfiguration(e,n){return this.callConfigurationDisplay(e,n).pipe(this.converterService.pipeable(k),(0,v.U)(i=>({...i,configId:e})))}readConfigurationOverview(e){return this.getConfigurationWithAllTabsAndAttributes(e).pipe(this.converterService.pipeable(Pe),(0,v.U)(n=>({...n,configId:e})))}getConfigurationWithAllTabsAndAttributes(e){return this.callConfigurationDisplay(e).pipe((0,m.w)(n=>{const i=[];return n.tabs&&n.tabs.length>0?n.tabs.forEach(a=>{i.push(a.isSelected?(0,N.of)(n):this.callConfigurationDisplay(e,a.id.toString()))}):i.push((0,N.of)(n)),(0,Ol.D)(i)}),(0,v.U)(this.mergeTabResults))}mergeTabResults(e){const n={...e[e.length-1]};return n.attributes=void 0,n.tabs=[],e.forEach(i=>{let a;const u=i.tabs?.find(l=>l.isSelected);a=u&&i.tabs&&i.tabs.length>0?{...u}:{id:0},a.attributes=i.attributes,n.tabs?.push(a)}),n}updateAttribute(e){const n=this.converterService.convert(e,Me);return this.callUpdateAttribute(n).pipe((0,m.w)(()=>this.callConfigurationDisplay(e.configId,n.tabId).pipe(this.converterService.pipeable(k),(0,v.U)(i=>({...i,configId:e.configId})))))}updateValueQuantity(e){const n=this.converterService.convert(e,Ge);return this.callUpdateValue(n).pipe((0,m.w)(()=>this.callConfigurationDisplay(e.configId,n.tabId).pipe(this.converterService.pipeable(k),(0,v.U)(i=>({...i,configId:e.configId})))))}callUpdateValue(e){return this.http.patch(this.endpointService.buildUrl("valueUpdate",{configId:e.configurationId,attributeCode:e.standardAttributeCode,valueCode:e.attributeValueId}),{Quantity:e.quantity},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationInit(e){return this.http.post(this.endpointService.buildUrl("configurationInit"),{ProductSystemId:e},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationDisplay(e,n){return this.http.get(this.endpointService.buildUrl("configurationDisplay",{configId:e},n?[{name:"tabId",value:n}]:void 0),this.endpointService.CPQ_MARKER_HEADER)}callUpdateAttribute(e){return this.http.patch(this.endpointService.buildUrl("attributeUpdate",{configId:e.configurationId,attributeCode:e.standardAttributeCode}),e.changeAttributeValue,this.endpointService.CPQ_MARKER_HEADER)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(H.eN),t.LFG(c.IXI),t.LFG(ql))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),kl=(()=>{class r{constructor(e,n){this.cpqRestService=e,this.cpqOccService=n}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}supportsCpqOverOcc(){return!1}createConfiguration(e){return this.cpqRestService.createConfiguration(e.id).pipe((0,v.U)(n=>(n.owner=e,n)))}readConfiguration(e,n,i){return this.cpqRestService.readConfiguration(e,n).pipe((0,v.U)(a=>(a.owner=i,a)))}updateConfiguration(e){return(e.updateType===s.UpdateType.VALUE_QUANTITY?this.cpqRestService.updateValueQuantity:this.cpqRestService.updateAttribute).call(this.cpqRestService,e).pipe((0,v.U)(i=>(i.owner=e.owner,i)))}updateConfigurationOverview(){throw new Error("Update the configuration overview is not supported for the CPQ configurator")}addToCart(e){return this.cpqOccService.addToCart(e)}readConfigurationForCartEntry(e){return this.cpqOccService.getConfigIdForCartEntry(e).pipe((0,m.w)(n=>this.cpqRestService.readConfiguration(n).pipe((0,v.U)(i=>(i.owner=e.owner,i)))))}updateConfigurationForCartEntry(e){return this.cpqOccService.updateCartEntry(e)}readConfigurationForOrderEntry(e){return this.cpqOccService.getConfigIdForOrderEntry(e).pipe((0,m.w)(n=>this.cpqRestService.readConfiguration(n).pipe((0,v.U)(i=>(i.owner=e.owner,i)))))}readPriceSummary(e){return(0,N.of)(e)}getConfigurationOverview(e){return this.cpqRestService.readConfigurationOverview(e)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(Zl),t.LFG(fn))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();const Bl={backend:{cpq:{endpoints:{configurationInit:"configurations",configurationDisplay:"configurations/${configId}/display",attributeUpdate:"configurations/${configId}/attributes/${attributeCode}",valueUpdate:"configurations/${configId}/attributes/${attributeCode}/attributeValues/${valueCode}"},prefix:"/api/configuration/v1/"}}};let Ql=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[{provide:P.CONFIGURATOR_ADAPTER_LIST,useClass:kl,multi:!0},{provide:k,useClass:El,multi:!0},{provide:Me,useClass:Fl,multi:!0},{provide:Ge,useClass:Rl,multi:!0},{provide:Pe,useClass:Ul,multi:!0},(0,c.i51)(Bl)],imports:[p.ez]}),r})(),Yl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Dl,Ll,Ql]}),r})(),Jl=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[Sl,Yl]})}return r})()}}]);